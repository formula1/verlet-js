!function(t,e,n){function r(n,o){if(!e[n]){if(!t[n]){var s="function"==typeof require&&require;if(!o&&s)return s(n,!0);if(i)return i(n,!0);throw new Error("Cannot find module '"+n+"'")}var a=e[n]={exports:{}};t[n][0].call(a.exports,function(e){var i=t[n][1][e];return r(i?i:e)},a,a.exports)}return e[n].exports}for(var i="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t){t("./verlet-polyfill");var e=t("./verlet-draw"),n=t("./verlet"),r=t("./constraint");t("./objects"),window.Vec2=t("./structures/Vec2"),window.VerletJS=n,window.VerletDraw=e,window.Particle=n.Particle;for(var i in r)window[i]=r[i]},{"./constraint":5,"./objects":6,"./structures/Vec2":7,"./verlet":4,"./verlet-draw":3,"./verlet-polyfill":2}],2:[function(){Math.sign||(Math.sign=function(t){return+t===t?0===t?t:t>0?1:-1:0/0}),Math.quadratic||(Math.quadratic=function(t,e,n){var r=e*e-4*t*n;return 0>r?!1:0==r?[-e/(2*t)]:(t*=2,r=Math.sqrt(r)/t,e*=-1/t,[e+r,e-r])}),Math.lawCos||(Math.lawCos=function(t,e,n){return Math.acos((-t*t+e*e+n*n)/(2*e*n))})},{}],3:[function(t,e){function n(t,e,n,i){this.width=t,this.height=e,this.canvas=n,this.ctx=n.getContext("2d"),this.mouse=new Vec2(0,0),this.mouseDown=!1,this.draggedEntity=null,this.selectionRadius=20,this.highlightColor="#4f545c",this.physics=i?i:new r(t,e);var o=this;this.physics.logic=function(){o.draggedEntity&&o.draggedEntity.pos.set(o.mouse)},this.canvas.oncontextmenu=function(t){t.preventDefault()},this.canvas.onmousedown=function(){o.mouseDown=!0;var t=o.physics.nearestEntity(o.mouse,o.selectionRadius);t&&(o.draggedEntity=t,console.log(t.pos))},this.canvas.onmouseup=function(){o.mouseDown=!1,o.draggedEntity=null},this.canvas.onmousemove=function(t){var e=o.canvas.getBoundingClientRect();o.mouse.x=t.clientX-e.left,o.mouse.y=t.clientY-e.top}}window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};var r=t("./verlet.js");e.exports=n,n.prototype.draw=function(){var t,e;this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);var n=this.physics.composites;for(e in n){if(n[e].drawConstraints)n[e].drawConstraints(this.ctx,n[e]);else{var r=n[e].constraints;for(t in r)r[t].draw(this.ctx)}if(n[e].drawParticles)n[e].drawParticles(this.ctx,n[e]);else{var i=n[e].particles;for(t in i)i[t].draw(this.ctx)}n[e].draw&&n[e].draw(this.ctx)}var o=this.draggedEntity||this.physics.nearestEntity(this.mouse,this.selectionRadius);o&&(this.ctx.beginPath(),this.ctx.arc(o.pos.x,o.pos.y,8,0,2*Math.PI),this.ctx.strokeStyle=this.highlightColor,this.ctx.stroke())}},{"./verlet.js":4}],6:[function(t){var e=t("./verlet"),n=e.Particle,r=t("./constraint"),i=r.DistanceConstraint;e.prototype.point=function(t){var e=new this.Composite;return e.particles.push(new n(t)),this.composites.push(e),e},e.prototype.lineSegments=function(t,e,r){var o,s=new this.Composite;for(o in t)s.particles.push(new n(t[o])),o>0&&s.constraints.push(new i(s.particles[o],s.particles[o-1],e));return r&&s.constraints.push(new i(s.particles[s.particles.length-1],s.particles[0],e)),this.composites.push(s),s},e.prototype.cloth=function(t,e,r,o,s,a){var u,f,h=new this.Composite,l=e/o,c=r/o;for(f=0;o>f;++f)for(u=0;o>u;++u){var p=t.x+u*l-e/2+l/2,y=t.y+f*c-r/2+c/2;h.particles.push(new n(new Vec2(p,y))),u>0&&h.constraints.push(new i(h.particles[f*o+u],h.particles[f*o+u-1],a)),f>0&&h.constraints.push(new i(h.particles[f*o+u],h.particles[(f-1)*o+u],a))}for(u=0;o>u;++u)0==u%s&&h.pin(u);return this.composites.push(h),h},e.prototype.tire=function(t,e,r,o,s){var a,u=2*Math.PI/r,f=new this.Composite;for(a=0;r>a;++a){var h=a*u;f.particles.push(new n(new Vec2(t.x+Math.cos(h)*e,t.y+Math.sin(h)*e)))}var l=new n(t);for(f.particles.push(l),a=0;r>a;++a)f.constraints.push(new i(f.particles[a],f.particles[(a+1)%r],s)),f.constraints.push(new i(f.particles[a],l,o)),f.constraints.push(new i(f.particles[a],f.particles[(a+5)%r],s));return this.composites.push(f),f}},{"./constraint":5,"./verlet":4}],4:[function(t,e,n){function r(t,e){this.width=t,this.height=e,this.bounds=function(t){t.pos.y>this.height-1&&(t.pos.y=this.height-1),t.pos.x<0&&(t.pos.x=0),t.pos.x>this.width-1&&(t.pos.x=this.width-1)},this.gravity=new i(0,.2),this.friction=.99,this.groundFriction=.8,this.composites=[]}var i=t("./structures/Vec2"),o=t("./collision");n=e.exports=r,n.Particle=t("./structures/Particle");var s=n.Composite=t("./structures/Composite");n.Composite=s,r.prototype.Composite=s,r.prototype.logic=function(){throw new Error("Logic hasn't been set")},r.prototype.frame=function(t){var e,n,r,i;for(r in this.composites){i=this.composites[r].particles;for(e in i)i[e].lastPos.set(i[e].pos),i[e].pos.add(this.gravity),i[e].pos.y>=this.height-1&&i[e].vel.length2()>1e-6&&i[e].vel.scale(this.groundFriction),i[e].pos.add(i[e].vel.scale(this.friction))}var s=1/t;for(r in this.composites){var a=this.composites[r].constraints;for(e=0;t>e;++e)for(n in a)a[n].relax(s)}for(r in this.composites){i=this.composites[r].particles,this.composites[r].aabb.clear();for(e in i)this.bounds(i[e]),i[e].vel.set(i[e].pos).sub(i[e].lastPos),this.composites[r].aabb.digestPoint(i[e].pos)}o(this.composites,t),this.logic()},r.prototype.nearestEntity=function(t,e){var n,r,i=0,o=null,s=null;for(n in this.composites){var a=this.composites[n].particles;for(r in a){var u=a[r].pos.dist2(t);e*e>=u&&(null===o||i>u)&&(o=a[r],s=this.composites[n].constraints,i=u)}}for(r in s)s[r]instanceof PinConstraint&&s[r].a==o&&(o=s[r]);return o}},{"./collision":10,"./structures/Composite":9,"./structures/Particle":8,"./structures/Vec2":7}],5:[function(t,e,n){t("./structures/Vec2"),n.DistanceConstraint=t("./constraints/DistanceConstraint"),n.PinConstraint=t("./constraints/PinConstraint"),n.AngleConstraint=t("./constraints/AngleConstraint"),n.MidpointAreaConstraint=t("./constraints/AreaConstraint"),n.ScaledAreaConstraint=t("./constraints/InflateAreaConstraint")},{"./constraints/AngleConstraint":13,"./constraints/AreaConstraint":14,"./constraints/DistanceConstraint":11,"./constraints/InflateAreaConstraint":15,"./constraints/PinConstraint":12,"./structures/Vec2":7}],11:[function(t,e){function n(t,e,n,r){this.a=t,this.b=e,this.distance="undefined"!=typeof r?r:t.pos.clone().sub(e.pos).length(),this.stiffness=n}n.prototype.relax=function(t){var e=this.a.pos.clone().sub(this.b.pos),n=e.length2();e.scale((this.distance*this.distance-n)/n*this.stiffness*t),this.a.pos.add(e),this.b.pos.sub(e)},n.prototype.draw=function(t){t.beginPath(),t.moveTo(this.a.pos.x,this.a.pos.y),t.lineTo(this.b.pos.x,this.b.pos.y),t.strokeStyle="#d8dde2",t.stroke()},e.exports=n},{}],13:[function(t,e){function n(t,e,n,r){this.a=t,this.b=e,this.c=n,this.angle=this.b.pos.angle2(this.a.pos,this.c.pos),this.stiffness=r}n.prototype.relax=function(t){var e=this.b.pos.angle2(this.a.pos,this.c.pos),n=e-this.angle;n<=-Math.PI?n+=2*Math.PI:n>=Math.PI&&(n-=2*Math.PI),n*=t*this.stiffness,this.a.pos.rotate(this.b.pos,n),this.c.pos.rotate(this.b.pos,-n),this.b.pos.rotate(this.a.pos,n),this.b.pos.rotate(this.c.pos,-n)},n.prototype.draw=function(t){t.beginPath(),t.moveTo(this.a.pos.x,this.a.pos.y),t.lineTo(this.b.pos.x,this.b.pos.y),t.lineTo(this.c.pos.x,this.c.pos.y);var e=t.lineWidth;t.lineWidth=5,t.strokeStyle="rgba(255,255,0,0.2)",t.stroke(),t.lineWidth=e},e.exports=n},{}],7:[function(t,e){function n(t,e){this.x=t||0,this.y=e||0;var n=this;Object.defineProperty(this,"asArray",{get:function(){return[n.x,n.y]}})}e.exports=n;var r;r=t("./to-value");for(var i in r)n.prototype[i]=r[i];r=t("./no-arg");for(var i in r)n.prototype[i]=r[i];r=t("./operations");for(var i in r)n.prototype[i]=r[i];n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.normal=function(){var t=Math.sqrt(this.x*this.x+this.y*this.y);return new n(this.x/t,this.y/t)},n.prototype.equals=function(t){return this.x==t.x&&this.y==t.y},n.prototype.epsilonEquals=function(t,e){return Math.abs(this.x-t.x)<=e&&Math.abs(this.y-t.y)<=e},n.prototype.isNaN=function(){return isNaN(this.x)?!0:isNaN(this.y)?!0:!1},n.prototype.toString=function(){return"("+this.x+", "+this.y+")"},n.prototype.toArray=function(){return[this.x,this.y]}},{"./no-arg":17,"./operations":18,"./to-value":16}],19:[function(t,e){var n=e.exports={};n.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")}},{}],20:[function(t,e,n){!function(t){function e(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(e===t[n])return n;return-1}t.EventEmitter||(t.EventEmitter=function(){});var r=n.EventEmitter=t.EventEmitter,i="function"==typeof Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=10;r.prototype.setMaxListeners=function(t){this._events||(this._events={}),this._events.maxListeners=t},r.prototype.emit=function(t){if("error"===t&&(!this._events||!this._events.error||i(this._events.error)&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var e=this._events[t];if(!e)return!1;if("function"==typeof e){switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:var n=Array.prototype.slice.call(arguments,1);e.apply(this,n)}return!0}if(i(e)){for(var n=Array.prototype.slice.call(arguments,1),r=e.slice(),o=0,s=r.length;s>o;o++)r[o].apply(this,n);return!0}return!1},r.prototype.addListener=function(t,e){if("function"!=typeof e)throw new Error("addListener only takes instances of Function");if(this._events||(this._events={}),this.emit("newListener",t,e),this._events[t])if(i(this._events[t])){if(!this._events[t].warned){var n;n=void 0!==this._events.maxListeners?this._events.maxListeners:o,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace())}this._events[t].push(e)}else this._events[t]=[this._events[t],e];else this._events[t]=e;return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){var n=this;return n.on(t,function r(){n.removeListener(t,r),e.apply(this,arguments)}),this},r.prototype.removeListener=function(t,n){if("function"!=typeof n)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[t])return this;var r=this._events[t];if(i(r)){var o=e(r,n);if(0>o)return this;r.splice(o,1),0==r.length&&delete this._events[t]}else this._events[t]===n&&delete this._events[t];return this},r.prototype.removeAllListeners=function(t){return 0===arguments.length?(this._events={},this):(t&&this._events&&this._events[t]&&(this._events[t]=null),this)},r.prototype.listeners=function(t){return this._events||(this._events={}),this._events[t]||(this._events[t]=[]),i(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]},r.listenerCount=function(t,e){var n;return n=t._events&&t._events[e]?"function"==typeof t._events[e]?1:t._events[e].length:0}}(t("__browserify_process"))},{__browserify_process:19}],16:[function(t,e){var n=e.exports;n.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},n.length2=function(){return this.x*this.x+this.y*this.y},n.slope=function(){return this.y/this.x},n.sum=function(){return this.y+this.x},n.dist=function(t){return Math.sqrt(this.dist2(t))},n.dist2=function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},n.dot=function(t){return this.x*t.x+this.y*t.y},n.cross=function(t){return this.x*t.y-this.y*t.x},n.angle=function(t,e){return e?this.angle2(t,e):t?this.angle1(t):Math.atan2(this.x,this.y)},n.angle1=function(t){return Math.atan2(this.x*t.y-this.y*t.x,this.x*t.x+this.y*t.y)},n.angle2=function(t,e){return t.clone().sub(this).angle(e.clone().sub(this))}},{}],17:[function(t,e){var n=e.exports;n.zero=function(){return this.x=0,this.y=0,this},n.posinf=function(){return this.x=Number.POSITIVE_INFINITY,this.y=Number.POSITIVE_INFINITY,this},n.neginf=function(){return this.x=Number.NEGATIVE_INFINITY,this.y=Number.NEGATIVE_INFINITY,this},n.normalize=function(){var t=this.length();return this.x/=t,this.y/=t,this},n.signum=function(){return this.x=this.x>0?1:this.x<0?-1:0,this.y=this.y>0?1:this.y<0?-1:0,this},n.swap=function(){var t=this.x;return this.x=this.y,this.y=t,this},n.abs=function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}},{}],18:[function(t,e){var n=e.exports;n.add=function(t){return this.x+=t.x,this.y+=t.y,this},n.sub=function(t){return this.x-=t.x,this.y-=t.y,this},n.mul=function(t){return"number"==typeof t?this.scale(t):(this.x*=t.x,this.y*=t.y,this)},n.div=function(t){return"number"==typeof t?this.scale(1/t):(this.x/=t.x,this.y/=t.y,this)},n.scale=function(t){return this.x*=t,this.y*=t,this},n.scaleI=function(t){return this.x/=t,this.y/=t,this},n.pow=function(t){return this.x=Math.pow(this.x,t),this.y=Math.pow(this.y,t),this},n.rotate=function(t,e){var n=this.x-t.x,r=this.y-t.y;return this.x=n*Math.cos(e)-r*Math.sin(e)+t.x,this.y=n*Math.sin(e)+r*Math.cos(e)+t.y,this},n.min=function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},n.mid=function(t){return this.x=(this.x+t.x)/2,this.y=(this.y+t.y)/2,this},n.max=function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},n.set=function(t,e){return"undefined"!=typeof e?(this.x=t,this.y=e):(this.x=t.x,this.y=t.y),this}},{}],8:[function(t,e){function n(t){i.call(this),this.pos=(new r).set(t),this.lastPos=(new r).set(t),this.vel=new r}var r=t("./Vec2"),i=t("events").EventEmitter;n.prototype=Object.create(i),n.prototype.constructor=n,n.prototype.draw=function(t){t.beginPath(),t.arc(this.pos.x,this.pos.y,2,0,2*Math.PI),t.fillStyle="#2dad8f",t.fill()},e.exports=n},{"./Vec2":7,events:20}],9:[function(t,e){function n(){i.call(this),this.particles=[],this.constraints=[],this.aabb=new r,this.drawParticles=null,this.drawConstraints=null}var r=t("./AABB"),i=t("events").EventEmitter;n.prototype=Object.create(i),n.prototype.constructor=n,n.prototype.addParticle=function(t){this.particles.puch(t),t.on("collision",this.emit.bind(this,"collision"))},n.prototype.pin=function(t,e){e=e||this.particles[t].pos;var n=new PinConstraint(this.particles[t],e);return this.constraints.push(n),n},e.exports=n},{"./AABB":21,events:20}],12:[function(t,e){function n(t,e){this.a=t,this.pos=(new r).set(e)}var r=t("../structures/Vec2");n.prototype.relax=function(){this.a.pos.set(this.pos)},n.prototype.draw=function(t){t.beginPath(),t.arc(this.pos.x,this.pos.y,6,0,2*Math.PI),t.fillStyle="rgba(0,153,255,0.1)",t.fill()},e.exports=n},{"../structures/Vec2":7}],14:[function(t,e){function n(t,e){if(Array.isArray(t)||(t=Array.prototype.slice.call(arguments,0),e=t.pop()),t.length<3)throw new Error("need at least three points in args or as an array to retain an area");if(this.points=o(t),this.area=this.points.getArea(),this.storedarea=0,this.storedmid=0,this.storedaabb=new s,!this.area||0===this.area)throw new Error("cannot calculate a nonexistant area");this.stiffness=e}var r=t("../structures/Vec2"),i=t("../structures/Triangle"),o=t("../structures/Polygon"),s=t("../structures/AABB");n.prototype.relax=function(t){var e=0,n=new r,o=this.points.length;if(this.points.forThree(function(t,r,i){e+=r.cross(i),n.add(r.clone().scale(1/o))}),0>=e)throw alert("negative area"),new Error("negative area");var s=Math.sqrt((this.area*this.stiffness*t+(1-this.stiffness*t)*e)/e);this.storedarea=0,this.storedmid=new r;var a=this;this.points.forThree(function(t,e,r,u){var f=!0,h=new i(t,e,r);if(h.isConcave()){h.hasPoint(a.storedmid)&&(problem=!0);var l=a.points.getIntersects(t,e,u);l.length>0&&(f=!1)}a.storedmid.add(e.sub(n).scale(s).add(n).clone().scale(1/o)),e!=a.points[0]&&(a.storedarea+=t.cross(e)),a.storedaabb.digestPoint(e)})},n.prototype.draw=function(t){var e=Math.floor(Math.min(255,255*this.area/this.storedarea)),n=Math.floor(Math.min(255,255*this.storedarea/this.area));t.beginPath(),t.moveTo(this.points[0].x,this.points[0].y);var r=this,o=!1,s=[];this.points.forThree(function(e,n,a,u){var f=new i(e,n,a);f.isConcave()&&f.hasPoint(r.storedmid)&&(o=!0);var h=r.points.getIntersects(e,n,u);h.length>0&&(s=s.concat(h)),t.lineTo(n.x,n.y)});var a=n>e?e:n;t.closePath(),t.fillStyle="rgba("+e+","+a+","+n+",0.6)",t.fill();for(var u=s.length;u--;)t.beginPath(),t.arc(s[u].x,s[u].y,8,0,2*Math.PI,!1),t.fillStyle="#FF8300",t.fill();var f=this.points.getDelaney();for(u=f.length;u;)t.beginPath(),--u,t.moveTo(this.points[f[u]].x,this.points[f[u]].y),--u,t.lineTo(this.points[f[u]].x,this.points[f[u]].y),--u,t.lineTo(this.points[f[u]].x,this.points[f[u]].y),t.closePath(),t.stroke();t.beginPath(),t.arc(this.storedmid.x,this.storedmid.y,2,0,2*Math.PI,!1),t.fillStyle=o?"#FF0000":"#00FF00",t.fill()},e.exports=n},{"../structures/AABB":21,"../structures/Polygon":23,"../structures/Triangle":22,"../structures/Vec2":7}],15:[function(t,e){function n(t,e){if(Array.isArray(t)||(t=Array.prototype.slice.call(arguments,0),e=t.pop()),t.length<3)throw new Error("need at least three points in args or as an array to retain an area");if(this.points=s(t),this.area=this.points.getArea(),this.storedarea=0,this.storedmid=0,this.storedaabb=new a,!this.area||0==this.area)throw new Error("cannot calculate a nonexistant area");this.stiffness=e}var r=t("../structures/Vec2"),i=t("../structures/Line"),o=t("../structures/Triangle"),s=t("../structures/Polygon"),a=t("../structures/AABB");n.prototype.relax=function(t){var e=0,n=new r,i=this.points.length;if(this.points.forThree(function(t,r,o){e+=r.cross(o),n.add(r.clone().scale(1/i))}),0>=e)throw alert("negative area"),new Error("negative area");var o=(this.area*this.stiffness*t+(1-this.stiffness*t)*e)/e;this.points[this.points.length-1],this.points[0].clone();var s=this.points[this.points.length-1],a=new r;for(this.points.forThree(function(t,e){var n=e.clone();e.sub(s).scale(o).add(t),a.add(e.clone().scale(1/i)),s=n});i--;)this.points[i].sub(a).add(n);this.storedarea=e*o,this.storedmid=n},n.prototype.draw=function(t){var e=Math.floor(Math.min(255,255*this.area/this.storedarea)),n=Math.floor(Math.min(255,255*this.storedarea/this.area)),r=this,s=!1,a=[],u=!1,f=[],h=this.points.length-1;for(t.beginPath(),t.moveTo(this.points[h].x,this.points[h].y);h--;)t.lineTo(this.points[h].x,this.points[h].y);var l=n>e?e:n;t.closePath(),t.fillStyle="rgba("+e+","+l+","+n+",0.6)",t.fill(),t.lineWidth=4,this.points.forThree(function(e,n,h,l){if(n.equals(h))return u=u||e,void 0;u&&(e=u,u=!1),f.push(n);var c=new o(e,n,h),p=c.getConcaveBisector(),y=!1;c.CA.pointIsLeftOrTop(p.B)==c.CA.pointIsLeftOrTop(c.B)?(t.strokeStyle="#FFFF00",c.hasPoint(r.storedmid)&&(s=!0)):(t.strokeStyle="#FF00FF",c.partialArea<0&&(y=!0));var d=r.points.intersectsLine(new i(e,n),l);d.length>0&&(a=a.concat(d)),t.beginPath(),t.moveTo((e.x+n.x)/2,(e.y+n.y)/2),t.lineTo(n.x,n.y),t.lineTo((h.x+n.x)/2,(h.y+n.y)/2),t.stroke()}),t.lineWidth=1;for(var c=a.length;c--;)t.beginPath(),t.arc(a[c].x,a[c].y,8,0,2*Math.PI,!1),t.fillStyle="#FF8300",t.fill();t.beginPath(),t.arc(this.storedmid.x,this.storedmid.y,2,0,2*Math.PI,!1),t.fillStyle=s?"#FF0000":"#00FF00",t.fill()},e.exports=n},{"../structures/AABB":21,"../structures/Line":24,"../structures/Polygon":23,"../structures/Triangle":22,"../structures/Vec2":7}],25:[function(t,e){e.exports.getImpacts=function(t,e,n){var r=t.vel.clone().sub(e.vel),i=e.vel.clone().sub(n.vel),o=t.pos.clone().sub(e.pos),s=e.pos.clone().sub(n.pos),a=r.cross(i),u=r.cross(s)+o.cross(i),f=o.cross(s);if(0===a)return 0===u?!1:[-f/u];var h=Math.pow(u,2)-4*a*f;if(0>h)return!1;if(0===h)return[-u/(2*a)];var l=(-u-Math.sqrt(h))/(2*a),c=(-u+Math.sqrt(h))/(2*a);return[l,c]},e.exports.restrict=function(t,e){for(var n=!1,r=t.length;r--;)t[r]>0||t[r]<-e||(n=Math.min(n,t[r]));return n}},{}],26:[function(t,e){function n(t,e){(t.elasticity+e.elasticity)/2;var n=t.vel.clone().mul(t.mass).add(e.vel.clone().mul(e.mass));return n.div(t.mass+e.mass),n}function r(t,e,r,a){e.pos.add(e.vel.clone().scale(a)),r.pos.add(r.vel.clone().scale(a)),t.pos.add(t.vel.clone().scale(a)),t.mass=s.getParticleMass(t),t.elasticity=s.getParticleElasticity(t),o.getVelocityAtPoint(e,r,t);var u={pos:t.pos.clone(),vel:o.getVelocityAtPoint(e,r,t),mass:s.getMassAtPoint(e,r,t),elasticity:s.getElasticityAtPoint(e,r,t)},f=i(e,r,t,a),h=n(t,u,f);t.vel.set(h);var l=u.vel.clone();u.vel.set(h),h.sub(l),o.applyTransformAtPoint(e,r,u,h),e.pos.sub(e.vel.clone().scale(a)),r.pos.sub(r.vel.clone().scale(a)),t.pos.sub(t.vel.clone().scale(a))}function i(t,e,n){var r=t.pos.clone().sub(e.pos).swap(),i=n.pos.clone().sub(e.pos).sub(n.vel.clone());return r.mul(-1,1).dist(i)>r.mul(-1,-1).dist(i)?r.normalize():r.mul(-1,-1).normalize()}var o=t("./velocities.js"),s=t("./material.js");e.exports.distributeVelocities=r},{"./material.js":28,"./velocities.js":27}],23:[function(t,e){function n(t){for(var e=t.length,r=e,i=Array(r);r--;)i[e-r-1]=t[r].pos||t[r];for(r in n.prototype)Object.defineProperty(i,r,{enumerable:!1,value:n.prototype[r].bind(i)});return i}n.prototype.clone=function(){var t=this.slice(0);for(var e in n.prototype)Object.defineProperty(t,e,{enumerable:!1,value:n.prototype[e].bind(t)});return t},n.prototype.forThree=function(t,e){for(var n=this.length,r=n-(e||0);r--;){var i=(r+1)%n,o=r,s=(r+n-1)%n;t.call(this,this[i],this[o],this[s],o)}};var r=t("./cacheable");for(var i in r)n.prototype[i]=r[i];var o=t("./intersects");for(var i in o)n.prototype[i]=o[i];e.exports=n},{"./cacheable":29,"./intersects":30}],27:[function(t,e){function n(t,e,n){var r=t.pos.clone().mid(e.pos),i=t.pos.clone().sub(e.pos),o=t.pos.dist(e.pos),s=t.pos.clone().add(t.vel.clone().scale(n)),a=e.pos.clone().add(e.vel.clone().scale(n)),u=s.clone().mid(a),f=s.clone().sub(a),h=s.dist(a),l=u.clone().sub(r);t.vel.clone().sub(l),e.vel.clone().sub(l);var c=0,p=0;return Math.abs(i.angle()-f.angle())>1e-4&&(p=Math.acos(1-Math.pow(s.dist(t),2)/(Math.pow(h,2)/2))),0===p?Math.abs(h-o)>1e-6&&(c=t.pos.clone().sub(r).div(o).abs().mul(h-o)):console.log("we have an angle?"),{cache:{before:{a:t,b:e,m:r,ang:i,d:o},after:{a:s,b:a,m:u,ang:f,d:h}},linearvel:l,expandvel:c,rotatevel:p}}function r(t,e){var n=e.cache.before.m,r=t.dist(n),i=e.cache.before.d,o=e.linearvel.clone();return 0===e.rotatevel?0===e.expandvel?o:o.add(2*e.expandvel.mul(t.clone().sub(n).signum())*r/i):void 0}function i(t,e,n){var r=t.pos.dist(n.pos),i=e.pos.dist(n.pos);return t.vel.clone().mul(i).div(r+i).add(e.vel.clone().mul(r).div(r+i))}function o(t,e,n){var r=t.pos.dist(n.pos),i=r/t.pos.dist(e.pos),o=i>.5?1-i:1;t.vel.mul(1-o).add(n.vel.clone().mul(o));var s=.5>i?i:1;e.vel.mul(1-s).add(n.vel.clone().mul(s))}e.exports.getVelocityAtPoint=i,e.exports.getVelocitiesFromPoint=o,e.exports.getNetVelocityAtPoint=r,e.exports.getVelocities=n,e.exports.applyTransformAtPoint=function(t,e,n,r){var i=t.pos.dist(n.pos),o=e.pos.dist(n.pos),s=i>o?1-i/(i+o):1,a=o>i?i/(i+o):1;r.mul(s+a),t.vel.add(r.clone().mul(o).div(i+o)),e.vel.add(r.clone().mul(i).div(i+o))}},{}],28:[function(t,e){function n(){return 1}function r(){return 0}e.exports.getParticleMass=n,e.exports.getParticleElasticity=r,e.exports.getElasticityAtPoint=function(t,e,n){var i=t.pos.dist(n.pos),o=e.pos.dist(n.pos);return r(t)*o/(i+o)+r(e)*i/(i+o)},e.exports.getMassAtPoint=function(t,e,r){var i=t.pos.dist(e.pos),o=r.pos.dist(t.pos)/i,s=0;return s+=n(t)*(o>.5)?1-o:1,s+=n(e)*(.5>o?o:1)}},{}],10:[function(t,e){function n(t,e){for(var n=t.length,s=new Array(n);n--;)s[n]=t[n].aabb.toArray();var a=l(s);if(n=a.length){for(var u=[];n--;){var f=r(t[a[n][0]],t[a[n][1]]);f&&(i(f.A.inside,f.B.lines,e,u),i(f.B.inside,f.A.lines,e,u))}o(u,e)}}function r(t,e){var n=t.aabb.sub(e.aabb),r=n.getSuspects(t.particles),i=n.getSuspects(e.particles);return 0===r.lines.length||0===i.lines.length?!1:0===r.inside.length&&0===i.inside.length?!1:{A:r,B:i}}function i(t,e,n,r){var i,o;i=t.length;for(var s,h,l,c,p;i--;){for(h=t[i],o=e.length,s={time:Number.POSITIVE_INFINITY,point:h};o--;){var d=e[o];l=d[0],c=d[1],p=u(h,l,c,n),p!==!1&&0!==p&&(p>s.time||a(h,l,c,p)&&(s.time=p,s.line=d))}s.time!==Number.POSITIVE_INFINITY&&y.insert(r,s,f)}}function o(t,e){for(var n;t.length;){var r=t.pop();if(r.line.modified){var i=r.point,o=r.line[0],s=r.line[1];if(n=u(i,o,s,e),n===!1)continue;if(0===n)continue;if(!a(i,o,s,n))continue;if(n!==r.time&&t.length&&t[0].time<r.time){y.insert(t,r,f);continue}}p.distributeVelocities(r.point,r.line[0],r.line[1],r.time),r.line.modified=!0}}function s(t,e,n){var r=e[0],i=e[1],o=u(t,r,i,n);return o===!1?!1:(o/=n,a(t,r,i,o)?(p.distributeVelocities(t,r,i,o),void 0):!1)}function a(t,e,n,r){return e=e.pos.clone().add(e.vel.clone().scale(r)),n=n.pos.clone().add(n.vel.clone().scale(r)),t=t.pos.clone().add(t.vel.clone().scale(r)),new h(e,n).containsPoint(t)}function u(t,e,n,r){var i=c.getImpacts(t,e,n);return i?(i=c.restrict(i,r),i?i:!1):!1}function f(t,e){return e.time-t.time}var h=t("../structures/AABB");t("../structures/Line");var l=t("box-intersect"),c=t("./time"),p=t("./momentum"),y=t("formula1-array-util");e.exports=n,e.exports.getSuspectPoints=r,e.exports.insertCollisions=i,e.exports.checkForImpact=s,e.exports.getTimeOfImpact=u,e.exports.pointWithinSegment=a},{"../structures/AABB":21,"../structures/Line":24,"./momentum":26,"./time":25,"box-intersect":31,"formula1-array-util":32}],21:[function(t,e){function n(t){if(this.max=(new r).neginf(),this.min=(new r).posinf(),t){var e;if(arguments.length>1)for(e=arguments.length;e--;)this.digestPoint(arguments[e]);else for(e=t.length;e--;)this.digestPoint(t[e])}}var r=t("../Vec2"),i=t("../Line");n.prototype.toArray=function(){return this.min.toArray().concat(this.max.toArray())},n.prototype.clear=function(){this.max.neginf(),this.min.posinf()},n.prototype.digestPoint=function(t){this.max.max(t),this.min.min(t)},n.prototype.intersectsAABB=function(t){return this.min.x>=t.max.x?!1:this.min.y>=t.max.y?!1:t.min.x>=this.max.x?!1:t.min.y>=this.max.y?!1:!0},n.prototype.sub=function(t){return this.min.max(t.min),this.max.min(t.max),this},n.prototype.containsPoint=function(t){return t.x>this.max.x?!1:t.y>this.max.y?!1:t.x<this.min.x?!1:t.y<this.min.y?!1:!0},n.prototype.intersectsLine=function(t){var e=new i(this.max,new r(this.min.x,this.max.y)),n=e.intersectsLineSegment(t);return n&&this.containsPoint(n)?!0:(e=new i(this.max,new r(this.max.x,this.min.y)),n=e.intersectsLineSegment(t),n&&this.containsPoint(n)?!0:(e=new i(this.min,new r(this.max.x,this.min.y)),n=e.intersectsLineSegment(t),n&&this.containsPoint(n)?!0:(e=new i(this.min,new r(this.min.x,this.max.y)),n=e.intersectsLineSegment(t),n&&this.containsPoint(n)?!0:!1)))},n.prototype.intersectsCircle=function(t){return t.containsPoint(this.max)?!0:t.containsPoint(this.min)?!0:t.containsPoint(new r(this.min.x,this.max.y))?!0:t.containsPoint(new r(this.max.x,this.min.y))?!0:!1},n.prototype.getSuspects=t("./suspects.js"),e.exports=n},{"../Line":24,"../Vec2":7,"./suspects.js":33}],22:[function(t,e){function n(t,e,n){if(t.equals(e)||e.equals(n)||n.equals(t))throw new Error("cannot create triangle when two points are the same");this.A=t,this.B=e,this.C=n,this.AB=new r(t,e),this.BC=new r(e,n),this.CA=new r(n,t),this.ABC=Math.lawCos(this.CA.length,this.AB.length,this.BC.length),this.BCA=Math.asin(Math.sin(this.ABC)*this.CA.length/this.AB.length),this.CAB=Math.asin(Math.sin(this.ABC)*this.BC.length/this.AB.length),this.perimiter=this.AB.length+this.BC.length+this.CA.length,this.partialArea=this.AB.cross+this.BC.cross+this.CA.cross,this.area=Math.abs(this.partialArea)}t("../Vec2");var r=t("../Line"),i=t("./intersects.js");for(var o in i)n.prototype[o]=i[o];var s=t("./questions.js");for(var o in s)n.prototype[o]=s[o];var a=t("./cacheable.js");n.prototype.getConcaveBisector=a.getConcaveBisector,e.exports=n},{"../Line":24,"../Vec2":7,"./cacheable.js":36,"./intersects.js":34,"./questions.js":35}],34:[function(t,e){var n={};n.hasPoint=function(t){var e=this.C.clone().sub(this.B),n=this.A.clone().sub(this.B),r=t.clone().sub(this.B),i=e.dot(e),o=e.dot(n),s=e.dot(r),a=n.dot(n),u=n.dot(r),f=1/(i*a-o*o),h=(a*s-o*u)*f,l=(i*u-o*s)*f;return h>=0&&l>=0&&1>h+l},e.exports=n},{}],35:[function(t,e){var n={},r=Math.pow(2,.5);n.isConcave=function(t,e,n){var r=new Line(t,n);return r.pointIsLeftOrTop(r.perpendicularBisector().A)==r.pointIsLeftOrTop(e)},n.anglePrimer=function(){return this.CA.length-r*(this.AB.length+this.BC.length)/2},n.isAcute=function(){return this.anglePrimer()<0},n.isObtuse=function(){return this.anglePrimer()>0},n.isRight=function(){return 0==this.anglePrimer()},n.equals=function(t){return this.A.equals(t.A)&&this.B.equals(t.B)&&this.C.equals(t.C)},n.epsilonEquals=function(t,e){return this.A.epsilonEquals(t.A,e)&&this.B.epsilonEquals(t.B,e)&&this.C.epsilonEquals(t.C,e)},n.equalShape=function(t){return this.area==t.area&&this.perimiter==t.perimiter},n.epsilonEqualShape=function(t,e){return Math.abs(this.area-t.area)/27<=e&&Math.abs(this.perimiter-t.perimiter)/9<=e},n.equalAngles=function(t){for(var e,n=["ABC","BCA","CAB"],r=3;r--;){for(e=3;e--&&this[n[r]]!=t[n[r]];);if(0>e)return!1}return!0},e.exports=n},{}],36:[function(t,e){var n={};n.getConcaveBisector=function(){return this.CA.perpendicularBisector()},n.AB=function(){return new Line(this.A,this.B)},n.BC=function(){return new Line(B,C)},n.CA=function(){return new Line(C,A)},n.ABC=function(){return Math.lawCos(this.CA.length,this.AB.length,this.BC.length)},n.BCA=function(){return Math.asin(Math.sin(this.ABC)*this.CA.length/this.AB.length)},n.CAB=function(){return Math.asin(Math.sin(this.ABC)*this.BC.length/this.AB.length)},n.perimiter=function(){return this.AB.length+this.BC.length+this.CA.length},n.partialArea=function(){return this.AB.cross+this.BC.cross+this.CA.cross},n.area=function(){return Math.abs(this.partialArea)},e.exports=n},{}],24:[function(t,e){function n(t,e){if(t.equals(e))throw new Error("cannot construct line when A == B");this.A=t,this.B=e,this.angledSlope=t.clone().sub(e).normalize(),this.slope=this.angledSlope.scale(Math.sign(this.angledSlope.x)||Math.sign(this.angledSlope.y)),this.inv_slope=0===this.slope.y?!1:this.slope.x/this.slope.y,this.true_slope=0===this.slope.x?!1:this.slope.y/this.slope.x,this.yint=this.true_slope!==!1?-this.true_slope*t.x+t.y:!1,this.xint=this.inv_slope!==!1?-this.inv_slope*t.y+t.x:!1,this.mid=t.clone().mid(e),this.length2=t.dist2(e),this.length=Math.sqrt(this.length2),this.cross=t.cross(e)}t("../Vec2"),n.prototype.toString=function(){return"limits:["+A+","+B+"],"+"intercepts:("+this.yint+","+thisxint+")"+"slope:("+this.slope+"), "};var r=t("./intersects.js");for(var i in r)n.prototype[i]=r[i];var o=t("./questions.js");for(var i in o)n.prototype[i]=o[i];n.prototype.perpendicularBisector=function(){var t=this.mid,e=this.A.clone().sub(t).swap(),r=e.clone();return e.y*=-1,r.x*=-1,e.add(t),r.add(t),new n(e,r)},n.prototype.getYValue=function(t){return this.slope.x?t*this.true_slope+this.yint:!1},n.prototype.getXValue=function(t){return this.slope.y?t*this.inv_slope+this.xint:!1},e.exports=n},{"../Vec2":7,"./intersects.js":37,"./questions.js":38}],38:[function(t,e){var n={};n.equals=function(t){return this.A.equals(t.A)&&this.B.equals(t.B)},n.epsilonEquals=function(t,e){return this.A.epsilonEquals(t.A,e)&&this.B.epsilonEquals(t.B,e)
},n.equalSlope=function(t){return this.slope.equals(t.slope)&&this.xint?this.xint==t.xint:this.yint==t.yint},n.epsilonEqualSlope=function(t,e){return this.slope.epsilonEquals(t.slope,e)&&this.xint?Math.abs(this.xint-t.xint)<=e:Math.abs(this.yint-t.yint)<=e},n.equalMagnitude=function(t){return this.slope.equals(t.slope)&&this.length==t.length},n.epsilonEqualMagnitude=function(t,e){return this.slope.epsilonEquals(t.slope,e)&&Math.abs(this.length-t.length)<=e},e.exports=n},{}],32:[function(t,e){var n={};n.upsert=function(t,e,r,i){var o=n.findAny(t,e,r);if("undefined"==typeof o)throw new Error("und");if("undefined"==typeof o)throw new Error("und");return n.isFound(o)?(i(t[o],e),o):n.insertAtIndex(t,o,e)},n.insert=function(t,e,r){var i=n.findAny(t,e,r);return n.insertAtIndex(t,i,e)},n.findAny=function(t,e,r,i,o){if(0===t.length)return Number.POSITIVE_INFINITY;if(1===t.length)return n.easySingle(t[0],e,r);var s;if("undefined"==typeof i||0===i){if(s=n.easyMin(t,e,r),s!==!1)return s;i=1}if("undefined"==typeof o||o===t.length-1){if(s=n.easyMax(t,e,r),s!==!1)return s;o=t.length-2}for(var a,u;o>=i;)if(a=0|(i+o)/2,u=t[a],s=r(u,e),0>s)i=a+1;else{if(!(s>0))return a;o=a-1}return-i},n.findRange=function(t,e,r,i,o){if(0===t.length)return Number.POSITIVE_INFINITY;if(1===t.length)return n.easySingle(t[0],e,r);var s;if("undefined"==typeof i||0===i){if(s=n.easyMin(t,e,r),s===Number.NEGATIVE_INFINITY)return s;if(s!==!1)return[s,n.findLast(t,e,r)];i=1}if("undefined"==typeof o||o===t.length-1){if(s=n.easyMax(t,e,r),s===Number.POSITIVE_INFINITY)return s;if(s!==!1)return[n.findFirst(t,e,r),s];o=t.length-2}for(var a,u,f=[],h=i,l=o;o>=i;)if(a=0|(i+o)/2,u=t[a],s=r(u,e),0>s)i=a+1;else if(s>0)l=a,o=a-1;else{if(0!==r(t[a-1],e)){f[0]=a,f[0]>h&&(h=f[0]);break}0!==r(t[a+1],e)?f[1]=a:h=a,o=a}return"undefined"==typeof f[0]?-i:"undefined"!=typeof f[1]?f:(f[1]=n.findLast(t,e,r,h,l),f)},n.findFirst=function(t,e,r,i,o){if(0===t.length)return Number.POSITIVE_INFINITY;if(1===t.length)return n.easySingle(t[0],e,r);n.easyOut(t,e,r);var s;if("undefined"==typeof i||0===i){if(s=n.easyMin(t,e,r),s!==!1)return s;i=1}if("undefined"==typeof o||o===t.length-1){if(s=n.easyMax(t,e,r),s===Number.POSITIVE_INFINITY)return s;if(s!==!1&&r(t[s-1],e)<0)return s;o=t.length-2}var a,u;if(0===i){var f=r(t[0],e);if(0===f)return 0;if(0>f)return Number.NEGATIVE_INFINITY;i++}for(;o>=i;)if(a=0|(i+o)/2,u=t[a],s=r(u,e),0>s)i=a+1;else if(s>0)o=a-1;else{if(r(t[a-1],e)<0)return a;o=a-1}return-i},n.findLast=function(t,e,r,i,o){if(0===t.length)return Number.POSITIVE_INFINITY;if(1===t.length)return n.easySingle(t[0],e,r);var s;if("undefined"==typeof o||o===t.length-1){if(s=n.easyMax(t,e,r),s!==!1)return s;o=t.length-2}if("undefined"==typeof i||0===i){if(s=n.easyMin(t,e,r),s===Number.NEGATIVE_INFINITY)return s;if(s!==!1&&r(t[s+1],e)<0)return s;i=1}for(var a,u;o>=i;)if(a=0|(i+o)/2,u=t[a],s=r(u,e),0>s)i=a+1;else if(s>0)o=a-1;else{if(0!==r(t[a+1],e))return a;i=a+1}return-i},n.easyMin=function(t,e,n){var r=0,i=n(t[r],e);return i>0?Number.NEGATIVE_INFINITY:0===i?r:!1},n.easyMax=function(t,e,n){var r=t.length-1,i=n(t[r],e);return 0>i?Number.POSITIVE_INFINITY:0===i?r:!1},n.easySingle=function(t,e,n){var r=n(t,e);return r>0?Number.NEGATIVE_INFINITY:0>r?Number.POSITIVE_INFINITY:0},n.isFound=function(t){return 0>t?!1:t===Number.POSITIVE_INFINITY?!1:!0},n.insertAtIndex=function(t,e,n){return e===Number.POSITIVE_INFINITY?(t.push(n),t.length-1):e===Number.NEGATIVE_INFINITY?(t.unshift(n),0):(e*=-1,t.splice(e,0,n),e)},"undefined"!=typeof e&&e.exports&&(e.exports=n)},{}],33:[function(t,e){var n=t("../Line");e.exports=function(t){for(var e,r,i,o=[],s=[],a=[],u=t.length,f=u,h=!1,l=!1;u--;){var c=t[u];if(h=c.pos.x<=this.max.x&&c.pos.x>=this.min.x,l=c.pos.y<=this.max.y&&c.pos.y>=this.min.y,h||l)for(h&&l&&s.push(c),r=[[(u+f-1)%f,u],[u,(u+1)%f]],i=2;i--;)if(-1===a.indexOf(r[i].join("|"))){a.push(r[i].join("|"));var p=t[r[i][0]].pos,y=t[r[i][1]].pos;this.containsPoint(p)||this.containsPoint(y)?o.push([t[r[i][0]],t[r[i][1]]]):(e=new this.constructor(p,y),this.intersectsAABB(e)&&(e=new n(p,y),this.intersectsLine(e)&&o.push([t[r[i][0]],t[r[i][1]]])))}}return{inside:s,lines:o}}},{"../Line":24}],37:[function(t,e){var n=t("../Vec2"),r={};r.intersectsLine=function(t){var e=this;if(e.slope.equals(t.slope))return!1;var r=new n;if(0===e.slope.x||0===t.slope.x){if(0===e.slope.y||0===t.slope.y)return new n(0===e.slope.x?e.xint:t.xint,0===e.slope.y?e.yint:t.yint);r.y=(e.xint-t.xint)/(t.inv_slope-e.inv_slope),r.x=e.inv_slope*r.y+e.xint}else r.x=(e.yint-t.yint)/(t.true_slope-e.true_slope),r.y=e.true_slope*r.x+e.yint;return r},r.intersectsLineSegment=function(t){var e=this.intersectsLine(t);return e?(new n).posinf().min(this.A).min(this.B).max(e).equals(e)?(new n).neginf().max(this.A).max(this.B).min(e).equals(e)?(new n).posinf().min(t.A).min(t.B).max(e).equals(e)?(new n).neginf().max(t.A).max(t.B).min(e).equals(e)?e:!1:!1:!1:!1:!1},r.pointIsLeftOrTop=function(t){return this.B.clone().sub(this.A).cross(t.clone().sub(this.A))<0},r.intersectsPoint=function(t){return this.slope.x?t.y==t.x*this.slope.slope()+this.yint:this.xint==t.x},e.exports=r},{"../Vec2":7}],29:[function(t,e){var n=t("../Vec2"),r={};r.getMidPoint=function(){for(var t=this.length,e=new n,r=this.length;r--;)e.add(this[r].clone().scale(1/t));return e},r.getArea=function(){var t=0;return this.forThree(function(e,n,r){t+=n.cross(r)}),t},r.getAABB=function(){for(var t=new n(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),e=new n(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),r=this.length;r--;)t.max(this[r]),e.min(this[r]);return{max:t,min:e}},e.exports=r},{"../Vec2":7}],30:[function(t,e){var n=t("../AABB"),r=t("../Line"),i={};i.intersectsLine=function(t,e){var i=new n(t.A,t.B),o=[];return this.forThree(function(e,s){if(t.A!=s&&t.B!=e&&e!=t.A){var a=new n(e,s);if(i.intersectsAABB(a)){var u=t.intersectsLine(new r(e,s));u&&({max:a.max.min(i.max),min:a.min.max(i.min)},i.containsPoint(u)&&o.push(u))}}},e),o},e.exports=i},{"../AABB":21,"../Line":24}],31:[function(t,e){"use strict";function n(t,e){for(var n=0;t>n;++n)if(!(e[n]<=e[n+t]))return!0;return!1}function r(t,e,r,i){for(var o=0,s=0,a=0,u=t.length;u>a;++a){var f=t[a];if(!n(e,f)){for(var h=0;2*e>h;++h)r[o++]=f[h];i[s++]=a}}return s}function i(t,e,n,i){var o=t.length,f=e.length;if(!(0>=o||0>=f)){var h=t[0].length>>>1;if(!(0>=h)){var l,c=s.mallocDouble(2*h*o),p=s.mallocInt32(o);if(o=r(t,h,c,p),o>0){if(1===h&&i)a.init(o),l=a.sweepComplete(h,n,0,o,c,p,0,o,c,p);else{var y=s.mallocDouble(2*h*f),d=s.mallocInt32(f);f=r(e,h,y,d),f>0&&(a.init(o+f),l=1===h?a.sweepBipartite(h,n,0,o,c,p,0,f,y,d):u(h,n,i,o,c,p,f,y,d),s.free(y),s.free(d))}s.free(c),s.free(p)}return l}}}function o(t,e,n){var r;switch(arguments.length){case 1:return r=[],i(t,t,function(t,e){r.push([t,e])},!0),r;case 2:if("function"==typeof e){var o=e;return i(t,t,o,!0)}return r=[],i(t,e,function(t,e){r.push([t,e])},!1),r;case 3:return i(t,e,n,!1);default:throw new Error("box-intersect: Invalid arguments")}}e.exports=o;var s=t("typedarray-pool"),a=t("./lib/sweep"),u=t("./lib/intersect")},{"./lib/intersect":40,"./lib/sweep":39,"typedarray-pool":41}],42:[function(t,e){"use strict";function n(t,e){4*l>=e?r(0,e-1,t):h(0,e-1,t)}function r(t,e,n){for(var r=2*(t+1),i=t+1;e>=i;++i){for(var o=n[r++],s=n[r++],a=i,u=r-2;a-->t;){var f=n[u-2],h=n[u-1];if(o>f)break;if(f===o&&s>h)break;n[u]=f,n[u+1]=h,u-=2}n[u]=o,n[u+1]=s}}function i(t,e,n){t*=2,e*=2;var r=n[t],i=n[t+1];n[t]=n[e],n[t+1]=n[e+1],n[e]=r,n[e+1]=i}function o(t,e,n){t*=2,e*=2,n[t]=n[e],n[t+1]=n[e+1]}function s(t,e,n,r){t*=2,e*=2,n*=2;var i=r[t],o=r[t+1];r[t]=r[e],r[t+1]=r[e+1],r[e]=r[n],r[e+1]=r[n+1],r[n]=i,r[n+1]=o}function a(t,e,n,r,i){t*=2,e*=2,i[t]=i[e],i[e]=n,i[t+1]=i[e+1],i[e+1]=r}function u(t,e,n){t*=2,e*=2;var r=n[t],i=n[e];return i>r?!1:r===i?n[t+1]>n[e+1]:!0}function f(t,e,n,r){t*=2;var i=r[t];return e>i?!0:i===e?r[t+1]<n:!1}function h(t,e,n){var c=0|(e-t+1)/6,p=t+c,y=e-c,d=t+e>>1,v=d-c,g=d+c,w=p,m=v,b=d,x=g,E=y,I=t+1,A=e-1,_=0;u(w,m,n)&&(_=w,w=m,m=_),u(x,E,n)&&(_=x,x=E,E=_),u(w,b,n)&&(_=w,w=b,b=_),u(m,b,n)&&(_=m,m=b,b=_),u(w,x,n)&&(_=w,w=x,x=_),u(b,x,n)&&(_=b,b=x,x=_),u(m,E,n)&&(_=m,m=E,E=_),u(m,b,n)&&(_=m,m=b,b=_),u(x,E,n)&&(_=x,x=E,E=_);for(var B=n[2*m],k=n[2*m+1],S=n[2*x],L=n[2*x+1],T=2*w,C=2*b,M=2*E,N=2*p,P=2*d,F=2*y,U=0;2>U;++U){var j=n[T+U],O=n[C+U],q=n[M+U];n[N+U]=j,n[P+U]=O,n[F+U]=q}o(v,t,n),o(g,e,n);for(var V=I;A>=V;++V)if(f(V,B,k,n))V!==I&&i(V,I,n),++I;else if(!f(V,S,L,n))for(;;){if(f(A,S,L,n)){f(A,B,k,n)?(s(V,I,A,n),++I,--A):(i(V,A,n),--A);break}if(--A<V)break}a(t,I-1,B,k,n),a(e,A+1,S,L,n),l>=I-2-t?r(t,I-2,n):h(t,I-2,n),l>=e-(A+2)?r(A+2,e,n):h(A+2,e,n),l>=A-I?r(I,A,n):h(I,A,n)}e.exports=n;var l=32},{}],43:[function(t,e,n){"use strict";function r(t,e,n){var r="bruteForce"+(t?"Red":"Blue")+(e?"Flip":"")+(n?"Full":""),i=["function ",r,"(",E.join(),"){","var ",f,"=2*",o,";"],u="for(var i="+h+","+y+"="+f+"*"+h+";"+"i<"+l+";"+"++i,"+y+"+="+f+"){"+"var x0="+c+"["+s+"+"+y+"],"+"x1="+c+"["+s+"+"+y+"+"+o+"],"+"xi="+p+"[i];",I="for(var j="+d+","+m+"="+f+"*"+d+";"+"j<"+v+";"+"++j,"+m+"+="+f+"){"+"var y0="+g+"["+s+"+"+m+"],"+(n?"y1="+g+"["+s+"+"+m+"+"+o+"],":"")+"yi="+w+"[j];";return t?i.push(u,x,":",I):i.push(I,x,":",u),n?i.push("if(y1<x0||x1<y0)continue;"):e?i.push("if(y0<=x0||x1<y0)continue;"):i.push("if(y0<x0||x1<y0)continue;"),i.push("for(var k="+s+"+1;k<"+o+";++k){"+"var r0="+c+"[k+"+y+"],"+"r1="+c+"[k+"+o+"+"+y+"],"+"b0="+g+"[k+"+m+"],"+"b1="+g+"[k+"+o+"+"+m+"];"+"if(r1<b0||b1<r0)continue "+x+";}"+"var "+b+"="+a+"("),e?i.push("yi,xi"):i.push("xi,yi"),i.push(");if("+b+"!==void 0)return "+b+";}}}"),{name:r,code:i.join("")}}function i(t){function e(e,n){var o=r(e,n,t);i.push(o.code),s.push("return "+o.name+"("+E.join()+");")}var n="bruteForce"+(t?"Full":"Partial"),i=[],o=E.slice();t||o.splice(3,0,u);var s=["function "+n+"("+o.join()+"){"];s.push("if("+l+"-"+h+">"+v+"-"+d+"){"),t?(e(!0,!1),s.push("}else{"),e(!1,!1)):(s.push("if("+u+"){"),e(!0,!0),s.push("}else{"),e(!0,!1),s.push("}}else{if("+u+"){"),e(!1,!0),s.push("}else{"),e(!1,!1),s.push("}")),s.push("}}return "+n);var a=i.join("")+s.join(""),f=new Function(a);return f()}var o="d",s="ax",a="vv",u="fp",f="es",h="rs",l="re",c="rb",p="ri",y="rp",d="bs",v="be",g="bb",w="bi",m="bp",b="rv",x="Q",E=[o,s,a,h,l,c,p,d,v,g,w];n.partial=i(!1),n.full=i(!0)},{}],44:[function(t,e){"use strict";function n(t,e){var n="abcdef".split("").concat(e),i=[];return t.indexOf("lo")>=0&&i.push("lo=e[k+n]"),t.indexOf("hi")>=0&&i.push("hi=e[k+o]"),n.push(r.replace("_",i.join()).replace("$",t)),Function.apply(void 0,n)}e.exports=n;var r="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m"},{}],39:[function(t,e){!function(){"use strict";function n(t){var e=h.nextPow2(t);y.length<e&&(f.free(y),y=f.mallocInt32(e)),d.length<e&&(f.free(d),d=f.mallocInt32(e)),v.length<e&&(f.free(v),v=f.mallocInt32(e)),g.length<e&&(f.free(g),g=f.mallocInt32(e)),w.length<e&&(f.free(w),w=f.mallocInt32(e)),m.length<e&&(f.free(m),m=f.mallocInt32(e));var n=8*e;b.length<n&&(f.free(b),b=f.mallocDouble(n))}function r(t,e,n,r){var i=e[r],o=t[n-1];t[i]=o,e[o]=i}function i(t,e,n,r){t[n]=r,e[r]=n}function o(t,e,n,o,s,a,u,f,h,p){for(var w=0,m=2*t,x=t-1,E=m-1,I=n;o>I;++I){var A=a[I],_=m*I;b[w++]=s[_+x],b[w++]=-(A+1),b[w++]=s[_+E],b[w++]=A}for(var I=u;f>I;++I){var A=p[I]+c,B=m*I;b[w++]=h[B+x],b[w++]=-A,b[w++]=h[B+E],b[w++]=A}var k=w>>>1;l(b,k);for(var S=0,L=0,I=0;k>I;++I){var T=0|b[2*I+1];if(T>=c)T=0|T-c,r(v,g,L--,T);else if(T>=0)r(y,d,S--,T);else if(-c>=T){T=0|-T-c;for(var C=0;S>C;++C){var M=e(y[C],T);if(void 0!==M)return M}i(v,g,L++,T)}else{T=0|-T-1;for(var C=0;L>C;++C){var M=e(T,v[C]);if(void 0!==M)return M}i(y,d,S++,T)}}}function s(t,e,n,o,s,a,u,f,h,c){for(var p=0,x=2*t,E=t-1,I=x-1,A=n;o>A;++A){var _=a[A]+1<<1,B=x*A;b[p++]=s[B+E],b[p++]=-_,b[p++]=s[B+I],b[p++]=_}for(var A=u;f>A;++A){var _=c[A]+1<<1,k=x*A;b[p++]=h[k+E],b[p++]=1|-_,b[p++]=h[k+I],b[p++]=1|_}var S=p>>>1;l(b,S);for(var L=0,T=0,C=0,A=0;S>A;++A){var M=0|b[2*A+1],N=1&M;if(S-1>A&&M>>1===b[2*A+3]>>1&&(N=2,A+=1),0>M){for(var P=-(M>>1)-1,F=0;C>F;++F){var U=e(w[F],P);if(void 0!==U)return U}if(0!==N)for(var F=0;L>F;++F){var U=e(y[F],P);if(void 0!==U)return U}if(1!==N)for(var F=0;T>F;++F){var U=e(v[F],P);if(void 0!==U)return U}0===N?i(y,d,L++,P):1===N?i(v,g,T++,P):2===N&&i(w,m,C++,P)}else{var P=(M>>1)-1;0===N?r(y,d,L--,P):1===N?r(v,g,T--,P):2===N&&r(w,m,C--,P)}}}function a(t,e,n,o,s,a,u,f,h,p,v,g){var w=0,m=2*t,x=e,E=e+t,I=1,A=1;o?A=c:I=c;for(var _=s;a>_;++_){var B=_+I,k=m*_;b[w++]=u[k+x],b[w++]=-B,b[w++]=u[k+E],b[w++]=B}for(var _=h;p>_;++_){var B=_+A,S=m*_;b[w++]=v[S+x],b[w++]=-B}var L=w>>>1;l(b,L);for(var T=0,_=0;L>_;++_){var C=0|b[2*_+1];if(0>C){var B=-C,M=!1;if(B>=c?(M=!o,B-=c):(M=!!o,B-=1),M)i(y,d,T++,B);else{var N=g[B],P=m*B,F=v[P+e+1],U=v[P+e+1+t];t:for(var j=0;T>j;++j){var O=y[j],q=m*O;if(!(U<u[q+e+1]||u[q+e+1+t]<F)){for(var V=e+2;t>V;++V)if(v[P+V+t]<u[q+V]||u[q+V+t]<v[P+V])continue t;var D,W=f[O];if(D=o?n(N,W):n(W,N),void 0!==D)return D}}}}else r(y,d,T--,C-I)}}function u(t,e,n,r,i,o,s,a,u,f,h){for(var p=0,d=2*t,v=e,g=e+t,w=r;i>w;++w){var m=w+c,x=d*w;b[p++]=o[x+v],b[p++]=-m,b[p++]=o[x+g],b[p++]=m}for(var w=a;u>w;++w){var m=w+1,E=d*w;b[p++]=f[E+v],b[p++]=-m}var I=p>>>1;l(b,I);for(var A=0,w=0;I>w;++w){var _=0|b[2*w+1];if(0>_){var m=-_;if(m>=c)y[A++]=m-c;else{m-=1;var B=h[m],k=d*m,S=f[k+e+1],L=f[k+e+1+t];t:for(var T=0;A>T;++T){var C=y[T],M=s[C];if(M===B)break;var N=d*C;if(!(L<o[N+e+1]||o[N+e+1+t]<S)){for(var P=e+2;t>P;++P)if(f[k+P+t]<o[N+P]||o[N+P+t]<f[k+P])continue t;var F=n(M,B);if(void 0!==F)return F}}}}else{for(var m=_-c,T=A-1;T>=0;--T)if(y[T]===m){for(var P=T+1;A>P;++P)y[P-1]=y[P];break}--A}}}e.exports={init:n,sweepBipartite:o,sweepComplete:s,scanBipartite:a,scanComplete:u};var f=t("typedarray-pool"),h=t("bit-twiddle"),l=t("./sort"),c=1<<28,p=1024,y=f.mallocInt32(p),d=f.mallocInt32(p),v=f.mallocInt32(p),g=f.mallocInt32(p),w=f.mallocInt32(p),m=f.mallocInt32(p),b=f.mallocDouble(8*p)}()},{"./sort":42,"bit-twiddle":45,"typedarray-pool":41}],40:[function(t,e){"use strict";function n(t,e){var n=0|8*u.log2(e+1)*(t+1),r=u.nextPow2(A*n);k.length<r&&(a.free(k),k=a.mallocInt32(r));var i=u.nextPow2(_*n);i>S&&(a.free(S),S=a.mallocDouble(i))}function r(t,e,n,r,i,o,s,a,u){var f=A*t;k[f]=e,k[f+1]=n,k[f+2]=r,k[f+3]=i,k[f+4]=o,k[f+5]=s;var h=_*t;S[h]=a,S[h+1]=u}function i(t,e,n,r,i,o,s,a,u,f,h){var l=2*t,c=u*l,p=f[c+e];t:for(var y=i,d=i*l;o>y;++y,d+=l){var v=s[d+e],g=s[d+e+t];if(!(v>p||p>g||r&&p===v)){for(var w=a[y],m=e+1;t>m;++m){var v=s[d+m],g=s[d+m+t],b=f[c+m],x=f[c+m+t];if(b>g||v>x)continue t}var E;if(E=r?n(h,w):n(w,h),void 0!==E)return E}}}function o(t,e,n,r,i,o,s,a,u,f){var h=2*t,l=a*h,c=u[l+e];t:for(var p=r,y=r*h;i>p;++p,y+=h){var d=s[p];if(d!==f){var v=o[y+e],g=o[y+e+t];if(!(v>c||c>g)){for(var w=e+1;t>w;++w){var v=o[y+w],g=o[y+w+t],m=u[l+w],b=u[l+w+t];if(m>g||v>b)continue t}var x=n(d,f);if(void 0!==x)return x}}}}function s(t,e,s,a,u,f,y,B,L){n(t,a+y);var T,C=0,M=2*t;for(r(C++,0,0,a,0,y,s?16:0,-1/0,1/0),s||r(C++,0,0,y,0,a,1,-1/0,1/0);C>0;){C-=1;var N=C*A,P=k[N],F=k[N+1],U=k[N+2],j=k[N+3],O=k[N+4],q=k[N+5],V=C*_,D=S[V],W=S[V+1],Y=1&q,R=!!(16&q),G=u,z=f,X=B,J=L;if(Y&&(G=B,z=L,X=u,J=f),!(2&q&&(U=b(t,P,F,U,G,z,W),F>=U)||4&q&&(F=x(t,P,F,U,G,z,D),F>=U))){var $=U-F,Z=O-j;if(R){if(g>t*$*($+Z)){if(T=c.scanComplete(t,P,e,F,U,G,z,j,O,X,J),void 0!==T)return T;continue}}else{if(t*Math.min($,Z)<d){if(T=h(t,P,e,Y,F,U,G,z,j,O,X,J),void 0!==T)return T;continue}if(v>t*$*Z){if(T=c.scanBipartite(t,P,e,Y,F,U,G,z,j,O,X,J),void 0!==T)return T;continue}}var Q=w(t,P,F,U,G,z,D,W);if(Q>F)if(d>t*(Q-F)){if(T=l(t,P+1,e,F,Q,G,z,j,O,X,J),void 0!==T)return T}else if(P===t-2){if(T=Y?c.sweepBipartite(t,e,j,O,X,J,F,Q,G,z):c.sweepBipartite(t,e,F,Q,G,z,j,O,X,J),void 0!==T)return T}else r(C++,P+1,F,Q,j,O,Y,-1/0,1/0),r(C++,P+1,j,O,F,Q,1^Y,-1/0,1/0);if(U>Q){var H=p(t,P,j,O,X,J),K=X[M*H+P],te=m(t,P,H,O,X,J,K);if(O>te&&r(C++,P,Q,U,te,O,(4|Y)+(R?16:0),K,W),H>j&&r(C++,P,Q,U,j,H,(2|Y)+(R?16:0),D,K),H+1===te){if(T=R?o(t,P,e,Q,U,G,z,H,X,J[H]):i(t,P,e,Y,Q,U,G,z,H,X,J[H]),void 0!==T)return T}else if(te>H){var ee;if(R){if(ee=E(t,P,Q,U,G,z,K),ee>Q){var ne=m(t,P,Q,ee,G,z,K);if(P===t-2){if(ne>Q&&(T=c.sweepComplete(t,e,Q,ne,G,z,H,te,X,J),void 0!==T))return T;if(ee>ne&&(T=c.sweepBipartite(t,e,ne,ee,G,z,H,te,X,J),void 0!==T))return T}else ne>Q&&r(C++,P+1,Q,ne,H,te,16,-1/0,1/0),ee>ne&&(r(C++,P+1,ne,ee,H,te,0,-1/0,1/0),r(C++,P+1,H,te,ne,ee,1,-1/0,1/0))}}else ee=Y?I(t,P,Q,U,G,z,K):E(t,P,Q,U,G,z,K),ee>Q&&(P===t-2?T=Y?c.sweepBipartite(t,e,H,te,X,J,Q,ee,G,z):c.sweepBipartite(t,e,Q,ee,G,z,H,te,X,J):(r(C++,P+1,Q,ee,H,te,Y,-1/0,1/0),r(C++,P+1,H,te,Q,ee,1^Y,-1/0,1/0)))}}}}}e.exports=s;var a=t("typedarray-pool"),u=t("bit-twiddle"),f=t("./brute"),h=f.partial,l=f.full,c=t("./sweep"),p=t("./median"),y=t("./partition"),d=128,v=1<<22,g=1<<22,w=y("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),m=y("lo===p0",["p0"]),b=y("lo<p0",["p0"]),x=y("hi<=p0",["p0"]),E=y("lo<=p0&&p0<=hi",["p0"]),I=y("lo<p0&&p0<=hi",["p0"]),A=6,_=2,B=1024,k=a.mallocInt32(B),S=a.mallocDouble(B)},{"./brute":43,"./median":46,"./partition":44,"./sweep":39,"bit-twiddle":45,"typedarray-pool":41}],46:[function(t,e){"use strict";function n(t,e,n,r,i,o){for(var s=2*t,a=s*(n+1)+e,u=n+1;r>u;++u,a+=s)for(var f=i[a],h=u,l=s*(u-1);h>n&&i[l+e]>f;--h,l-=s){for(var c=l,p=l+s,y=0;s>y;++y,++c,++p){var d=i[c];i[c]=i[p],i[p]=d}var v=o[h];o[h]=o[h-1],o[h-1]=v}}function r(t,e,r,i,a,u){if(r+1>=i)return r;for(var f=r,h=i,l=i+r>>>1,c=2*t,p=l,y=a[c*l+e];h>f;){if(s>h-f){n(t,e,f,h,a,u),y=a[c*l+e];break}var d=h-f,v=0|Math.random()*d+f,g=a[c*v+e],w=0|Math.random()*d+f,m=a[c*w+e],b=0|Math.random()*d+f,x=a[c*b+e];m>=g?x>=m?(p=w,y=m):g>=x?(p=v,y=g):(p=b,y=x):m>=x?(p=w,y=m):x>=g?(p=v,y=g):(p=b,y=x);for(var E=c*(h-1),I=c*p,A=0;c>A;++A,++E,++I){var _=a[E];a[E]=a[I],a[I]=_}var B=u[h-1];u[h-1]=u[p],u[p]=B,p=o(t,e,f,h-1,a,u,y);for(var E=c*(h-1),I=c*p,A=0;c>A;++A,++E,++I){var _=a[E];a[E]=a[I],a[I]=_}var B=u[h-1];if(u[h-1]=u[p],u[p]=B,p>l){for(h=p-1;h>f&&a[c*(h-1)+e]===y;)h-=1;h+=1}else{if(!(l>p))break;for(f=p+1;h>f&&a[c*f+e]===y;)f+=1}}return o(t,e,r,l,a,u,a[c*l+e])}e.exports=r;var i=t("./partition"),o=i("lo<p0",["p0"]),s=8},{"./partition":44}],47:[function(t,e){"use strict";function n(t,e,r){var i=0|t[r];if(0>=i)return[];var o,s=new Array(i);if(r===t.length-1)for(o=0;i>o;++o)s[o]=e;else for(o=0;i>o;++o)s[o]=n(t,e,r+1);return s}function r(t,e){var n,r;for(n=new Array(t),r=0;t>r;++r)n[r]=e;return n}function i(t,e){switch("undefined"==typeof e&&(e=0),typeof t){case"number":if(t>0)return r(0|t,e);break;case"object":if("number"==typeof t.length)return n(t,e,0)}return[]}e.exports=i},{}],45:[function(t,e,n){"use strict";"use restrict";function r(t){var e=32;return t&=-t,t&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}var i=32;n.INT_BITS=i,n.INT_MAX=2147483647,n.INT_MIN=-1<<i-1,n.sign=function(t){return(t>0)-(0>t)},n.abs=function(t){var e=t>>i-1;return(t^e)-e},n.min=function(t,e){return e^(t^e)&-(e>t)},n.max=function(t,e){return t^(t^e)&-(e>t)},n.isPow2=function(t){return!(t&t-1||!t)},n.log2=function(t){var e,n;return e=(t>65535)<<4,t>>>=e,n=(t>255)<<3,t>>>=n,e|=n,n=(t>15)<<2,t>>>=n,e|=n,n=(t>3)<<1,t>>>=n,e|=n,e|t>>1},n.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},n.popCount=function(t){return t-=1431655765&t>>>1,t=(858993459&t)+(858993459&t>>>2),16843009*(252645135&t+(t>>>4))>>>24},n.countTrailingZeros=r,n.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1},n.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t-(t>>>1)},n.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,t&=15,1&27030>>>t};var o=new Array(256);!function(t){for(var e=0;256>e;++e){var n=e,r=e,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;t[e]=255&r<<i}}(o),n.reverse=function(t){return o[255&t]<<24|o[255&t>>>8]<<16|o[255&t>>>16]<<8|o[255&t>>>24]},n.interleave2=function(t,e){return t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1},n.deinterleave2=function(t,e){return t=1431655765&t>>>e,t=858993459&(t|t>>>1),t=252645135&(t|t>>>2),t=16711935&(t|t>>>4),t=65535&(t|t>>>16),t<<16>>16},n.interleave3=function(t,e,n){return t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t|=e<<1,n&=1023,n=4278190335&(n|n<<16),n=251719695&(n|n<<8),n=3272356035&(n|n<<4),n=1227133513&(n|n<<2),t|n<<2},n.deinterleave3=function(t,e){return t=1227133513&t>>>e,t=3272356035&(t|t>>>2),t=251719695&(t|t>>>4),t=4278190335&(t|t>>>8),t=1023&(t|t>>>16),t<<22>>22},n.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>r(t)+1}},{}],48:[function(t,e){t=function(t,e,n,r){function i(r){if(!n[r]){if(!e[r]){if(t)return t(r);throw new Error("Cannot find module '"+r+"'")}var o=n[r]={exports:{}};e[r][0](function(t){var n=e[r][1][t];return i(n?n:t)},o,o.exports)}return n[r].exports}for(var o=0;o<r.length;o++)i(r[o]);return i}("undefined"!=typeof t&&t,{1:[function(t,e,n){n.readIEEE754=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,f=u>>1,h=-7,l=n?0:i-1,c=n?1:-1,p=t[e+l];for(l+=c,o=p&(1<<-h)-1,p>>=-h,h+=a;h>0;o=256*o+t[e+l],l+=c,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=r;h>0;s=256*s+t[e+l],l+=c,h-=8);if(0===o)o=1-f;else{if(o===u)return s?0/0:1/0*(p?-1:1);s+=Math.pow(2,r),o-=f}return(p?-1:1)*s*Math.pow(2,o-r)},n.writeIEEE754=function(t,e,n,r,i,o){var s,a,u,f=8*o-i-1,h=(1<<f)-1,l=h>>1,c=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?o-1:0,y=r?-1:1,d=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||1/0===e?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+l>=1?c/u:c*Math.pow(2,1-l),e*u>=2&&(s++,u/=2),s+l>=h?(a=0,s=h):s+l>=1?(a=(e*u-1)*Math.pow(2,i),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;t[n+p]=255&a,p+=y,a/=256,i-=8);for(s=s<<i|a,f+=i;f>0;t[n+p]=255&s,p+=y,s/=256,f-=8);t[n+p-y]|=128*d}},{}],2:[function(t,e){!function(){function n(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}function r(t,e){return void 0===e?""+e:"number"!=typeof e||!isNaN(e)&&isFinite(e)?"function"==typeof e||e instanceof RegExp?e.toString():e:e.toString()}function i(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function o(t,e,n,r,i){throw new v.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:i})}function s(t,e){t||o(t,!0,e,"==",v.ok)}function a(t,e){if(t===e)return!0;if(y.isBuffer(t)&&y.isBuffer(e)){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():"object"!=typeof t&&"object"!=typeof e?t==e:h(t,e)}function u(t){return null===t||void 0===t}function f(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function h(t,e){if(u(t)||u(e))return!1;if(t.prototype!==e.prototype)return!1;if(f(t))return f(e)?(t=d.call(t),e=d.call(e),a(t,e)):!1;try{var r,i,o=n(t),s=n(e)}catch(h){return!1}if(o.length!=s.length)return!1;for(o.sort(),s.sort(),i=o.length-1;i>=0;i--)if(o[i]!=s[i])return!1;for(i=o.length-1;i>=0;i--)if(r=o[i],!a(t[r],e[r]))return!1;return!0}function l(t,e){return t&&e?e instanceof RegExp?e.test(t):t instanceof e?!0:e.call({},t)===!0?!0:!1:!1}function c(t,e,n,r){var i;"string"==typeof n&&(r=n,n=null);try{e()}catch(s){i=s}if(r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!i&&o("Missing expected exception"+r),!t&&l(i,n)&&o("Got unwanted exception"+r),t&&i&&n&&!l(i,n)||!t&&i)throw i}var p=t("util"),y=t("buffer").Buffer,d=Array.prototype.slice,v=e.exports=s;v.AssertionError=function(t){this.name="AssertionError",this.message=t.message,this.actual=t.actual,this.expected=t.expected,this.operator=t.operator;var e=t.stackStartFunction||o;Error.captureStackTrace&&Error.captureStackTrace(this,e)},p.inherits(v.AssertionError,Error),v.AssertionError.prototype.toString=function(){return this.message?[this.name+":",this.message].join(" "):[this.name+":",i(JSON.stringify(this.actual,r),128),this.operator,i(JSON.stringify(this.expected,r),128)].join(" ")},v.AssertionError.__proto__=Error.prototype,v.fail=o,v.ok=s,v.equal=function(t,e,n){t!=e&&o(t,e,n,"==",v.equal)},v.notEqual=function(t,e,n){t==e&&o(t,e,n,"!=",v.notEqual)},v.deepEqual=function(t,e,n){a(t,e)||o(t,e,n,"deepEqual",v.deepEqual)},v.notDeepEqual=function(t,e,n){a(t,e)&&o(t,e,n,"notDeepEqual",v.notDeepEqual)},v.strictEqual=function(t,e,n){t!==e&&o(t,e,n,"===",v.strictEqual)},v.notStrictEqual=function(t,e,n){t===e&&o(t,e,n,"!==",v.notStrictEqual)},v.throws=function(){c.apply(this,[!0].concat(d.call(arguments)))},v.doesNotThrow=function(){c.apply(this,[!1].concat(d.call(arguments)))},v.ifError=function(t){if(t)throw t}}()},{util:3,buffer:4}],"buffer-browserify":[function(t,e){e.exports=t("q9TxCC")},{}],q9TxCC:[function(t,e,n){!function(){function e(t){this.length=t}function r(t){return 16>t?"0"+t.toString(16):t.toString(16)}function i(t){for(var e=[],n=0;n<t.length;n++)if(t.charCodeAt(n)<=127)e.push(t.charCodeAt(n));else for(var r=encodeURIComponent(t.charAt(n)).substr(1).split("%"),i=0;i<r.length;i++)e.push(parseInt(r[i],16));return e}function o(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function s(e){return t("base64-js").toByteArray(e)}function a(t,e,n,r){for(var i=0;r>i&&!(i+n>=e.length||i>=t.length);)e[i+n]=t[i],i++;return i}function u(t){try{return decodeURIComponent(t)}catch(e){return String.fromCharCode(65533)}}function f(t){return t=~~Math.ceil(+t),0>t?0:t}function h(t,n,r){if(!(this instanceof h))return new h(t,n,r);var i;if("number"==typeof r)this.length=f(n),this.parent=t,this.offset=r;else{switch(i=typeof t){case"number":this.length=f(t);break;case"string":this.length=h.byteLength(t,n);break;case"object":this.length=f(t.length);break;default:throw new Error("First argument needs to be a number, array or string.")}if(this.length>h.poolSize?(this.parent=new e(this.length),this.offset=0):((!L||L.length-L.used<this.length)&&c(),this.parent=L,this.offset=L.used,L.used+=this.length),l(t))for(var o=0;o<this.length;o++)this.parent[o+this.offset]=t instanceof h?t.readUInt8(o):t[o];else"string"==i&&(this.length=this.write(t,0,n))}}function l(t){return Array.isArray(t)||h.isBuffer(t)||t&&"object"==typeof t&&"number"==typeof t.length}function c(){L=new e(h.poolSize),L.used=0}function p(t,e,n,r){var i=0;return r||(S.ok("boolean"==typeof n,"missing or invalid endian"),S.ok(void 0!==e&&null!==e,"missing offset"),S.ok(e+1<t.length,"Trying to read beyond buffer length")),e>=t.length?0:(n?(i=t.parent[t.offset+e]<<8,e+1<t.length&&(i|=t.parent[t.offset+e+1])):(i=t.parent[t.offset+e],e+1<t.length&&(i|=t.parent[t.offset+e+1]<<8)),i)}function y(t,e,n,r){var i=0;return r||(S.ok("boolean"==typeof n,"missing or invalid endian"),S.ok(void 0!==e&&null!==e,"missing offset"),S.ok(e+3<t.length,"Trying to read beyond buffer length")),e>=t.length?0:(n?(e+1<t.length&&(i=t.parent[t.offset+e+1]<<16),e+2<t.length&&(i|=t.parent[t.offset+e+2]<<8),e+3<t.length&&(i|=t.parent[t.offset+e+3]),i+=t.parent[t.offset+e]<<24>>>0):(e+2<t.length&&(i=t.parent[t.offset+e+2]<<16),e+1<t.length&&(i|=t.parent[t.offset+e+1]<<8),i|=t.parent[t.offset+e],e+3<t.length&&(i+=t.parent[t.offset+e+3]<<24>>>0)),i)}function d(t,e,n,r){var i,o;return r||(S.ok("boolean"==typeof n,"missing or invalid endian"),S.ok(void 0!==e&&null!==e,"missing offset"),S.ok(e+1<t.length,"Trying to read beyond buffer length")),o=p(t,e,n,r),i=32768&o,i?-1*(65535-o+1):o}function v(t,e,n,r){var i,o;return r||(S.ok("boolean"==typeof n,"missing or invalid endian"),S.ok(void 0!==e&&null!==e,"missing offset"),S.ok(e+3<t.length,"Trying to read beyond buffer length")),o=y(t,e,n,r),i=2147483648&o,i?-1*(4294967295-o+1):o}function g(e,n,r,i){return i||(S.ok("boolean"==typeof r,"missing or invalid endian"),S.ok(n+3<e.length,"Trying to read beyond buffer length")),t("./buffer_ieee754").readIEEE754(e,n,r,23,4)}function w(e,n,r,i){return i||(S.ok("boolean"==typeof r,"missing or invalid endian"),S.ok(n+7<e.length,"Trying to read beyond buffer length")),t("./buffer_ieee754").readIEEE754(e,n,r,52,8)}function m(t,e){S.ok("number"==typeof t,"cannot write a non-number as a number"),S.ok(t>=0,"specified a negative value for writing an unsigned value"),S.ok(e>=t,"value is larger than maximum value for type"),S.ok(Math.floor(t)===t,"value has a fractional component")}function b(t,e,n,r,i){i||(S.ok(void 0!==e&&null!==e,"missing value"),S.ok("boolean"==typeof r,"missing or invalid endian"),S.ok(void 0!==n&&null!==n,"missing offset"),S.ok(n+1<t.length,"trying to write beyond buffer length"),m(e,65535));for(var o=0;o<Math.min(t.length-n,2);o++)t.parent[t.offset+n+o]=(e&255<<8*(r?1-o:o))>>>8*(r?1-o:o)}function x(t,e,n,r,i){i||(S.ok(void 0!==e&&null!==e,"missing value"),S.ok("boolean"==typeof r,"missing or invalid endian"),S.ok(void 0!==n&&null!==n,"missing offset"),S.ok(n+3<t.length,"trying to write beyond buffer length"),m(e,4294967295));for(var o=0;o<Math.min(t.length-n,4);o++)t.parent[t.offset+n+o]=255&e>>>8*(r?3-o:o)}function E(t,e,n){S.ok("number"==typeof t,"cannot write a non-number as a number"),S.ok(e>=t,"value larger than maximum allowed value"),S.ok(t>=n,"value smaller than minimum allowed value"),S.ok(Math.floor(t)===t,"value has a fractional component")}function I(t,e,n){S.ok("number"==typeof t,"cannot write a non-number as a number"),S.ok(e>=t,"value larger than maximum allowed value"),S.ok(t>=n,"value smaller than minimum allowed value")}function A(t,e,n,r,i){i||(S.ok(void 0!==e&&null!==e,"missing value"),S.ok("boolean"==typeof r,"missing or invalid endian"),S.ok(void 0!==n&&null!==n,"missing offset"),S.ok(n+1<t.length,"Trying to write beyond buffer length"),E(e,32767,-32768)),e>=0?b(t,e,n,r,i):b(t,65535+e+1,n,r,i)}function _(t,e,n,r,i){i||(S.ok(void 0!==e&&null!==e,"missing value"),S.ok("boolean"==typeof r,"missing or invalid endian"),S.ok(void 0!==n&&null!==n,"missing offset"),S.ok(n+3<t.length,"Trying to write beyond buffer length"),E(e,2147483647,-2147483648)),e>=0?x(t,e,n,r,i):x(t,4294967295+e+1,n,r,i)}function B(e,n,r,i,o){o||(S.ok(void 0!==n&&null!==n,"missing value"),S.ok("boolean"==typeof i,"missing or invalid endian"),S.ok(void 0!==r&&null!==r,"missing offset"),S.ok(r+3<e.length,"Trying to write beyond buffer length"),I(n,3.4028234663852886e38,-3.4028234663852886e38)),t("./buffer_ieee754").writeIEEE754(e,n,r,i,23,4)}function k(e,n,r,i,o){o||(S.ok(void 0!==n&&null!==n,"missing value"),S.ok("boolean"==typeof i,"missing or invalid endian"),S.ok(void 0!==r&&null!==r,"missing offset"),S.ok(r+7<e.length,"Trying to write beyond buffer length"),I(n,1.7976931348623157e308,-1.7976931348623157e308)),t("./buffer_ieee754").writeIEEE754(e,n,r,i,52,8)}var S=t("assert");n.INSPECT_MAX_BYTES=50,e.byteLength=function(t,e){switch(e||"utf8"){case"hex":return t.length/2;case"utf8":case"utf-8":return i(t).length;case"ascii":case"binary":return t.length;case"base64":return s(t).length;default:throw new Error("Unknown encoding")}},e.prototype.utf8Write=function(t,n,r){return e._charsWritten=a(i(t),this,n,r)},e.prototype.asciiWrite=function(t,n,r){return e._charsWritten=a(o(t),this,n,r)},e.prototype.binaryWrite=e.prototype.asciiWrite,e.prototype.base64Write=function(t,n,r){return e._charsWritten=a(s(t),this,n,r)},e.prototype.base64Slice=function(){var e=Array.prototype.slice.apply(this,arguments);return t("base64-js").fromByteArray(e)},e.prototype.utf8Slice=function(){for(var t=Array.prototype.slice.apply(this,arguments),e="",n="",r=0;r<t.length;)t[r]<=127?(e+=u(n)+String.fromCharCode(t[r]),n=""):n+="%"+t[r].toString(16),r++;return e+u(n)},e.prototype.asciiSlice=function(){for(var t=Array.prototype.slice.apply(this,arguments),e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);
return e},e.prototype.binarySlice=e.prototype.asciiSlice,e.prototype.inspect=function(){for(var t=[],e=this.length,i=0;e>i;i++)if(t[i]=r(this[i]),i==n.INSPECT_MAX_BYTES){t[i+1]="...";break}return"<SlowBuffer "+t.join(" ")+">"},e.prototype.hexSlice=function(t,e){var n=this.length;(!t||0>t)&&(t=0),(!e||0>e||e>n)&&(e=n);for(var i="",o=t;e>o;o++)i+=r(this[o]);return i},e.prototype.toString=function(t,e,n){if(t=String(t||"utf8").toLowerCase(),e=+e||0,"undefined"==typeof n&&(n=this.length),+n==e)return"";switch(t){case"hex":return this.hexSlice(e,n);case"utf8":case"utf-8":return this.utf8Slice(e,n);case"ascii":return this.asciiSlice(e,n);case"binary":return this.binarySlice(e,n);case"base64":return this.base64Slice(e,n);case"ucs2":case"ucs-2":return this.ucs2Slice(e,n);default:throw new Error("Unknown encoding")}},e.prototype.hexWrite=function(t,n,r){n=+n||0;var i=this.length-n;r?(r=+r,r>i&&(r=i)):r=i;var o=t.length;if(o%2)throw new Error("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;r>s;s++){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");this[n+s]=a}return e._charsWritten=2*s,s},e.prototype.write=function(t,e,n,r){if(isFinite(e))isFinite(n)||(r=n,n=void 0);else{var i=r;r=e,e=n,n=i}e=+e||0;var o=this.length-e;switch(n?(n=+n,n>o&&(n=o)):n=o,r=String(r||"utf8").toLowerCase()){case"hex":return this.hexWrite(t,e,n);case"utf8":case"utf-8":return this.utf8Write(t,e,n);case"ascii":return this.asciiWrite(t,e,n);case"binary":return this.binaryWrite(t,e,n);case"base64":return this.base64Write(t,e,n);case"ucs2":case"ucs-2":return this.ucs2Write(t,e,n);default:throw new Error("Unknown encoding")}},e.prototype.slice=function(t,e){if(void 0===e&&(e=this.length),e>this.length)throw new Error("oob");if(t>e)throw new Error("oob");return new h(this,e-t,+t)},e.prototype.copy=function(t,e,n,r){for(var i=[],o=n;r>o;o++)S.ok("undefined"!=typeof this[o],"copying undefined buffer bytes!"),i.push(this[o]);for(var o=e;o<e+i.length;o++)t[o]=i[o-e]},e.prototype.fill=function(t,e,n){if(n>this.length)throw new Error("oob");if(e>n)throw new Error("oob");for(var r=e;n>r;r++)this[r]=t},n.SlowBuffer=e,n.Buffer=h,h.poolSize=8192;var L;h.isBuffer=function(t){return t instanceof h||t instanceof e},h.concat=function(t,e){if(!Array.isArray(t))throw new Error("Usage: Buffer.concat(list, [totalLength])\n       list should be an Array.");if(0===t.length)return new h(0);if(1===t.length)return t[0];if("number"!=typeof e){e=0;for(var n=0;n<t.length;n++){var r=t[n];e+=r.length}}for(var i=new h(e),o=0,n=0;n<t.length;n++){var r=t[n];r.copy(i,o),o+=r.length}return i},h.prototype.inspect=function(){for(var t=[],e=this.length,i=0;e>i;i++)if(t[i]=r(this.parent[i+this.offset]),i==n.INSPECT_MAX_BYTES){t[i+1]="...";break}return"<Buffer "+t.join(" ")+">"},h.prototype.get=function(t){if(0>t||t>=this.length)throw new Error("oob");return this.parent[this.offset+t]},h.prototype.set=function(t,e){if(0>t||t>=this.length)throw new Error("oob");return this.parent[this.offset+t]=e},h.prototype.write=function(t,n,r,i){if(isFinite(n))isFinite(r)||(i=r,r=void 0);else{var o=i;i=n,n=r,r=o}n=+n||0;var s=this.length-n;r?(r=+r,r>s&&(r=s)):r=s,i=String(i||"utf8").toLowerCase();var a;switch(i){case"hex":a=this.parent.hexWrite(t,this.offset+n,r);break;case"utf8":case"utf-8":a=this.parent.utf8Write(t,this.offset+n,r);break;case"ascii":a=this.parent.asciiWrite(t,this.offset+n,r);break;case"binary":a=this.parent.binaryWrite(t,this.offset+n,r);break;case"base64":a=this.parent.base64Write(t,this.offset+n,r);break;case"ucs2":case"ucs-2":a=this.parent.ucs2Write(t,this.offset+n,r);break;default:throw new Error("Unknown encoding")}return h._charsWritten=e._charsWritten,a},h.prototype.toString=function(t,e,n){switch(t=String(t||"utf8").toLowerCase(),"undefined"==typeof e||0>e?e=0:e>this.length&&(e=this.length),"undefined"==typeof n||n>this.length?n=this.length:0>n&&(n=0),e+=this.offset,n+=this.offset,t){case"hex":return this.parent.hexSlice(e,n);case"utf8":case"utf-8":return this.parent.utf8Slice(e,n);case"ascii":return this.parent.asciiSlice(e,n);case"binary":return this.parent.binarySlice(e,n);case"base64":return this.parent.base64Slice(e,n);case"ucs2":case"ucs-2":return this.parent.ucs2Slice(e,n);default:throw new Error("Unknown encoding")}},h.byteLength=e.byteLength,h.prototype.fill=function(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),"string"==typeof t&&(t=t.charCodeAt(0)),"number"!=typeof t||isNaN(t))throw new Error("value is not a number");if(e>n)throw new Error("end < start");if(n===e)return 0;if(0==this.length)return 0;if(0>e||e>=this.length)throw new Error("start out of bounds");if(0>n||n>this.length)throw new Error("end out of bounds");return this.parent.fill(t,e+this.offset,n+this.offset)},h.prototype.copy=function(t,e,n,r){var i=this;if(n||(n=0),r||(r=this.length),e||(e=0),n>r)throw new Error("sourceEnd < sourceStart");if(r===n)return 0;if(0==t.length||0==i.length)return 0;if(0>e||e>=t.length)throw new Error("targetStart out of bounds");if(0>n||n>=i.length)throw new Error("sourceStart out of bounds");if(0>r||r>i.length)throw new Error("sourceEnd out of bounds");return r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n),this.parent.copy(t.parent,e+t.offset,n+this.offset,r+this.offset)},h.prototype.slice=function(t,e){if(void 0===e&&(e=this.length),e>this.length)throw new Error("oob");if(t>e)throw new Error("oob");return new h(this.parent,e-t,+t+this.offset)},h.prototype.utf8Slice=function(t,e){return this.toString("utf8",t,e)},h.prototype.binarySlice=function(t,e){return this.toString("binary",t,e)},h.prototype.asciiSlice=function(t,e){return this.toString("ascii",t,e)},h.prototype.utf8Write=function(t,e){return this.write(t,e,"utf8")},h.prototype.binaryWrite=function(t,e){return this.write(t,e,"binary")},h.prototype.asciiWrite=function(t,e){return this.write(t,e,"ascii")},h.prototype.readUInt8=function(t,e){var n=this;return e||(S.ok(void 0!==t&&null!==t,"missing offset"),S.ok(t<n.length,"Trying to read beyond buffer length")),t>=n.length?void 0:n.parent[n.offset+t]},h.prototype.readUInt16LE=function(t,e){return p(this,t,!1,e)},h.prototype.readUInt16BE=function(t,e){return p(this,t,!0,e)},h.prototype.readUInt32LE=function(t,e){return y(this,t,!1,e)},h.prototype.readUInt32BE=function(t,e){return y(this,t,!0,e)},h.prototype.readInt8=function(t,e){var n,r=this;return e||(S.ok(void 0!==t&&null!==t,"missing offset"),S.ok(t<r.length,"Trying to read beyond buffer length")),t>=r.length?void 0:(n=128&r.parent[r.offset+t],n?-1*(255-r.parent[r.offset+t]+1):r.parent[r.offset+t])},h.prototype.readInt16LE=function(t,e){return d(this,t,!1,e)},h.prototype.readInt16BE=function(t,e){return d(this,t,!0,e)},h.prototype.readInt32LE=function(t,e){return v(this,t,!1,e)},h.prototype.readInt32BE=function(t,e){return v(this,t,!0,e)},h.prototype.readFloatLE=function(t,e){return g(this,t,!1,e)},h.prototype.readFloatBE=function(t,e){return g(this,t,!0,e)},h.prototype.readDoubleLE=function(t,e){return w(this,t,!1,e)},h.prototype.readDoubleBE=function(t,e){return w(this,t,!0,e)},h.prototype.writeUInt8=function(t,e,n){var r=this;n||(S.ok(void 0!==t&&null!==t,"missing value"),S.ok(void 0!==e&&null!==e,"missing offset"),S.ok(e<r.length,"trying to write beyond buffer length"),m(t,255)),e<r.length&&(r.parent[r.offset+e]=t)},h.prototype.writeUInt16LE=function(t,e,n){b(this,t,e,!1,n)},h.prototype.writeUInt16BE=function(t,e,n){b(this,t,e,!0,n)},h.prototype.writeUInt32LE=function(t,e,n){x(this,t,e,!1,n)},h.prototype.writeUInt32BE=function(t,e,n){x(this,t,e,!0,n)},h.prototype.writeInt8=function(t,e,n){var r=this;n||(S.ok(void 0!==t&&null!==t,"missing value"),S.ok(void 0!==e&&null!==e,"missing offset"),S.ok(e<r.length,"Trying to write beyond buffer length"),E(t,127,-128)),t>=0?r.writeUInt8(t,e,n):r.writeUInt8(255+t+1,e,n)},h.prototype.writeInt16LE=function(t,e,n){A(this,t,e,!1,n)},h.prototype.writeInt16BE=function(t,e,n){A(this,t,e,!0,n)},h.prototype.writeInt32LE=function(t,e,n){_(this,t,e,!1,n)},h.prototype.writeInt32BE=function(t,e,n){_(this,t,e,!0,n)},h.prototype.writeFloatLE=function(t,e,n){B(this,t,e,!1,n)},h.prototype.writeFloatBE=function(t,e,n){B(this,t,e,!0,n)},h.prototype.writeDoubleLE=function(t,e,n){k(this,t,e,!1,n)},h.prototype.writeDoubleBE=function(t,e,n){k(this,t,e,!0,n)},e.prototype.readUInt8=h.prototype.readUInt8,e.prototype.readUInt16LE=h.prototype.readUInt16LE,e.prototype.readUInt16BE=h.prototype.readUInt16BE,e.prototype.readUInt32LE=h.prototype.readUInt32LE,e.prototype.readUInt32BE=h.prototype.readUInt32BE,e.prototype.readInt8=h.prototype.readInt8,e.prototype.readInt16LE=h.prototype.readInt16LE,e.prototype.readInt16BE=h.prototype.readInt16BE,e.prototype.readInt32LE=h.prototype.readInt32LE,e.prototype.readInt32BE=h.prototype.readInt32BE,e.prototype.readFloatLE=h.prototype.readFloatLE,e.prototype.readFloatBE=h.prototype.readFloatBE,e.prototype.readDoubleLE=h.prototype.readDoubleLE,e.prototype.readDoubleBE=h.prototype.readDoubleBE,e.prototype.writeUInt8=h.prototype.writeUInt8,e.prototype.writeUInt16LE=h.prototype.writeUInt16LE,e.prototype.writeUInt16BE=h.prototype.writeUInt16BE,e.prototype.writeUInt32LE=h.prototype.writeUInt32LE,e.prototype.writeUInt32BE=h.prototype.writeUInt32BE,e.prototype.writeInt8=h.prototype.writeInt8,e.prototype.writeInt16LE=h.prototype.writeInt16LE,e.prototype.writeInt16BE=h.prototype.writeInt16BE,e.prototype.writeInt32LE=h.prototype.writeInt32LE,e.prototype.writeInt32BE=h.prototype.writeInt32BE,e.prototype.writeFloatLE=h.prototype.writeFloatLE,e.prototype.writeFloatBE=h.prototype.writeFloatBE,e.prototype.writeDoubleLE=h.prototype.writeDoubleLE,e.prototype.writeDoubleBE=h.prototype.writeDoubleBE}()},{assert:2,"./buffer_ieee754":1,"base64-js":5}],3:[function(t,e,n){function r(t){return t instanceof Array||Array.isArray(t)||t&&t!==Object.prototype&&r(t.__proto__)}function i(t){return t instanceof RegExp||"object"==typeof t&&"[object RegExp]"===Object.prototype.toString.call(t)}function o(t){if(t instanceof Date)return!0;if("object"!=typeof t)return!1;var e=Date.prototype&&a(Date.prototype),n=t.__proto__&&a(t.__proto__);return JSON.stringify(n)===JSON.stringify(e)}t("events"),n.isArray=r,n.isDate=function(t){return"[object Date]"===Object.prototype.toString.call(t)},n.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},n.print=function(){},n.puts=function(){},n.debug=function(){},n.inspect=function(t,e,u,f){function h(t,u){if(t&&"function"==typeof t.inspect&&t!==n&&(!t.constructor||t.constructor.prototype!==t))return t.inspect(u);switch(typeof t){case"undefined":return c("undefined","undefined");case"string":var f="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return c(f,"string");case"number":return c(""+t,"number");case"boolean":return c(""+t,"boolean")}if(null===t)return c("null","null");var p=s(t),y=e?a(t):p;if("function"==typeof t&&0===y.length){if(i(t))return c(""+t,"regexp");var d=t.name?": "+t.name:"";return c("[Function"+d+"]","special")}if(o(t)&&0===y.length)return c(t.toUTCString(),"date");var v,g,w;if(r(t)?(g="Array",w=["[","]"]):(g="Object",w=["{","}"]),"function"==typeof t){var m=t.name?": "+t.name:"";v=i(t)?" "+t:" [Function"+m+"]"}else v="";if(o(t)&&(v=" "+t.toUTCString()),0===y.length)return w[0]+v+w[1];if(0>u)return i(t)?c(""+t,"regexp"):c("[Object]","special");l.push(t);var b=y.map(function(e){var n,i;if(t.__lookupGetter__&&(t.__lookupGetter__(e)?i=t.__lookupSetter__(e)?c("[Getter/Setter]","special"):c("[Getter]","special"):t.__lookupSetter__(e)&&(i=c("[Setter]","special"))),p.indexOf(e)<0&&(n="["+e+"]"),i||(l.indexOf(t[e])<0?(i=null===u?h(t[e]):h(t[e],u-1),i.indexOf("\n")>-1&&(i=r(t)?i.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+i.split("\n").map(function(t){return"   "+t}).join("\n"))):i=c("[Circular]","special")),"undefined"==typeof n){if("Array"===g&&e.match(/^\d+$/))return i;n=JSON.stringify(""+e),n.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(n=n.substr(1,n.length-2),n=c(n,"name")):(n=n.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),n=c(n,"string"))}return n+": "+i});l.pop();var x=0,E=b.reduce(function(t,e){return x++,e.indexOf("\n")>=0&&x++,t+e.length+1},0);return b=E>50?w[0]+(""===v?"":v+"\n ")+" "+b.join(",\n  ")+" "+w[1]:w[0]+v+" "+b.join(", ")+" "+w[1]}var l=[],c=function(t,e){var n={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r={special:"cyan",number:"blue","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"}[e];return r?"["+n[r][0]+"m"+t+"["+n[r][1]+"m":t};return f||(c=function(t){return t}),h(t,"undefined"==typeof u?2:u)},n.log=function(){},n.pump=null;var s=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},a=Object.getOwnPropertyNames||function(t){var e=[];for(var n in t)Object.hasOwnProperty.call(t,n)&&e.push(n);return e},u=Object.create||function(t,e){var n;if(null===t)n={__proto__:null};else{if("object"!=typeof t)throw new TypeError("typeof prototype["+typeof t+"] != 'object'");var r=function(){};r.prototype=t,n=new r,n.__proto__=t}return"undefined"!=typeof e&&Object.defineProperties&&Object.defineProperties(n,e),n};n.inherits=function(t,e){t.super_=e,t.prototype=u(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})};var f=/%[sdj%]/g;n.format=function(t){if("string"!=typeof t){for(var e=[],r=0;r<arguments.length;r++)e.push(n.inspect(arguments[r]));return e.join(" ")}for(var r=1,i=arguments,o=i.length,s=String(t).replace(f,function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":return JSON.stringify(i[r++]);default:return t}}),a=i[r];o>r;a=i[++r])s+=null===a||"object"!=typeof a?" "+a:" "+n.inspect(a);return s}},{events:6}],5:[function(t,e){!function(){"use strict";function t(t){var e,n,i,o,s,a;if(t.length%4>0)throw"Invalid string. Length must be a multiple of 4";for(s=t.indexOf("="),s=s>0?t.length-s:0,a=[],i=s>0?t.length-4:t.length,e=0,n=0;i>e;e+=4,n+=3)o=r.indexOf(t[e])<<18|r.indexOf(t[e+1])<<12|r.indexOf(t[e+2])<<6|r.indexOf(t[e+3]),a.push((16711680&o)>>16),a.push((65280&o)>>8),a.push(255&o);return 2===s?(o=r.indexOf(t[e])<<2|r.indexOf(t[e+1])>>4,a.push(255&o)):1===s&&(o=r.indexOf(t[e])<<10|r.indexOf(t[e+1])<<4|r.indexOf(t[e+2])>>2,a.push(255&o>>8),a.push(255&o)),a}function n(t){function e(t){return r[63&t>>18]+r[63&t>>12]+r[63&t>>6]+r[63&t]}var n,i,o,s=t.length%3,a="";for(n=0,o=t.length-s;o>n;n+=3)i=(t[n]<<16)+(t[n+1]<<8)+t[n+2],a+=e(i);switch(s){case 1:i=t[t.length-1],a+=r[i>>2],a+=r[63&i<<4],a+="==";break;case 2:i=(t[t.length-2]<<8)+t[t.length-1],a+=r[i>>10],a+=r[63&i>>4],a+=r[63&i<<2],a+="="}return a}var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";e.exports.toByteArray=t,e.exports.fromByteArray=n}()},{}],7:[function(t,e,n){n.readIEEE754=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,f=u>>1,h=-7,l=n?0:i-1,c=n?1:-1,p=t[e+l];for(l+=c,o=p&(1<<-h)-1,p>>=-h,h+=a;h>0;o=256*o+t[e+l],l+=c,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=r;h>0;s=256*s+t[e+l],l+=c,h-=8);if(0===o)o=1-f;else{if(o===u)return s?0/0:1/0*(p?-1:1);s+=Math.pow(2,r),o-=f}return(p?-1:1)*s*Math.pow(2,o-r)},n.writeIEEE754=function(t,e,n,r,i,o){var s,a,u,f=8*o-i-1,h=(1<<f)-1,l=h>>1,c=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?o-1:0,y=r?-1:1,d=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||1/0===e?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+l>=1?c/u:c*Math.pow(2,1-l),e*u>=2&&(s++,u/=2),s+l>=h?(a=0,s=h):s+l>=1?(a=(e*u-1)*Math.pow(2,i),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;t[n+p]=255&a,p+=y,a/=256,i-=8);for(s=s<<i|a,f+=i;f>0;t[n+p]=255&s,p+=y,s/=256,f-=8);t[n+p-y]|=128*d}},{}],8:[function(t,e){var n=e.exports={};n.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){if(t.source===window&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var e=n.shift();e()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")}},{}],6:[function(t,e,n){!function(t){function e(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(e===t[n])return n;return-1}t.EventEmitter||(t.EventEmitter=function(){});var r=n.EventEmitter=t.EventEmitter,i="function"==typeof Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=10;r.prototype.setMaxListeners=function(t){this._events||(this._events={}),this._events.maxListeners=t},r.prototype.emit=function(t){if("error"===t&&(!this._events||!this._events.error||i(this._events.error)&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var e=this._events[t];if(!e)return!1;if("function"==typeof e){switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:var n=Array.prototype.slice.call(arguments,1);e.apply(this,n)}return!0}if(i(e)){for(var n=Array.prototype.slice.call(arguments,1),r=e.slice(),o=0,s=r.length;s>o;o++)r[o].apply(this,n);return!0}return!1},r.prototype.addListener=function(t,e){if("function"!=typeof e)throw new Error("addListener only takes instances of Function");if(this._events||(this._events={}),this.emit("newListener",t,e),this._events[t])if(i(this._events[t])){if(!this._events[t].warned){var n;n=void 0!==this._events.maxListeners?this._events.maxListeners:o,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace())}this._events[t].push(e)}else this._events[t]=[this._events[t],e];else this._events[t]=e;return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){var n=this;return n.on(t,function r(){n.removeListener(t,r),e.apply(this,arguments)}),this},r.prototype.removeListener=function(t,n){if("function"!=typeof n)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[t])return this;var r=this._events[t];if(i(r)){var o=e(r,n);if(0>o)return this;r.splice(o,1),0==r.length&&delete this._events[t]}else this._events[t]===n&&delete this._events[t];return this},r.prototype.removeAllListeners=function(t){return 0===arguments.length?(this._events={},this):(t&&this._events&&this._events[t]&&(this._events[t]=null),this)},r.prototype.listeners=function(t){return this._events||(this._events={}),this._events[t]||(this._events[t]=[]),i(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]}}(t("__browserify_process"))},{__browserify_process:8}],4:[function(t,e,n){!function(){function e(t){this.length=t}function r(t){return 16>t?"0"+t.toString(16):t.toString(16)}function i(t){for(var e=[],n=0;n<t.length;n++)if(t.charCodeAt(n)<=127)e.push(t.charCodeAt(n));else for(var r=encodeURIComponent(t.charAt(n)).substr(1).split("%"),i=0;i<r.length;i++)e.push(parseInt(r[i],16));return e}function o(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function s(e){return t("base64-js").toByteArray(e)}function a(t,e,n,r){for(var i=0;r>i&&!(i+n>=e.length||i>=t.length);)e[i+n]=t[i],i++;return i}function u(t){try{return decodeURIComponent(t)}catch(e){return String.fromCharCode(65533)}}function f(t){return t=~~Math.ceil(+t),0>t?0:t}function h(t,n,r){if(!(this instanceof h))return new h(t,n,r);var i;if("number"==typeof r)this.length=f(n),this.parent=t,this.offset=r;else{switch(i=typeof t){case"number":this.length=f(t);break;case"string":this.length=h.byteLength(t,n);break;case"object":this.length=f(t.length);break;default:throw new Error("First argument needs to be a number, array or string.")}if(this.length>h.poolSize?(this.parent=new e(this.length),this.offset=0):((!L||L.length-L.used<this.length)&&c(),this.parent=L,this.offset=L.used,L.used+=this.length),l(t))for(var o=0;o<this.length;o++)this.parent[o+this.offset]=t[o];else"string"==i&&(this.length=this.write(t,0,n))}}function l(t){return Array.isArray(t)||h.isBuffer(t)||t&&"object"==typeof t&&"number"==typeof t.length}function c(){L=new e(h.poolSize),L.used=0}function p(t,e,n,r){var i=0;return r||(S.ok("boolean"==typeof n,"missing or invalid endian"),S.ok(void 0!==e&&null!==e,"missing offset"),S.ok(e+1<t.length,"Trying to read beyond buffer length")),n?(i=t.parent[t.offset+e]<<8,i|=t.parent[t.offset+e+1]):(i=t.parent[t.offset+e],i|=t.parent[t.offset+e+1]<<8),i}function y(t,e,n,r){var i=0;return r||(S.ok("boolean"==typeof n,"missing or invalid endian"),S.ok(void 0!==e&&null!==e,"missing offset"),S.ok(e+3<t.length,"Trying to read beyond buffer length")),n?(i=t.parent[t.offset+e+1]<<16,i|=t.parent[t.offset+e+2]<<8,i|=t.parent[t.offset+e+3],i+=t.parent[t.offset+e]<<24>>>0):(i=t.parent[t.offset+e+2]<<16,i|=t.parent[t.offset+e+1]<<8,i|=t.parent[t.offset+e],i+=t.parent[t.offset+e+3]<<24>>>0),i}function d(t,e,n,r){var i,o;return r||(S.ok("boolean"==typeof n,"missing or invalid endian"),S.ok(void 0!==e&&null!==e,"missing offset"),S.ok(e+1<t.length,"Trying to read beyond buffer length")),o=p(t,e,n,r),i=32768&o,i?-1*(65535-o+1):o}function v(t,e,n,r){var i,o;return r||(S.ok("boolean"==typeof n,"missing or invalid endian"),S.ok(void 0!==e&&null!==e,"missing offset"),S.ok(e+3<t.length,"Trying to read beyond buffer length")),o=y(t,e,n,r),i=2147483648&o,i?-1*(4294967295-o+1):o}function g(e,n,r,i){return i||(S.ok("boolean"==typeof r,"missing or invalid endian"),S.ok(n+3<e.length,"Trying to read beyond buffer length")),t("./buffer_ieee754").readIEEE754(e,n,r,23,4)}function w(e,n,r,i){return i||(S.ok("boolean"==typeof r,"missing or invalid endian"),S.ok(n+7<e.length,"Trying to read beyond buffer length")),t("./buffer_ieee754").readIEEE754(e,n,r,52,8)}function m(t,e){S.ok("number"==typeof t,"cannot write a non-number as a number"),S.ok(t>=0,"specified a negative value for writing an unsigned value"),S.ok(e>=t,"value is larger than maximum value for type"),S.ok(Math.floor(t)===t,"value has a fractional component")}function b(t,e,n,r,i){i||(S.ok(void 0!==e&&null!==e,"missing value"),S.ok("boolean"==typeof r,"missing or invalid endian"),S.ok(void 0!==n&&null!==n,"missing offset"),S.ok(n+1<t.length,"trying to write beyond buffer length"),m(e,65535)),r?(t.parent[t.offset+n]=(65280&e)>>>8,t.parent[t.offset+n+1]=255&e):(t.parent[t.offset+n+1]=(65280&e)>>>8,t.parent[t.offset+n]=255&e)}function x(t,e,n,r,i){i||(S.ok(void 0!==e&&null!==e,"missing value"),S.ok("boolean"==typeof r,"missing or invalid endian"),S.ok(void 0!==n&&null!==n,"missing offset"),S.ok(n+3<t.length,"trying to write beyond buffer length"),m(e,4294967295)),r?(t.parent[t.offset+n]=255&e>>>24,t.parent[t.offset+n+1]=255&e>>>16,t.parent[t.offset+n+2]=255&e>>>8,t.parent[t.offset+n+3]=255&e):(t.parent[t.offset+n+3]=255&e>>>24,t.parent[t.offset+n+2]=255&e>>>16,t.parent[t.offset+n+1]=255&e>>>8,t.parent[t.offset+n]=255&e)}function E(t,e,n){S.ok("number"==typeof t,"cannot write a non-number as a number"),S.ok(e>=t,"value larger than maximum allowed value"),S.ok(t>=n,"value smaller than minimum allowed value"),S.ok(Math.floor(t)===t,"value has a fractional component")}function I(t,e,n){S.ok("number"==typeof t,"cannot write a non-number as a number"),S.ok(e>=t,"value larger than maximum allowed value"),S.ok(t>=n,"value smaller than minimum allowed value")}function A(t,e,n,r,i){i||(S.ok(void 0!==e&&null!==e,"missing value"),S.ok("boolean"==typeof r,"missing or invalid endian"),S.ok(void 0!==n&&null!==n,"missing offset"),S.ok(n+1<t.length,"Trying to write beyond buffer length"),E(e,32767,-32768)),e>=0?b(t,e,n,r,i):b(t,65535+e+1,n,r,i)}function _(t,e,n,r,i){i||(S.ok(void 0!==e&&null!==e,"missing value"),S.ok("boolean"==typeof r,"missing or invalid endian"),S.ok(void 0!==n&&null!==n,"missing offset"),S.ok(n+3<t.length,"Trying to write beyond buffer length"),E(e,2147483647,-2147483648)),e>=0?x(t,e,n,r,i):x(t,4294967295+e+1,n,r,i)}function B(e,n,r,i,o){o||(S.ok(void 0!==n&&null!==n,"missing value"),S.ok("boolean"==typeof i,"missing or invalid endian"),S.ok(void 0!==r&&null!==r,"missing offset"),S.ok(r+3<e.length,"Trying to write beyond buffer length"),I(n,3.4028234663852886e38,-3.4028234663852886e38)),t("./buffer_ieee754").writeIEEE754(e,n,r,i,23,4)}function k(e,n,r,i,o){o||(S.ok(void 0!==n&&null!==n,"missing value"),S.ok("boolean"==typeof i,"missing or invalid endian"),S.ok(void 0!==r&&null!==r,"missing offset"),S.ok(r+7<e.length,"Trying to write beyond buffer length"),I(n,1.7976931348623157e308,-1.7976931348623157e308)),t("./buffer_ieee754").writeIEEE754(e,n,r,i,52,8)}var S=t("assert");n.INSPECT_MAX_BYTES=50,e.byteLength=function(t,e){switch(e||"utf8"){case"hex":return t.length/2;case"utf8":case"utf-8":return i(t).length;case"ascii":return t.length;case"base64":return s(t).length;default:throw new Error("Unknown encoding")}},e.prototype.utf8Write=function(t,n,r){return e._charsWritten=a(i(t),this,n,r)},e.prototype.asciiWrite=function(t,n,r){return e._charsWritten=a(o(t),this,n,r)},e.prototype.base64Write=function(t,n,r){return e._charsWritten=a(s(t),this,n,r)},e.prototype.base64Slice=function(){var e=Array.prototype.slice.apply(this,arguments);return t("base64-js").fromByteArray(e)},e.prototype.utf8Slice=function(){for(var t=Array.prototype.slice.apply(this,arguments),e="",n="",r=0;r<t.length;)t[r]<=127?(e+=u(n)+String.fromCharCode(t[r]),n=""):n+="%"+t[r].toString(16),r++;return e+u(n)},e.prototype.asciiSlice=function(){for(var t=Array.prototype.slice.apply(this,arguments),e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},e.prototype.inspect=function(){for(var t=[],e=this.length,i=0;e>i;i++)if(t[i]=r(this[i]),i==n.INSPECT_MAX_BYTES){t[i+1]="...";break}return"<SlowBuffer "+t.join(" ")+">"},e.prototype.hexSlice=function(t,e){var n=this.length;(!t||0>t)&&(t=0),(!e||0>e||e>n)&&(e=n);for(var i="",o=t;e>o;o++)i+=r(this[o]);return i},e.prototype.toString=function(t,e,n){if(t=String(t||"utf8").toLowerCase(),e=+e||0,"undefined"==typeof n&&(n=this.length),+n==e)return"";switch(t){case"hex":return this.hexSlice(e,n);case"utf8":case"utf-8":return this.utf8Slice(e,n);case"ascii":return this.asciiSlice(e,n);case"binary":return this.binarySlice(e,n);case"base64":return this.base64Slice(e,n);case"ucs2":case"ucs-2":return this.ucs2Slice(e,n);default:throw new Error("Unknown encoding")}},e.prototype.hexWrite=function(t,n,r){n=+n||0;var i=this.length-n;r?(r=+r,r>i&&(r=i)):r=i;var o=t.length;if(o%2)throw new Error("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;r>s;s++){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");this[n+s]=a}return e._charsWritten=2*s,s},e.prototype.write=function(t,e,n,r){if(isFinite(e))isFinite(n)||(r=n,n=void 0);else{var i=r;r=e,e=n,n=i}e=+e||0;var o=this.length-e;switch(n?(n=+n,n>o&&(n=o)):n=o,r=String(r||"utf8").toLowerCase()){case"hex":return this.hexWrite(t,e,n);case"utf8":case"utf-8":return this.utf8Write(t,e,n);case"ascii":return this.asciiWrite(t,e,n);case"binary":return this.binaryWrite(t,e,n);case"base64":return this.base64Write(t,e,n);case"ucs2":case"ucs-2":return this.ucs2Write(t,e,n);default:throw new Error("Unknown encoding")}},e.prototype.slice=function(t,e){if(void 0===e&&(e=this.length),e>this.length)throw new Error("oob");if(t>e)throw new Error("oob");return new h(this,e-t,+t)},e.prototype.copy=function(t,e,n,r){for(var i=[],o=n;r>o;o++)S.ok("undefined"!=typeof this[o],"copying undefined buffer bytes!"),i.push(this[o]);for(var o=e;o<e+i.length;o++)t[o]=i[o-e]},n.SlowBuffer=e,n.Buffer=h,h.poolSize=8192;var L;h.isBuffer=function(t){return t instanceof h||t instanceof e},h.concat=function(t,e){if(!Array.isArray(t))throw new Error("Usage: Buffer.concat(list, [totalLength])\n       list should be an Array.");if(0===t.length)return new h(0);if(1===t.length)return t[0];if("number"!=typeof e){e=0;for(var n=0;n<t.length;n++){var r=t[n];e+=r.length}}for(var i=new h(e),o=0,n=0;n<t.length;n++){var r=t[n];r.copy(i,o),o+=r.length}return i},h.prototype.inspect=function(){for(var t=[],e=this.length,i=0;e>i;i++)if(t[i]=r(this.parent[i+this.offset]),i==n.INSPECT_MAX_BYTES){t[i+1]="...";break}return"<Buffer "+t.join(" ")+">"},h.prototype.get=function(t){if(0>t||t>=this.length)throw new Error("oob");return this.parent[this.offset+t]},h.prototype.set=function(t,e){if(0>t||t>=this.length)throw new Error("oob");return this.parent[this.offset+t]=e},h.prototype.write=function(t,n,r,i){if(isFinite(n))isFinite(r)||(i=r,r=void 0);else{var o=i;i=n,n=r,r=o}n=+n||0;var s=this.length-n;r?(r=+r,r>s&&(r=s)):r=s,i=String(i||"utf8").toLowerCase();var a;switch(i){case"hex":a=this.parent.hexWrite(t,this.offset+n,r);break;case"utf8":case"utf-8":a=this.parent.utf8Write(t,this.offset+n,r);break;case"ascii":a=this.parent.asciiWrite(t,this.offset+n,r);break;case"binary":a=this.parent.binaryWrite(t,this.offset+n,r);break;case"base64":a=this.parent.base64Write(t,this.offset+n,r);break;case"ucs2":case"ucs-2":a=this.parent.ucs2Write(t,this.offset+n,r);break;default:throw new Error("Unknown encoding")}return h._charsWritten=e._charsWritten,a},h.prototype.toString=function(t,e,n){switch(t=String(t||"utf8").toLowerCase(),"undefined"==typeof e||0>e?e=0:e>this.length&&(e=this.length),"undefined"==typeof n||n>this.length?n=this.length:0>n&&(n=0),e+=this.offset,n+=this.offset,t){case"hex":return this.parent.hexSlice(e,n);case"utf8":case"utf-8":return this.parent.utf8Slice(e,n);case"ascii":return this.parent.asciiSlice(e,n);case"binary":return this.parent.binarySlice(e,n);case"base64":return this.parent.base64Slice(e,n);case"ucs2":case"ucs-2":return this.parent.ucs2Slice(e,n);default:throw new Error("Unknown encoding")}},h.byteLength=e.byteLength,h.prototype.fill=function(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),"string"==typeof t&&(t=t.charCodeAt(0)),"number"!=typeof t||isNaN(t))throw new Error("value is not a number");if(e>n)throw new Error("end < start");if(n===e)return 0;if(0==this.length)return 0;if(0>e||e>=this.length)throw new Error("start out of bounds");if(0>n||n>this.length)throw new Error("end out of bounds");return this.parent.fill(t,e+this.offset,n+this.offset)},h.prototype.copy=function(t,e,n,r){var i=this;if(n||(n=0),r||(r=this.length),e||(e=0),n>r)throw new Error("sourceEnd < sourceStart");if(r===n)return 0;if(0==t.length||0==i.length)return 0;if(0>e||e>=t.length)throw new Error("targetStart out of bounds");if(0>n||n>=i.length)throw new Error("sourceStart out of bounds");if(0>r||r>i.length)throw new Error("sourceEnd out of bounds");return r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n),this.parent.copy(t.parent,e+t.offset,n+this.offset,r+this.offset)},h.prototype.slice=function(t,e){if(void 0===e&&(e=this.length),e>this.length)throw new Error("oob");if(t>e)throw new Error("oob");return new h(this.parent,e-t,+t+this.offset)},h.prototype.utf8Slice=function(t,e){return this.toString("utf8",t,e)},h.prototype.binarySlice=function(t,e){return this.toString("binary",t,e)},h.prototype.asciiSlice=function(t,e){return this.toString("ascii",t,e)},h.prototype.utf8Write=function(t,e){return this.write(t,e,"utf8")},h.prototype.binaryWrite=function(t,e){return this.write(t,e,"binary")},h.prototype.asciiWrite=function(t,e){return this.write(t,e,"ascii")},h.prototype.readUInt8=function(t,e){var n=this;return e||(S.ok(void 0!==t&&null!==t,"missing offset"),S.ok(t<n.length,"Trying to read beyond buffer length")),n.parent[n.offset+t]
},h.prototype.readUInt16LE=function(t,e){return p(this,t,!1,e)},h.prototype.readUInt16BE=function(t,e){return p(this,t,!0,e)},h.prototype.readUInt32LE=function(t,e){return y(this,t,!1,e)},h.prototype.readUInt32BE=function(t,e){return y(this,t,!0,e)},h.prototype.readInt8=function(t,e){var n,r=this;return e||(S.ok(void 0!==t&&null!==t,"missing offset"),S.ok(t<r.length,"Trying to read beyond buffer length")),n=128&r.parent[r.offset+t],n?-1*(255-r.parent[r.offset+t]+1):r.parent[r.offset+t]},h.prototype.readInt16LE=function(t,e){return d(this,t,!1,e)},h.prototype.readInt16BE=function(t,e){return d(this,t,!0,e)},h.prototype.readInt32LE=function(t,e){return v(this,t,!1,e)},h.prototype.readInt32BE=function(t,e){return v(this,t,!0,e)},h.prototype.readFloatLE=function(t,e){return g(this,t,!1,e)},h.prototype.readFloatBE=function(t,e){return g(this,t,!0,e)},h.prototype.readDoubleLE=function(t,e){return w(this,t,!1,e)},h.prototype.readDoubleBE=function(t,e){return w(this,t,!0,e)},h.prototype.writeUInt8=function(t,e,n){var r=this;n||(S.ok(void 0!==t&&null!==t,"missing value"),S.ok(void 0!==e&&null!==e,"missing offset"),S.ok(e<r.length,"trying to write beyond buffer length"),m(t,255)),r.parent[r.offset+e]=t},h.prototype.writeUInt16LE=function(t,e,n){b(this,t,e,!1,n)},h.prototype.writeUInt16BE=function(t,e,n){b(this,t,e,!0,n)},h.prototype.writeUInt32LE=function(t,e,n){x(this,t,e,!1,n)},h.prototype.writeUInt32BE=function(t,e,n){x(this,t,e,!0,n)},h.prototype.writeInt8=function(t,e,n){var r=this;n||(S.ok(void 0!==t&&null!==t,"missing value"),S.ok(void 0!==e&&null!==e,"missing offset"),S.ok(e<r.length,"Trying to write beyond buffer length"),E(t,127,-128)),t>=0?r.writeUInt8(t,e,n):r.writeUInt8(255+t+1,e,n)},h.prototype.writeInt16LE=function(t,e,n){A(this,t,e,!1,n)},h.prototype.writeInt16BE=function(t,e,n){A(this,t,e,!0,n)},h.prototype.writeInt32LE=function(t,e,n){_(this,t,e,!1,n)},h.prototype.writeInt32BE=function(t,e,n){_(this,t,e,!0,n)},h.prototype.writeFloatLE=function(t,e,n){B(this,t,e,!1,n)},h.prototype.writeFloatBE=function(t,e,n){B(this,t,e,!0,n)},h.prototype.writeDoubleLE=function(t,e,n){k(this,t,e,!1,n)},h.prototype.writeDoubleBE=function(t,e,n){k(this,t,e,!0,n)},e.prototype.readUInt8=h.prototype.readUInt8,e.prototype.readUInt16LE=h.prototype.readUInt16LE,e.prototype.readUInt16BE=h.prototype.readUInt16BE,e.prototype.readUInt32LE=h.prototype.readUInt32LE,e.prototype.readUInt32BE=h.prototype.readUInt32BE,e.prototype.readInt8=h.prototype.readInt8,e.prototype.readInt16LE=h.prototype.readInt16LE,e.prototype.readInt16BE=h.prototype.readInt16BE,e.prototype.readInt32LE=h.prototype.readInt32LE,e.prototype.readInt32BE=h.prototype.readInt32BE,e.prototype.readFloatLE=h.prototype.readFloatLE,e.prototype.readFloatBE=h.prototype.readFloatBE,e.prototype.readDoubleLE=h.prototype.readDoubleLE,e.prototype.readDoubleBE=h.prototype.readDoubleBE,e.prototype.writeUInt8=h.prototype.writeUInt8,e.prototype.writeUInt16LE=h.prototype.writeUInt16LE,e.prototype.writeUInt16BE=h.prototype.writeUInt16BE,e.prototype.writeUInt32LE=h.prototype.writeUInt32LE,e.prototype.writeUInt32BE=h.prototype.writeUInt32BE,e.prototype.writeInt8=h.prototype.writeInt8,e.prototype.writeInt16LE=h.prototype.writeInt16LE,e.prototype.writeInt16BE=h.prototype.writeInt16BE,e.prototype.writeInt32LE=h.prototype.writeInt32LE,e.prototype.writeInt32BE=h.prototype.writeInt32BE,e.prototype.writeFloatLE=h.prototype.writeFloatLE,e.prototype.writeFloatBE=h.prototype.writeFloatBE,e.prototype.writeDoubleLE=h.prototype.writeDoubleLE,e.prototype.writeDoubleBE=h.prototype.writeDoubleBE}()},{assert:2,"./buffer_ieee754":7,"base64-js":9}],9:[function(t,e){!function(){"use strict";function t(t){var e,n,i,o,s,a;if(t.length%4>0)throw"Invalid string. Length must be a multiple of 4";for(s=t.indexOf("="),s=s>0?t.length-s:0,a=[],i=s>0?t.length-4:t.length,e=0,n=0;i>e;e+=4,n+=3)o=r.indexOf(t[e])<<18|r.indexOf(t[e+1])<<12|r.indexOf(t[e+2])<<6|r.indexOf(t[e+3]),a.push((16711680&o)>>16),a.push((65280&o)>>8),a.push(255&o);return 2===s?(o=r.indexOf(t[e])<<2|r.indexOf(t[e+1])>>4,a.push(255&o)):1===s&&(o=r.indexOf(t[e])<<10|r.indexOf(t[e+1])<<4|r.indexOf(t[e+2])>>2,a.push(255&o>>8),a.push(255&o)),a}function n(t){function e(t){return r[63&t>>18]+r[63&t>>12]+r[63&t>>6]+r[63&t]}var n,i,o,s=t.length%3,a="";for(n=0,o=t.length-s;o>n;n+=3)i=(t[n]<<16)+(t[n+1]<<8)+t[n+2],a+=e(i);switch(s){case 1:i=t[t.length-1],a+=r[i>>2],a+=r[63&i<<4],a+="==";break;case 2:i=(t[t.length-2]<<8)+t[t.length-1],a+=r[i>>10],a+=r[63&i>>4],a+=r[63&i<<2],a+="="}return a}var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";e.exports.toByteArray=t,e.exports.fromByteArray=n}()},{}]},{},[]),e.exports=t("buffer-browserify")},{}],41:[function(t,e,n){!function(e,r){"use strict";function i(t){if(t){var e=t.length||t.byteLength,n=w.log2(e);E[n].push(t)}}function o(t){i(t.buffer)}function s(t){var t=w.nextPow2(t),e=w.log2(t),n=E[e];return n.length>0?n.pop():new ArrayBuffer(t)}function a(t){return new Uint8Array(s(t),0,t)}function u(t){return new Uint16Array(s(2*t),0,t)}function f(t){return new Uint32Array(s(4*t),0,t)}function h(t){return new Int8Array(s(t),0,t)}function l(t){return new Int16Array(s(2*t),0,t)}function c(t){return new Int32Array(s(4*t),0,t)}function p(t){return new Float32Array(s(4*t),0,t)}function y(t){return new Float64Array(s(8*t),0,t)}function d(t){return b?new Uint8ClampedArray(s(t),0,t):a(t)}function v(t){return new DataView(s(t),0,t)}function g(t){t=w.nextPow2(t);var n=w.log2(t),r=I[n];return r.length>0?r.pop():new e(t)}var w=t("bit-twiddle"),m=t("dup");r.__TYPEDARRAY_POOL||(r.__TYPEDARRAY_POOL={UINT8:m([32,0]),UINT16:m([32,0]),UINT32:m([32,0]),INT8:m([32,0]),INT16:m([32,0]),INT32:m([32,0]),FLOAT:m([32,0]),DOUBLE:m([32,0]),DATA:m([32,0]),UINT8C:m([32,0]),BUFFER:m([32,0])});var b="undefined"!=typeof Uint8ClampedArray,x=r.__TYPEDARRAY_POOL;x.UINT8C||(x.UINT8C=m([32,0])),x.BUFFER||(x.BUFFER=m([32,0]));var E=x.DATA,I=x.BUFFER;n.free=function(t){if(e.isBuffer(t))I[w.log2(t.length)].push(t);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(t)&&(t=t.buffer),!t)return;var n=t.length||t.byteLength,r=0|w.log2(n);E[r].push(t)}},n.freeUint8=n.freeUint16=n.freeUint32=n.freeInt8=n.freeInt16=n.freeInt32=n.freeFloat32=n.freeFloat=n.freeFloat64=n.freeDouble=n.freeUint8Clamped=n.freeDataView=o,n.freeArrayBuffer=i,n.freeBuffer=function(t){I[w.log2(t.length)].push(t)},n.malloc=function(t,e){if(void 0===e||"arraybuffer"===e)return s(t);switch(e){case"uint8":return a(t);case"uint16":return u(t);case"uint32":return f(t);case"int8":return h(t);case"int16":return l(t);case"int32":return c(t);case"float":case"float32":return p(t);case"double":case"float64":return y(t);case"uint8_clamped":return d(t);case"buffer":return g(t);case"data":case"dataview":return v(t);default:return null}return null},n.mallocArrayBuffer=s,n.mallocUint8=a,n.mallocUint16=u,n.mallocUint32=f,n.mallocInt8=h,n.mallocInt16=l,n.mallocInt32=c,n.mallocFloat32=n.mallocFloat=p,n.mallocFloat64=n.mallocDouble=y,n.mallocUint8Clamped=d,n.mallocDataView=v,n.mallocBuffer=g,n.clearCache=function(){for(var t=0;32>t;++t)x.UINT8[t].length=0,x.UINT16[t].length=0,x.UINT32[t].length=0,x.INT8[t].length=0,x.INT16[t].length=0,x.INT32[t].length=0,x.FLOAT[t].length=0,x.DOUBLE[t].length=0,x.UINT8C[t].length=0,E[t].length=0,I[t].length=0}}(t("__browserify_buffer").Buffer,window)},{__browserify_buffer:48,"bit-twiddle":45,dup:47}]},{},[1]);