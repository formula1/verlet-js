!function(t,e,n){function r(n,o){if(!e[n]){if(!t[n]){var s="function"==typeof require&&require;if(!o&&s)return s(n,!0);if(i)return i(n,!0);throw new Error("Cannot find module '"+n+"'")}var a=e[n]={exports:{}};t[n][0].call(a.exports,function(e){var i=t[n][1][e];return r(i?i:e)},a,a.exports)}return e[n].exports}for(var i="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t){t("./verlet-polyfill");var e=t("./verlet"),n=t("./constraint");t("./objects"),window.Vec2=t("./structures/Vec2"),window.VerletJS=e,Object.defineProperty(window,"VerletDraw",{get:function(){return t("./draw/canvas")}}),Object.defineProperty(window,"VerletSVGDraw",{get:function(){return t("./draw/svg")}}),window.Particle=e.Particle;for(var r in n)window[r]=n[r]},{"./constraint":4,"./draw/canvas":7,"./draw/svg":8,"./objects":5,"./structures/Vec2":6,"./verlet":3,"./verlet-polyfill":2}],2:[function(){Math.sign||(Math.sign=function(t){return+t===t?0===t?t:t>0?1:-1:0/0}),Math.quadratic||(Math.quadratic=function(t,e,n){var r=e*e-4*t*n;return 0>r?!1:0==r?[-e/(2*t)]:(t*=2,r=Math.sqrt(r)/t,e*=-1/t,[e+r,e-r])}),Math.lawCos||(Math.lawCos=function(t,e,n){return Math.acos((-t*t+e*e+n*n)/(2*e*n))})},{}],5:[function(t){var e=t("./verlet"),n=e.Particle,r=t("./constraint"),i=r.DistanceConstraint;e.prototype.point=function(t){var e=new this.Composite;return e.particles.push(new n(t)),this.composites.push(e),e},e.prototype.lineSegments=function(t,e,r){var o,s=new this.Composite;for(o in t)s.particles.push(new n(t[o])),o>0&&s.constraints.push(new i(s.particles[o],s.particles[o-1],e));return r&&s.constraints.push(new i(s.particles[s.particles.length-1],s.particles[0],e)),this.composites.push(s),s},e.prototype.cloth=function(t,e,r,o,s,a){var u,f,h=new this.Composite,c=e/o,l=r/o;for(f=0;o>f;++f)for(u=0;o>u;++u){var p=t.x+u*c-e/2+c/2,g=t.y+f*l-r/2+l/2;h.particles.push(new n(new Vec2(p,g))),u>0&&h.constraints.push(new i(h.particles[f*o+u],h.particles[f*o+u-1],a)),f>0&&h.constraints.push(new i(h.particles[f*o+u],h.particles[(f-1)*o+u],a))}for(u=0;o>u;++u)0===u%s&&h.pin(u);return this.composites.push(h),h},e.prototype.tire=function(t,e,r,o,s){var a,u=2*Math.PI/r,f=new this.Composite;for(a=0;r>a;++a){var h=a*u;f.particles.push(new n(new Vec2(t.x+Math.cos(h)*e,t.y+Math.sin(h)*e)))}var c=new n(t);for(f.particles.push(c),a=0;r>a;++a)f.constraints.push(new i(f.particles[a],f.particles[(a+1)%r],s)),f.constraints.push(new i(f.particles[a],c,o)),f.constraints.push(new i(f.particles[a],f.particles[(a+5)%r],s));return this.composites.push(f),f}},{"./constraint":4,"./verlet":3}],3:[function(t,e,n){function r(t,e){this.width=t,this.height=e,this.bounds=function(t){t.pos.y>this.height-1&&(t.pos.y=this.height-1),t.pos.x<0&&(t.pos.x=0),t.pos.x>this.width-1&&(t.pos.x=this.width-1)},this.gravity=new i(0,.2),this.friction=.99,this.groundFriction=.8,this.composites=[]}var i=t("./structures/Vec2"),o=t("./collision");n=e.exports=r,n.Particle=t("./structures/Particle");var s=n.Composite=t("./structures/Composite");n.Composite=s,r.prototype.Composite=s,r.prototype.logic=function(){throw new Error("Logic hasn't been set")},r.prototype.frame=function(t){var e,n,r,i;for(r in this.composites){i=this.composites[r].particles;for(e in i)i[e].lastPos.set(i[e].pos),i[e].pos.add(this.gravity),i[e].pos.y>=this.height-1&&i[e].vel.length2()>1e-6&&i[e].vel.scale(this.groundFriction),i[e].pos.add(i[e].vel.scale(this.friction).scale(t))}var s=1/t;for(r in this.composites){var a=this.composites[r].constraints;for(e=0;t>e;++e)for(n in a)a[n].relax(s)}for(r in this.composites){i=this.composites[r].particles,this.composites[r].aabb.clear();for(e in i)this.bounds(i[e]),i[e].vel.set(i[e].pos).sub(i[e].lastPos).div(t),this.composites[r].aabb.digestPoint(i[e].pos)}o(this.composites,1.5*t),this.logic()},r.prototype.nearestEntity=function(t,e){var n,r,i=0,o=null,s=null;for(n in this.composites){var a=this.composites[n].particles;for(r in a){var u=a[r].pos.dist2(t);e*e>=u&&(null===o||i>u)&&(o=a[r],s=this.composites[n].constraints,i=u)}}for(r in s)s[r]instanceof PinConstraint&&s[r].a==o&&(o=s[r]);return o}},{"./collision":11,"./structures/Composite":10,"./structures/Particle":9,"./structures/Vec2":6}],4:[function(t,e,n){t("./structures/Vec2"),n.DistanceConstraint=t("./constraints/DistanceConstraint"),n.PinConstraint=t("./constraints/PinConstraint"),n.AngleConstraint=t("./constraints/AngleConstraint"),n.MidpointAreaConstraint=t("./constraints/AreaConstraint"),n.ScaledAreaConstraint=t("./constraints/InflateAreaConstraint")},{"./constraints/AngleConstraint":14,"./constraints/AreaConstraint":15,"./constraints/DistanceConstraint":12,"./constraints/InflateAreaConstraint":16,"./constraints/PinConstraint":13,"./structures/Vec2":6}],12:[function(t,e){function n(t,e,n,r){this.a=t,this.b=e,this.distance="undefined"!=typeof r?r:t.pos.clone().sub(e.pos).length(),this.stiffness=n}n.prototype.relax=function(t){var e=this.a.pos.clone().sub(this.b.pos),n=e.length2();e.scale((this.distance*this.distance-n)/n*this.stiffness*t),this.a.pos.add(e),this.b.pos.sub(e)},e.exports=n},{}],14:[function(t,e){function n(t,e,n,r){this.a=t,this.b=e,this.c=n,this.angle=this.b.pos.angle2(this.a.pos,this.c.pos),this.stiffness=r}n.prototype.relax=function(t){var e=this.b.pos.angle2(this.a.pos,this.c.pos),n=e-this.angle;n<=-Math.PI?n+=2*Math.PI:n>=Math.PI&&(n-=2*Math.PI),n*=t*this.stiffness,this.a.pos.rotate(this.b.pos,n),this.c.pos.rotate(this.b.pos,-n),this.b.pos.rotate(this.a.pos,n),this.b.pos.rotate(this.c.pos,-n)},e.exports=n},{}],6:[function(t,e){function n(t,e){this.x=t||0,this.y=e||0;var n=this;Object.defineProperty(this,"asArray",{get:function(){return[n.x,n.y]}})}e.exports=n;var r;r=t("./to-value");for(var i in r)n.prototype[i]=r[i];r=t("./no-arg");for(var i in r)n.prototype[i]=r[i];r=t("./operations");for(var i in r)n.prototype[i]=r[i];n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.normal=function(){var t=Math.sqrt(this.x*this.x+this.y*this.y);return new n(this.x/t,this.y/t)},n.prototype.equals=function(t){return this.x==t.x&&this.y==t.y},n.prototype.epsilonEquals=function(t,e){return Math.abs(this.x-t.x)<=e&&Math.abs(this.y-t.y)<=e},n.prototype.isNaN=function(){return isNaN(this.x)?!0:isNaN(this.y)?!0:!1},n.prototype.toString=function(){return"("+this.x+", "+this.y+")"},n.prototype.toArray=function(){return[this.x,this.y]}},{"./no-arg":18,"./operations":19,"./to-value":17}],7:[function(t,e){function n(t,e){if(!t)throw new Error("need a canvas");this.canvas=t;var n=parseInt(t.style.width),i=parseInt(t.style.height);this.ctx=t.getContext("2d"),this.mouse=new Vec2(0,0),this.mouseDown=!1,this.draggedEntity=null,this.selectionRadius=20,this.highlightColor="#4f545c",this.physics=e?e:new r(n,i);var o=this;this.physics.logic=function(){o.draggedEntity&&o.draggedEntity.pos.set(o.mouse)},this.canvas.oncontextmenu=function(t){t.preventDefault()},this.canvas.onmousedown=function(){o.mouseDown=!0;var t=o.physics.nearestEntity(o.mouse,o.selectionRadius);t&&(o.draggedEntity=t,console.log(t.pos))},this.canvas.onmouseup=function(){o.mouseDown=!1,o.draggedEntity=null},this.canvas.onmousemove=function(t){var e=o.canvas.getBoundingClientRect();o.mouse.x=t.clientX-e.left,o.mouse.y=t.clientY-e.top}}window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};var r=t("../../verlet.js");e.exports=n,t("./constraints/AngleConstraint")(t("../../constraints/AngleConstraint")),t("./constraints/AreaConstraint")(t("../../constraints/AreaConstraint")),t("./constraints/DistanceConstraint")(t("../../constraints/DistanceConstraint")),t("./constraints/InflateAreaConstraint")(t("../../constraints/InflateAreaConstraint")),t("./constraints/PinConstraint")(t("../../constraints/PinConstraint")),t("./Particle"),n.prototype.draw=function(){var t,e;this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);var n=this.physics.composites;for(e in n){if(n[e].drawConstraints)n[e].drawConstraints(this.ctx,n[e]);else{var r=n[e].constraints;for(t in r)r[t].draw(this.ctx)}if(n[e].drawParticles)n[e].drawParticles(this.ctx,n[e]);else{var i=n[e].particles;for(t in i)i[t].draw(this.ctx)}n[e].draw&&n[e].draw(this.ctx)}var o=this.draggedEntity||this.physics.nearestEntity(this.mouse,this.selectionRadius);o&&(this.ctx.beginPath(),this.ctx.arc(o.pos.x,o.pos.y,8,0,2*Math.PI),this.ctx.strokeStyle=this.highlightColor,this.ctx.stroke())}},{"../../constraints/AngleConstraint":14,"../../constraints/AreaConstraint":15,"../../constraints/DistanceConstraint":12,"../../constraints/InflateAreaConstraint":16,"../../constraints/PinConstraint":13,"../../verlet.js":3,"./Particle":25,"./constraints/AngleConstraint":20,"./constraints/AreaConstraint":21,"./constraints/DistanceConstraint":22,"./constraints/InflateAreaConstraint":23,"./constraints/PinConstraint":24}],8:[function(t,e){function n(t,e){if(!t)throw new Error("need an SVG Element");this.svg=t;var n=t.width.baseVal.value,i=t.height.baseVal.value;this.physics=e?e:new r(n,i),this.mouse=new Vec2(0,0),this.mouseDown=!1,this.draggedEntity=null,this.selectionRadius=20,this.highlightColor="#4f545c",this.selectorElement=document.createElement("circle"),this.selectorElement.setAttribute("r","8"),this.selectorElement.setAttribute("stroke",this.highlightColor);var o=this;this.physics.logic=function(){o.draggedEntity&&o.draggedEntity.pos.set(o.mouse)},this.svg.oncontextmenu=function(t){t.preventDefault()},this.svg.onmousedown=function(){o.mouseDown=!0;var t=o.physics.nearestEntity(o.mouse,o.selectionRadius);t&&(o.draggedEntity=t,o.svg.appendChild(o.selectorElement))},this.svg.onmouseup=function(){o.mouseDown=!1,o.draggedEntity&&o.svg.removeChild(o.selectorElement),o.draggedEntity=null},this.svg.onmousemove=function(t){var e=o.svg.getBoundingClientRect();o.mouse.x=t.clientX-e.left,o.mouse.y=t.clientY-e.top}}window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};var r=t("../../verlet.js");e.exports=n,t("./constraints/AngleConstraint")(t("../../constraints/AngleConstraint")),t("./constraints/AreaConstraint")(t("../../constraints/AreaConstraint")),t("./constraints/DistanceConstraint")(t("../../constraints/DistanceConstraint")),t("./constraints/InflateAreaConstraint")(t("../../constraints/InflateAreaConstraint")),t("./constraints/PinConstraint")(t("../../constraints/PinConstraint")),t("./Particle"),n.prototype.draw=function(){var t,e,n=this.physics.composites;for(e in n){if(n[e].drawConstraints)n[e].drawConstraints(this.svg,n[e]);else{var r=n[e].constraints;for(t in r)r[t].draw(this.svg)}if(n[e].drawParticles)n[e].drawParticles(this.svg,n[e]);else{var i=n[e].particles;for(t in i)i[t].draw(this.svg)}n[e].draw&&n[e].draw(this.svg)}var o=this.draggedEntity||this.physics.nearestEntity(this.mouse,this.selectionRadius);o&&(this.selectorElement.setAttribute("cx",o.pos.x),this.selectorElement.setAttribute("cy",o.pos.y))}},{"../../constraints/AngleConstraint":14,"../../constraints/AreaConstraint":15,"../../constraints/DistanceConstraint":12,"../../constraints/InflateAreaConstraint":16,"../../constraints/PinConstraint":13,"../../verlet.js":3,"./Particle":31,"./constraints/AngleConstraint":26,"./constraints/AreaConstraint":27,"./constraints/DistanceConstraint":28,"./constraints/InflateAreaConstraint":29,"./constraints/PinConstraint":30}],32:[function(t,e){var n=e.exports={};n.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")}},{}],33:[function(t,e,n){!function(t){function e(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(e===t[n])return n;return-1}t.EventEmitter||(t.EventEmitter=function(){});var r=n.EventEmitter=t.EventEmitter,i="function"==typeof Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=10;r.prototype.setMaxListeners=function(t){this._events||(this._events={}),this._events.maxListeners=t},r.prototype.emit=function(t){if("error"===t&&(!this._events||!this._events.error||i(this._events.error)&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var e=this._events[t];if(!e)return!1;if("function"==typeof e){switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:var n=Array.prototype.slice.call(arguments,1);e.apply(this,n)}return!0}if(i(e)){for(var n=Array.prototype.slice.call(arguments,1),r=e.slice(),o=0,s=r.length;s>o;o++)r[o].apply(this,n);return!0}return!1},r.prototype.addListener=function(t,e){if("function"!=typeof e)throw new Error("addListener only takes instances of Function");if(this._events||(this._events={}),this.emit("newListener",t,e),this._events[t])if(i(this._events[t])){if(!this._events[t].warned){var n;n=void 0!==this._events.maxListeners?this._events.maxListeners:o,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace())}this._events[t].push(e)}else this._events[t]=[this._events[t],e];else this._events[t]=e;return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){var n=this;return n.on(t,function r(){n.removeListener(t,r),e.apply(this,arguments)}),this},r.prototype.removeListener=function(t,n){if("function"!=typeof n)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[t])return this;var r=this._events[t];if(i(r)){var o=e(r,n);if(0>o)return this;r.splice(o,1),0==r.length&&delete this._events[t]}else this._events[t]===n&&delete this._events[t];return this},r.prototype.removeAllListeners=function(t){return 0===arguments.length?(this._events={},this):(t&&this._events&&this._events[t]&&(this._events[t]=null),this)},r.prototype.listeners=function(t){return this._events||(this._events={}),this._events[t]||(this._events[t]=[]),i(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]},r.listenerCount=function(t,e){var n;return n=t._events&&t._events[e]?"function"==typeof t._events[e]?1:t._events[e].length:0}}(t("__browserify_process"))},{__browserify_process:32}],17:[function(t,e){var n=e.exports;n.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},n.length2=function(){return this.x*this.x+this.y*this.y},n.slope=function(){return this.y/this.x},n.sum=function(){return this.y+this.x},n.dist=function(t){return Math.sqrt(this.dist2(t))},n.dist2=function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},n.dot=function(t){return this.x*t.x+this.y*t.y},n.cross=function(t){return this.x*t.y-this.y*t.x},n.angle=function(t,e){return e?this.angle2(t,e):t?this.angle1(t):Math.atan2(this.x,this.y)},n.angle1=function(t){return Math.atan2(this.x*t.y-this.y*t.x,this.x*t.x+this.y*t.y)},n.angle2=function(t,e){return t.clone().sub(this).angle(e.clone().sub(this))}},{}],18:[function(t,e){var n=e.exports;n.zero=function(){return this.x=0,this.y=0,this},n.posinf=function(){return this.x=Number.POSITIVE_INFINITY,this.y=Number.POSITIVE_INFINITY,this},n.neginf=function(){return this.x=Number.NEGATIVE_INFINITY,this.y=Number.NEGATIVE_INFINITY,this},n.normalize=function(){var t=this.length();return this.x/=t,this.y/=t,this},n.signum=function(){return this.x=this.x>0?1:this.x<0?-1:0,this.y=this.y>0?1:this.y<0?-1:0,this},n.swap=function(){var t=this.x;return this.x=this.y,this.y=t,this},n.abs=function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}},{}],19:[function(t,e){var n=e.exports;n.add=function(t){return this.x+=t.x,this.y+=t.y,this},n.sub=function(t){return this.x-=t.x,this.y-=t.y,this},n.mul=function(t){return"number"==typeof t?this.scale(t):(this.x*=t.x,this.y*=t.y,this)},n.div=function(t){return"number"==typeof t?this.scale(1/t):(this.x/=t.x,this.y/=t.y,this)},n.scale=function(t){return this.x*=t,this.y*=t,this},n.scaleI=function(t){return this.x/=t,this.y/=t,this},n.pow=function(t){return this.x=Math.pow(this.x,t),this.y=Math.pow(this.y,t),this},n.rotate=function(t,e){var n=this.x-t.x,r=this.y-t.y;return this.x=n*Math.cos(e)-r*Math.sin(e)+t.x,this.y=n*Math.sin(e)+r*Math.cos(e)+t.y,this},n.min=function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},n.mid=function(t){return this.x=(this.x+t.x)/2,this.y=(this.y+t.y)/2,this},n.max=function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},n.set=function(t,e){return"undefined"!=typeof e?(this.x=t,this.y=e):(this.x=t.x,this.y=t.y),this}},{}],20:[function(t,e){e.exports=function(t){t.prototype.draw=function(t){t.beginPath(),t.moveTo(this.a.pos.x,this.a.pos.y),t.lineTo(this.b.pos.x,this.b.pos.y),t.lineTo(this.c.pos.x,this.c.pos.y);var e=t.lineWidth;t.lineWidth=5,t.strokeStyle="rgba(255,255,0,0.2)",t.stroke(),t.lineWidth=e}}},{}],22:[function(t,e){e.exports=function(t){t.prototype.draw=function(t){t.beginPath(),t.moveTo(this.a.pos.x,this.a.pos.y),t.lineTo(this.b.pos.x,this.b.pos.y),t.strokeStyle="#d8dde2",t.stroke()}}},{}],24:[function(t,e){e.exports=function(t){t.prototype.draw=function(t){t.beginPath(),t.arc(this.pos.x,this.pos.y,6,0,2*Math.PI),t.fillStyle="rgba(0,153,255,0.1)",t.fill()}}},{}],9:[function(t,e){function n(t){i.call(this),this.unique=Math.random().toString(32).substring(2),this.pos=(new r).set(t),this.lastPos=(new r).set(t),this.vel=new r,this.netForce=new r}var r=t("./Vec2"),i=t("events").EventEmitter;n.prototype=Object.create(i),n.prototype.constructor=n,n.prototype.draw=function(t,e){t.beginPath(),e?t.arc(this.pos.x,this.pos.y,20,0,2*Math.PI):t.arc(this.pos.x,this.pos.y,2,0,2*Math.PI),t.fillStyle="#2dad8f",t.fill()},e.exports=n},{"./Vec2":6,events:33}],10:[function(t,e){function n(){i.call(this),this.particles=[],this.constraints=[],this.aabb=new r,this.drawParticles=null,this.drawConstraints=null}var r=t("./AABB"),i=t("events").EventEmitter;n.prototype=Object.create(i),n.prototype.constructor=n,n.prototype.addParticle=function(t){this.particles.puch(t),t.on("collision",this.emit.bind(this,"collision"))},n.prototype.pin=function(t,e){e=e||this.particles[t].pos;var n=new PinConstraint(this.particles[t],e);return this.constraints.push(n),n},e.exports=n},{"./AABB":34,events:33}],13:[function(t,e){function n(t,e){this.a=t,this.pos=(new r).set(e)}var r=t("../structures/Vec2");n.prototype.relax=function(){this.a.pos.set(this.pos)},e.exports=n},{"../structures/Vec2":6}],15:[function(t,e){function n(t,e){if(Array.isArray(t)||(t=Array.prototype.slice.call(arguments,0),e=t.pop()),t.length<3)throw new Error("need at least three points in args or as an array to retain an area");if(this.points=o(t),this.area=this.points.getArea(),this.storedarea=0,this.storedmid=0,this.storedaabb=new s,!this.area||0===this.area)throw new Error("cannot calculate a nonexistant area");this.stiffness=e}var r=t("../structures/Vec2"),i=t("../structures/Triangle"),o=t("../structures/Polygon"),s=t("../structures/AABB");n.prototype.relax=function(t){var e=0,n=new r,o=this.points.length;if(this.points.forThree(function(t,r,i){e+=r.cross(i),n.add(r.clone().scale(1/o))}),0>=e)throw alert("negative area"),new Error("negative area");var s=Math.sqrt((this.area*this.stiffness*t+(1-this.stiffness*t)*e)/e);this.storedarea=0,this.storedmid=new r;var a=this;this.points.forThree(function(t,e,r,u){var f=!0,h=new i(t,e,r);if(h.isConcave()){h.hasPoint(a.storedmid)&&(problem=!0);var c=a.points.getIntersects(t,e,u);c.length>0&&(f=!1)}a.storedmid.add(e.sub(n).scale(s).add(n).clone().scale(1/o)),e!=a.points[0]&&(a.storedarea+=t.cross(e)),a.storedaabb.digestPoint(e)})},e.exports=n},{"../structures/AABB":34,"../structures/Polygon":36,"../structures/Triangle":35,"../structures/Vec2":6}],16:[function(t,e){function n(t,e){if(Array.isArray(t)||(t=Array.prototype.slice.call(arguments,0),e=t.pop()),t.length<3)throw new Error("need at least three points in args or as an array to retain an area");if(this.points=i(t),this.area=this.points.getArea(),this.storedarea=0,this.storedmid=0,this.storedaabb=new o,!this.area||0===this.area)throw new Error("cannot calculate a nonexistant area");this.stiffness=e}var r=t("../structures/Vec2");t("../structures/Line"),t("../structures/Triangle");var i=t("../structures/Polygon"),o=t("../structures/AABB");n.prototype.relax=function(t){var e=0,n=new r,i=this.points.length;if(this.points.forThree(function(t,r,o){e+=r.cross(o),n.add(r.clone().scale(1/i))}),0>=e)throw alert("negative area"),new Error("negative area");var o=(this.area*this.stiffness*t+(1-this.stiffness*t)*e)/e;this.points[this.points.length-1],this.points[0].clone();var s=this.points[this.points.length-1],a=new r;for(this.points.forThree(function(t,e){var n=e.clone();e.sub(s).scale(o).add(t),a.add(e.clone().scale(1/i)),s=n});i--;)this.points[i].sub(a).add(n);this.storedarea=e*o,this.storedmid=n},e.exports=n},{"../structures/AABB":34,"../structures/Line":37,"../structures/Polygon":36,"../structures/Triangle":35,"../structures/Vec2":6}],25:[function(t){t("../../structures/Particle").prototype.draw=function(t,e){t.beginPath(),e?t.arc(this.pos.x,this.pos.y,20,0,2*Math.PI):t.arc(this.pos.x,this.pos.y,2,0,2*Math.PI),t.fillStyle="#2dad8f",t.fill()}},{"../../structures/Particle":9}],31:[function(t){var e=t("./generics");t("../../structures/Particle").prototype.draw=function(t,n){this.svgPoint||(this.svgPoint=e.circle(2,this.pos,"#2dad8f"),t.appendChild(this.svgPoint)),this.svgPoint.r=n?"20":"2",this.svgPoint.svgUpdate(this.pos)}},{"../../structures/Particle":9,"./generics":38}],39:[function(t,e){e.exports.getImpacts=function(t,e,n){var r=t.vel.clone().sub(e.vel),i=e.vel.clone().sub(n.vel),o=t.pos.clone().sub(e.pos),s=e.pos.clone().sub(n.pos),a=r.cross(i),u=r.cross(s)+o.cross(i),f=o.cross(s);if(0===a)return 0===u?!1:[-f/u];var h=Math.pow(u,2)-4*a*f;if(0>h)return!1;if(0===h)return[-u/(2*a)];var c=(-u-Math.sqrt(h))/(2*a),l=(-u+Math.sqrt(h))/(2*a);return[c,l]},e.exports.restrict=function(t,e){for(var n=!1,r=t.length;r--;)t[r]>0||t[r]<-e||(n=Math.min(n,t[r]));return n}},{}],26:[function(t,e){var n=t("../generics");e.exports=function(t){t.prototype.draw=function(t){if(!this.svgLines){var e="rgba(255,255,0,0.2)";this.svgLines={},this.svgLines.ab=n.line(this.a.pos,this.b.pos,5,e),t.appendChild(this.svgLines.ab),this.svgLines.bc=n.line(this.b.pos,this.c.pos,5,e),t.appendChild(this.svgLines.bc)}this.svgLines.ab.svgUpdate(this.a.pos,this.b.pos),this.svgLines.ac.svgUpdate(this.b.pos,this.c.pos)}}},{"../generics":38}],28:[function(t,e){var n=t("../generics");e.exports=function(t){t.prototype.draw=function(t){this.svgLine||(this.svgLine=n.line(this.a.pos,this.b.pos,1,"#d8dde2"),t.appendChild(this.svgLine)),this.svgLine.svgUpdate(this.a.pos,this.b.pos)}}},{"../generics":38}],30:[function(t,e){var n=t("../generics");e.exports=function(t){t.prototype.draw=function(t){this.svgPoint||(this.svgPoint=n.circle(6,this.pos,"rgba(0,153,255,0.1)"),t.appendChild(this.svgPoint)),this.svgPoint.svgUpdate(this.pos)}}},{"../generics":38}],21:[function(t,e){var n=t("../../../structures/Triangle");t("../../../structures/Line"),e.exports=function(t){t.prototype.draw=function(t){var e=Math.floor(Math.min(255,255*this.area/this.storedarea)),r=Math.floor(Math.min(255,255*this.storedarea/this.area));t.beginPath(),t.moveTo(this.points[0].x,this.points[0].y);var i=this,o=!1,s=[];this.points.forThree(function(e,r,a,u){var f=new n(e,r,a);f.isConcave()&&f.hasPoint(i.storedmid)&&(o=!0);var h=i.points.getIntersects(e,r,u);h.length>0&&(s=s.concat(h)),t.lineTo(r.x,r.y)});var a=r>e?e:r;t.closePath(),t.fillStyle="rgba("+e+","+a+","+r+",0.6)",t.fill();for(var u=s.length;u--;)t.beginPath(),t.arc(s[u].x,s[u].y,8,0,2*Math.PI,!1),t.fillStyle="#FF8300",t.fill();var f=this.points.getDelaney();for(u=f.length;u;)t.beginPath(),--u,t.moveTo(this.points[f[u]].x,this.points[f[u]].y),--u,t.lineTo(this.points[f[u]].x,this.points[f[u]].y),--u,t.lineTo(this.points[f[u]].x,this.points[f[u]].y),t.closePath(),t.stroke();t.beginPath(),t.arc(this.storedmid.x,this.storedmid.y,2,0,2*Math.PI,!1),t.fillStyle=o?"#FF0000":"#00FF00",t.fill()}}},{"../../../structures/Line":37,"../../../structures/Triangle":35}],23:[function(t,e){var n=t("../../../structures/Triangle"),r=t("../../../structures/Line");e.exports=function(t){t.prototype.draw=function(t){var e=Math.floor(Math.min(255,255*this.area/this.storedarea)),i=Math.floor(Math.min(255,255*this.storedarea/this.area)),o=this,s=!1,a=[],u=!1,f=[],h=this.points.length-1;for(t.beginPath(),t.moveTo(this.points[h].x,this.points[h].y);h--;)t.lineTo(this.points[h].x,this.points[h].y);var c=i>e?e:i;t.closePath(),t.fillStyle="rgba("+e+","+c+","+i+",0.6)",t.fill(),t.lineWidth=4,this.points.forThree(function(e,i,h,c){if(i.equals(h))return u=u||e,void 0;u&&(e=u,u=!1),f.push(i);var l=new n(e,i,h),p=l.getConcaveBisector(),g=!1;l.CA.pointIsLeftOrTop(p.B)==l.CA.pointIsLeftOrTop(l.B)?(t.strokeStyle="#FFFF00",l.hasPoint(o.storedmid)&&(s=!0)):(t.strokeStyle="#FF00FF",l.partialArea<0&&(g=!0));var y=o.points.intersectsLine(new r(e,i),c);y.length>0&&(a=a.concat(y)),t.beginPath(),t.moveTo((e.x+i.x)/2,(e.y+i.y)/2),t.lineTo(i.x,i.y),t.lineTo((h.x+i.x)/2,(h.y+i.y)/2),t.stroke()}),t.lineWidth=1;for(var l=a.length;l--;)t.beginPath(),t.arc(a[l].x,a[l].y,8,0,2*Math.PI,!1),t.fillStyle="#FF8300",t.fill();t.beginPath(),t.arc(this.storedmid.x,this.storedmid.y,2,0,2*Math.PI,!1),t.fillStyle=s?"#FF0000":"#00FF00",t.fill()}}},{"../../../structures/Line":37,"../../../structures/Triangle":35}],27:[function(t,e){var n=t("../../../structures/Triangle");t("../../../structures/Line");var r=t("../generics");e.exports=function(t){t.prototype.draw=function(t){this.svgPolygon?(this.svgTriangles.forEach(function(e){t.removeChild(e)}),this.svgIntersections.forEach(function(e){t.removeChild(e)}),this.svgTriangles=[],this.svgIntersections=[]):(this.svgPolygon=r.polygon(),this.svgMid=r.circle(2),this.svgMid.setAttribute("r","2"),t.appendChild(this.svgPolygon),t.appendChild(this.svgMid),this.svgTriangles=[],this.svgIntersections=[]);var e=Math.floor(Math.min(255,255*this.area/this.storedarea)),i=Math.floor(Math.min(255,255*this.storedarea/this.area));t.beginPath(),this.svgPolygon.svgReset(),this.svgPolygon.svgPoint(this.points[0]);var o=this,s=!1,a=[];this.points.forThree(function(t,e,r,i){var u=new n(t,e,r);u.isConcave()&&u.hasPoint(o.storedmid)&&(s=!0);var f=o.points.getIntersects(t,e,i);f.length>0&&(a=a.concat(f)),this.svgPolygon.svgPoint(e)});var u=i>e?e:i;this.svgPolygon.svgApply(),this.svgPolygon.style.fill="rgba("+e+","+u+","+i+",0.6)";for(var f=a.length;f--;){var h=r.circle(8,a[f],"#FF8300");this.svgIntersections.push(h),t.appendChild(h)}var c=this.points.getDelaney();for(f=c.length;f;){var l=r.polygon(1,"white");--f,l.svgPoint(this.points[l[f]]),--f,l.svgPoint(this.points[l[f]]),--f,l.svgPoint(this.points[l[f]]),l.svgApply(),this.svgTriangles.push(l),t.appendChild(l)}this.svgMid.svgUpdate(this.storedmid),this.svgMid.style.fill=s?"#FF0000":"#00FF00"}}},{"../../../structures/Line":37,"../../../structures/Triangle":35,"../generics":38}],29:[function(t,e){var n=t("../../../structures/Triangle"),r=t("../../../structures/Line"),i=t("../generics");e.exports=function(t){t.prototype.draw=function(t){this.svgPolygon?(this.svgTriangles.forEach(function(e){t.removeChild(e)}),this.svgIntersections.forEach(function(e){t.removeChild(e)}),this.svgTriangles=[],this.svgIntersections=[]):(this.svgPolygon=i.polygon(),this.svgMid=i.circle(2),t.appendChild(this.svgPolygon),t.appendChild(this.svgMid),this.svgTriangles=[],this.svgIntersections=[]);var e=Math.floor(Math.min(255,255*this.area/this.storedarea)),o=Math.floor(Math.min(255,255*this.storedarea/this.area)),s=this,a=!1,u=[],f=!1,h=[],c=this.points.length-1;for(this.svgPolygon.svgReset();c--;)this.svgPolygon.svgPoint(this.points[c]);var l=o>e?e:o;this.svgPolygon.svgApply(),this.svgPolygon.style.fill="rgba("+e+","+l+","+o+",0.6)",t.lineWidth=4,this.points.forThree(function(e,o,c,l){if(o.equals(c))return f=f||e,void 0;f&&(e=f,f=!1),h.push(o);var p,g=new n(e,o,c),y=g.getConcaveBisector(),d=!1;g.CA.pointIsLeftOrTop(y.B)==g.CA.pointIsLeftOrTop(g.B)?(p="#FFFF00",g.hasPoint(s.storedmid)&&(a=!0)):(p="#FF00FF",g.partialArea<0&&(d=!0));var v=s.points.intersectsLine(new r(e,o),l);v.length>0&&(u=u.concat(v));var m=i.polyline(1,p);m.svgPoint(e.clone().add(o).div(2)),m.svgPoint(o),m.svgPoint(o.clone().add(c).div(2)),m.svgApply(),s.svgTriangles.push(m),t.appendChild(m)});for(var p=u.length;p--;){var g=i.circle(8,u[p],"#FF8300");this.svgIntersections.push(g),t.appendChild(g)}this.svgMid.svgUpdate(this.storedmid),this.svgMid.style.fill=a?"#FF0000":"#00FF00"}}},{"../../../structures/Line":37,"../../../structures/Triangle":35,"../generics":38}],38:[function(t,e){e.exports.circle=function(t,e,n){var r=document.createElement("circle");return r.setAttribute("r",t),e&&(r.setAttribute("cx",e.x),r.setAttribute("cy",e.y)),n&&(r.style.fill=n),r.svgUpdate=function(t){r.setAttribute("cx",t.x),r.setAttribute("cy",t.y)},r},e.exports.polygon=function(t,e,n){var r=document.createElement("polygon"),i="";return t&&(r.style["stroke-width"]=t),e&&(r.style.stroke=e),n&&(r.style.fill=n),r.svgReset=function(){i=""},r.svgPoint=function(t){i+=Math.round(t.x)+","+Math.round(t.y)+" "},r.svgApply=function(){r.setAttribute("points",i)},r},e.exports.polyline=function(t,e,n){var r=document.createElement("polyline"),i="";return t&&(r.style["stroke-width"]=t),e&&(r.style.stroke=e),n&&(r.style.fill=n),r.svgReset=function(){i=""},r.svgPoint=function(t){i+=Math.round(t.x)+","+Math.round(t.y)+" "},r.svgApply=function(){r.setAttribute("points",i)},r},e.exports.line=function(t,e,n,r){var i=document.createElement("line");return n&&(i.style["stroke-width"]=n),r&&(i.style.stroke=r),i.setAttribute("x1",t.x),i.setAttribute("y1",t.y),i.setAttribute("x2",e.x),i.setAttribute("y2",e.y),i.svgUpdate=function(t,e){i.setAttribute("x1",t.x),i.setAttribute("y1",t.y),i.setAttribute("x2",e.x),i.setAttribute("y2",e.y)},i}},{}],40:[function(t,e){function n(t,e){(t.elasticity+e.elasticity)/2;var n=t.vel.clone().mul(t.mass).add(e.vel.clone().mul(e.mass));return n.div(t.mass+e.mass),n}function r(t,e,r,a){e.pos.add(e.vel.clone().scale(a)),r.pos.add(r.vel.clone().scale(a)),t.pos.add(t.vel.clone().scale(a)),t.mass=s.getParticleMass(t),t.elasticity=s.getParticleElasticity(t),o.getVelocityAtPoint(e,r,t);var u={pos:t.pos.clone(),vel:o.getVelocityAtPoint(e,r,t),mass:s.getMassAtPoint(e,r,t),elasticity:s.getElasticityAtPoint(e,r,t)},f=i(e,r,t,a),h=n(t,u,f);t.vel.set(h);var c=u.vel.clone();u.vel.set(h),h.sub(c),o.applyTransformAtPoint(e,r,u,h),e.pos.sub(e.vel.clone().scale(a)),r.pos.sub(r.vel.clone().scale(a)),t.pos.sub(t.vel.clone().scale(a))}function i(t,e,n){var r=t.pos.clone().sub(e.pos).swap(),i=n.pos.clone().sub(e.pos).sub(n.vel.clone());return r.mul(-1,1).dist(i)>r.mul(-1,-1).dist(i)?r.normalize():r.mul(-1,-1).normalize()}var o=t("./velocities.js"),s=t("./material.js");e.exports.distributeVelocities=r},{"./material.js":42,"./velocities.js":41}],36:[function(t,e){function n(t){for(var e=t.length,r=e,i=Array(r);r--;)i[e-r-1]=t[r].pos||t[r];for(r in n.prototype)Object.defineProperty(i,r,{enumerable:!1,value:n.prototype[r].bind(i)});
return i}n.prototype.clone=function(){var t=this.slice(0);for(var e in n.prototype)Object.defineProperty(t,e,{enumerable:!1,value:n.prototype[e].bind(t)});return t},n.prototype.forThree=function(t,e){for(var n=this.length,r=n-(e||0);r--;){var i=(r+1)%n,o=r,s=(r+n-1)%n;t.call(this,this[i],this[o],this[s],o)}};var r=t("./cacheable");for(var i in r)n.prototype[i]=r[i];var o=t("./intersects");for(var i in o)n.prototype[i]=o[i];e.exports=n},{"./cacheable":43,"./intersects":44}],41:[function(t,e){function n(t,e,n){var r=t.pos.clone().mid(e.pos),i=t.pos.clone().sub(e.pos),o=t.pos.dist(e.pos),s=t.pos.clone().add(t.vel.clone().scale(n)),a=e.pos.clone().add(e.vel.clone().scale(n)),u=s.clone().mid(a),f=s.clone().sub(a),h=s.dist(a),c=u.clone().sub(r);t.vel.clone().sub(c),e.vel.clone().sub(c);var l=0,p=0;return Math.abs(i.angle()-f.angle())>1e-4&&(p=Math.acos(1-Math.pow(s.dist(t),2)/(Math.pow(h,2)/2))),0===p?Math.abs(h-o)>1e-6&&(l=t.pos.clone().sub(r).div(o).abs().mul(h-o)):console.log("we have an angle?"),{cache:{before:{a:t,b:e,m:r,ang:i,d:o},after:{a:s,b:a,m:u,ang:f,d:h}},linearvel:c,expandvel:l,rotatevel:p}}function r(t,e){var n=e.cache.before.m,r=t.dist(n),i=e.cache.before.d,o=e.linearvel.clone();return 0===e.rotatevel?0===e.expandvel?o:o.add(2*e.expandvel.mul(t.clone().sub(n).signum())*r/i):void 0}function i(t,e,n){var r=t.pos.dist(n.pos),i=e.pos.dist(n.pos);return t.vel.clone().mul(i).div(r+i).add(e.vel.clone().mul(r).div(r+i))}function o(t,e,n){var r=t.pos.dist(n.pos),i=r/t.pos.dist(e.pos),o=i>.5?1-i:1;t.vel.mul(1-o).add(n.vel.clone().mul(o));var s=.5>i?i:1;e.vel.mul(1-s).add(n.vel.clone().mul(s))}e.exports.getVelocityAtPoint=i,e.exports.getVelocitiesFromPoint=o,e.exports.getNetVelocityAtPoint=r,e.exports.getVelocities=n,e.exports.applyTransformAtPoint=function(t,e,n,r){var i=t.pos.dist(n.pos),o=e.pos.dist(n.pos),s=i>o?1-i/(i+o):1,a=o>i?i/(i+o):1;r.mul(s+a),t.vel.add(r.clone().mul(o).div(i+o)),e.vel.add(r.clone().mul(i).div(i+o))}},{}],42:[function(t,e){function n(){return 1}function r(){return 0}e.exports.getParticleMass=n,e.exports.getParticleElasticity=r,e.exports.getElasticityAtPoint=function(t,e,n){var i=t.pos.dist(n.pos),o=e.pos.dist(n.pos);return r(t)*o/(i+o)+r(e)*i/(i+o)},e.exports.getMassAtPoint=function(t,e,r){var i=t.pos.dist(e.pos),o=r.pos.dist(t.pos)/i,s=0;return s+=n(t)*(o>.5)?1-o:1,s+=n(e)*(.5>o?o:1)}},{}],11:[function(t,e){function n(t,e){for(var n;e>0;){console.log(e);for(var o,s=Number.POSITIVE_INFINITY,a=t.length;a--;){var u=a,f=r(t[a],t[a]);for(f&&(n=i(f.A.inside,f.B.lines,e),n.time<s?(s=n.time,o=[n]):n.time===s&&s<Number.POSITIVE_INFINITY&&o.push(n));u--;)t[a].aabb.intersectsAABB(t[u].aabb)&&(f=r(t[a],t[u]),f&&(n=i(f.A.inside,f.B.lines,e),n.time<s?(s=n.time,o=[n]):n.time===s&&s<Number.POSITIVE_INFINITY&&o.push(n),n=i(f.B.inside,f.A.lines,e),n.time<s?(s=n.time,o=[n]):n.time===s&&s<Number.POSITIVE_INFINITY&&o.push(n)))}if(s===Number.POSITIVE_INFINITY)break;console.log("distributing");for(var c=[];o.length;)n=o.pop(),(-1===c.indexOf(n.point)||-1===c.indexOf(n.line[0])&&-1===c.indexOf(n.line[1]))&&(h.distributeVelocities(n.point,n.line[0],n.line[1],n.time),c.push(n.point,n.line[0],n.line[1]));e=-s}}function r(t,e){var n=t.aabb.clone().sub(e.aabb),r=n.getSuspects(t.particles),i=n.getSuspects(e.particles);return 0===r.lines.length||0===i.lines.length?!1:0===r.inside.length&&0===i.inside.length?!1:{A:r,B:i}}function i(t,e,n){var r,i;r=t.length;for(var o,u,f,h,c={time:Number.POSITIVE_INFINITY};r--;)for(o=t[r],i=e.length;i--;){var l=e[i];u=l[0],f=l[1],h=a(o,u,f,n),h!==!1&&(console.log("temptime",h),h>c.time||s(o,u,f,h)&&(c.time=h,c.line=l,c.point=o))}return c}function o(t,e,n){var r=e[0],i=e[1],o=a(t,r,i,n);return o===!1?!1:(o/=n,s(t,r,i,o)?(h.distributeVelocities(t,r,i,o),void 0):!1)}function s(t,e,n,r){return e=e.pos.clone().add(e.vel.clone().scale(r)),n=n.pos.clone().add(n.vel.clone().scale(r)),t=t.pos.clone().add(t.vel.clone().scale(r)),new u(e,n).segmentIntersectsPoint(t)}function a(t,e,n,r){var i=f.getImpacts(t,e,n);return i?(i=f.restrict(i,r),i?i:!1):!1}t("../structures/AABB");var u=t("../structures/Line");t("box-intersect");var f=t("./time"),h=t("./momentum");e.exports=n,e.exports.getSuspectPoints=r,e.exports.checkForImpact=o,e.exports.getTimeOfImpact=a,e.exports.pointWithinSegment=s},{"../structures/AABB":34,"../structures/Line":37,"./momentum":40,"./time":39,"box-intersect":45}],34:[function(t,e){function n(t){if(this.max=(new r).neginf(),this.min=(new r).posinf(),t){var e;if(arguments.length>1)for(e=arguments.length;e--;)this.digestPoint(arguments[e]);else for(e=t.length;e--;)this.digestPoint(t[e])}}var r=t("../Vec2"),i=t("../Line");n.prototype.clone=function(){return new n(this.max,this.min)},n.prototype.toArray=function(){return this.min.toArray().concat(this.max.toArray())},n.prototype.clear=function(){this.max.neginf(),this.min.posinf()},n.prototype.digestPoint=function(t){this.max.max(t),this.min.min(t)},n.prototype.intersectsAABB=function(t){return this.min.x>t.max.x?!1:this.min.y>t.max.y?!1:t.min.x>this.max.x?!1:t.min.y>this.max.y?!1:!0},n.prototype.sub=function(t){return this.min.max(t.min),this.max.min(t.max),this},n.prototype.containsPoint=function(t){return t.x>this.max.x?!1:t.y>this.max.y?!1:t.x<this.min.x?!1:t.y<this.min.y?!1:!0},n.prototype.intersectsLine=function(t){var e=new i(this.max,new r(this.min.x,this.max.y));return e.intersectsLineSegment(t)?!0:(e=new i(this.max,new r(this.max.x,this.min.y)),e.intersectsLineSegment(t)?!0:(e=new i(this.min,new r(this.max.x,this.min.y)),e.intersectsLineSegment(t)?!0:(e=new i(this.min,new r(this.min.x,this.max.y)),e.intersectsLineSegment(t)?!0:!1)))},n.prototype.intersectsCircle=function(t){return t.containsPoint(this.max)?!0:t.containsPoint(this.min)?!0:t.containsPoint(new r(this.min.x,this.max.y))?!0:t.containsPoint(new r(this.max.x,this.min.y))?!0:!1},n.prototype.getSuspects=t("./suspects.js"),e.exports=n},{"../Line":37,"../Vec2":6,"./suspects.js":46}],35:[function(t,e){function n(t,e,n){if(t.equals(e)||e.equals(n)||n.equals(t))throw new Error("cannot create triangle when two points are the same");this.A=t,this.B=e,this.C=n,this.AB=new r(t,e),this.BC=new r(e,n),this.CA=new r(n,t),this.ABC=Math.lawCos(this.CA.length,this.AB.length,this.BC.length),this.BCA=Math.asin(Math.sin(this.ABC)*this.CA.length/this.AB.length),this.CAB=Math.asin(Math.sin(this.ABC)*this.BC.length/this.AB.length),this.perimiter=this.AB.length+this.BC.length+this.CA.length,this.partialArea=this.AB.cross+this.BC.cross+this.CA.cross,this.area=Math.abs(this.partialArea)}t("../Vec2");var r=t("../Line"),i=t("./intersects.js");for(var o in i)n.prototype[o]=i[o];var s=t("./questions.js");for(var o in s)n.prototype[o]=s[o];var a=t("./cacheable.js");n.prototype.getConcaveBisector=a.getConcaveBisector,e.exports=n},{"../Line":37,"../Vec2":6,"./cacheable.js":49,"./intersects.js":47,"./questions.js":48}],47:[function(t,e){var n={};n.hasPoint=function(t){var e=this.C.clone().sub(this.B),n=this.A.clone().sub(this.B),r=t.clone().sub(this.B),i=e.dot(e),o=e.dot(n),s=e.dot(r),a=n.dot(n),u=n.dot(r),f=1/(i*a-o*o),h=(a*s-o*u)*f,c=(i*u-o*s)*f;return h>=0&&c>=0&&1>h+c},e.exports=n},{}],48:[function(t,e){var n={},r=Math.pow(2,.5);n.isConcave=function(t,e,n){var r=new Line(t,n);return r.pointIsLeftOrTop(r.perpendicularBisector().A)==r.pointIsLeftOrTop(e)},n.anglePrimer=function(){return this.CA.length-r*(this.AB.length+this.BC.length)/2},n.isAcute=function(){return this.anglePrimer()<0},n.isObtuse=function(){return this.anglePrimer()>0},n.isRight=function(){return 0==this.anglePrimer()},n.equals=function(t){return this.A.equals(t.A)&&this.B.equals(t.B)&&this.C.equals(t.C)},n.epsilonEquals=function(t,e){return this.A.epsilonEquals(t.A,e)&&this.B.epsilonEquals(t.B,e)&&this.C.epsilonEquals(t.C,e)},n.equalShape=function(t){return this.area==t.area&&this.perimiter==t.perimiter},n.epsilonEqualShape=function(t,e){return Math.abs(this.area-t.area)/27<=e&&Math.abs(this.perimiter-t.perimiter)/9<=e},n.equalAngles=function(t){for(var e,n=["ABC","BCA","CAB"],r=3;r--;){for(e=3;e--&&this[n[r]]!=t[n[r]];);if(0>e)return!1}return!0},e.exports=n},{}],49:[function(t,e){var n={};n.getConcaveBisector=function(){return this.CA.perpendicularBisector()},n.AB=function(){return new Line(this.A,this.B)},n.BC=function(){return new Line(B,C)},n.CA=function(){return new Line(C,A)},n.ABC=function(){return Math.lawCos(this.CA.length,this.AB.length,this.BC.length)},n.BCA=function(){return Math.asin(Math.sin(this.ABC)*this.CA.length/this.AB.length)},n.CAB=function(){return Math.asin(Math.sin(this.ABC)*this.BC.length/this.AB.length)},n.perimiter=function(){return this.AB.length+this.BC.length+this.CA.length},n.partialArea=function(){return this.AB.cross+this.BC.cross+this.CA.cross},n.area=function(){return Math.abs(this.partialArea)},e.exports=n},{}],37:[function(t,e){function n(t,e){if(t.equals(e))throw new Error("cannot construct line when A == B");this.A=t,this.B=e,this.angledSlope=t.clone().sub(e).normalize(),this.slope=this.angledSlope.scale(Math.sign(this.angledSlope.x)||Math.sign(this.angledSlope.y)),this.inv_slope=0===this.slope.y?!1:this.slope.x/this.slope.y,this.true_slope=0===this.slope.x?!1:this.slope.y/this.slope.x,this.yint=this.true_slope!==!1?-this.true_slope*t.x+t.y:!1,this.xint=this.inv_slope!==!1?-this.inv_slope*t.y+t.x:!1,this.mid=t.clone().mid(e),this.max=t.clone().max(e),this.min=t.clone().min(e),this.length2=t.dist2(e),this.length=Math.sqrt(this.length2),this.cross=t.cross(e)}t("../Vec2"),n.prototype.toString=function(){return"limits:["+A+","+B+"],"+"intercepts:("+this.yint+","+thisxint+")"+"slope:("+this.slope+"), "};var r=t("./intersects.js");for(var i in r)n.prototype[i]=r[i];var o=t("./questions.js");for(var i in o)n.prototype[i]=o[i];n.prototype.perpendicularBisector=function(){var t=this.mid,e=this.A.clone().sub(t).swap(),r=e.clone();return e.y*=-1,r.x*=-1,e.add(t),r.add(t),new n(e,r)},n.prototype.getYValue=function(t){return this.slope.x?t*this.true_slope+this.yint:!1},n.prototype.getXValue=function(t){return this.slope.y?t*this.inv_slope+this.xint:!1},e.exports=n},{"../Vec2":6,"./intersects.js":50,"./questions.js":51}],51:[function(t,e){var n={};n.equals=function(t){return this.A.equals(t.A)&&this.B.equals(t.B)},n.epsilonEquals=function(t,e){return this.A.epsilonEquals(t.A,e)&&this.B.epsilonEquals(t.B,e)},n.equalSlope=function(t){return this.slope.equals(t.slope)&&this.xint?this.xint==t.xint:this.yint==t.yint},n.epsilonEqualSlope=function(t,e){return this.slope.epsilonEquals(t.slope,e)&&this.xint?Math.abs(this.xint-t.xint)<=e:Math.abs(this.yint-t.yint)<=e},n.equalMagnitude=function(t){return this.slope.equals(t.slope)&&this.length==t.length},n.epsilonEqualMagnitude=function(t,e){return this.slope.epsilonEquals(t.slope,e)&&Math.abs(this.length-t.length)<=e},e.exports=n},{}],46:[function(t,e){var n=t("../Line");e.exports=function(t){for(var e,r=[],i=[],o=t.length,s=o;o--;){var a=t[o],u=t[(o-1+s)%s];e=new this.constructor(a,u),this.intersectsAABB(e)&&(this.containsPoint(a.pos)?(i.push(a),r.push([a,u])):this.containsPoint(u.pos)?r.push([a,u]):(e=new n(a.pos,u.pos),this.intersectsLine(e)&&r.push([a,u])))}return{inside:i,lines:r}}},{"../Line":37}],50:[function(t,e){var n=t("../Vec2"),r={};r.intersectsLine=function(t){var e=this;if(e.slope.equals(t.slope))return!1;var r=new n;if(0===e.slope.x||0===t.slope.x){if(0===e.slope.y||0===t.slope.y)return new n(0===e.slope.x?e.xint:t.xint,0===e.slope.y?e.yint:t.yint);r.y=(e.xint-t.xint)/(t.inv_slope-e.inv_slope),r.x=e.inv_slope*r.y+e.xint}else r.x=(e.yint-t.yint)/(t.true_slope-e.true_slope),r.y=e.true_slope*r.x+e.yint;return r},r.intersectsLineSegment=function(t){var e=this.intersectsLine(t);return e?(new n).posinf().min(this.A).min(this.B).max(e).equals(e)?(new n).neginf().max(this.A).max(this.B).min(e).equals(e)?(new n).posinf().min(t.A).min(t.B).max(e).equals(e)?(new n).neginf().max(t.A).max(t.B).min(e).equals(e)?e:!1:!1:!1:!1:!1},r.pointIsLeftOrTop=function(t){return this.B.clone().sub(this.A).cross(t.clone().sub(this.A))<0},r.intersectsPoint=function(t){return this.slope.x?t.y==t.x*this.slope.slope()+this.yint:this.xint==t.x},r.segmentIntersectsPoint=function(t){return this.max.y<t.y?!1:this.min.y>t.y?!1:this.max.x<t.x?!1:this.min.x>t.x?!1:this.intersectsPoint(t)},e.exports=r},{"../Vec2":6}],43:[function(t,e){var n=t("../Vec2"),r={};r.getMidPoint=function(){for(var t=this.length,e=new n,r=this.length;r--;)e.add(this[r].clone().scale(1/t));return e},r.getArea=function(){var t=0;return this.forThree(function(e,n,r){t+=n.cross(r)}),t},r.getAABB=function(){for(var t=new n(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),e=new n(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),r=this.length;r--;)t.max(this[r]),e.min(this[r]);return{max:t,min:e}},e.exports=r},{"../Vec2":6}],44:[function(t,e){var n=t("../AABB"),r=t("../Line"),i={};i.intersectsLine=function(t,e){var i=new n(t.A,t.B),o=[];return this.forThree(function(e,s){if(t.A!=s&&t.B!=e&&e!=t.A){var a=new n(e,s);if(i.intersectsAABB(a)){var u=t.intersectsLine(new r(e,s));u&&({max:a.max.min(i.max),min:a.min.max(i.min)},i.containsPoint(u)&&o.push(u))}}},e),o},e.exports=i},{"../AABB":34,"../Line":37}],45:[function(t,e){"use strict";function n(t,e){for(var n=0;t>n;++n)if(!(e[n]<=e[n+t]))return!0;return!1}function r(t,e,r,i){for(var o=0,s=0,a=0,u=t.length;u>a;++a){var f=t[a];if(!n(e,f)){for(var h=0;2*e>h;++h)r[o++]=f[h];i[s++]=a}}return s}function i(t,e,n,i){var o=t.length,f=e.length;if(!(0>=o||0>=f)){var h=t[0].length>>>1;if(!(0>=h)){var c,l=s.mallocDouble(2*h*o),p=s.mallocInt32(o);if(o=r(t,h,l,p),o>0){if(1===h&&i)a.init(o),c=a.sweepComplete(h,n,0,o,l,p,0,o,l,p);else{var g=s.mallocDouble(2*h*f),y=s.mallocInt32(f);f=r(e,h,g,y),f>0&&(a.init(o+f),c=1===h?a.sweepBipartite(h,n,0,o,l,p,0,f,g,y):u(h,n,i,o,l,p,f,g,y),s.free(g),s.free(y))}s.free(l),s.free(p)}return c}}}function o(t,e,n){var r;switch(arguments.length){case 1:return r=[],i(t,t,function(t,e){r.push([t,e])},!0),r;case 2:if("function"==typeof e){var o=e;return i(t,t,o,!0)}return r=[],i(t,e,function(t,e){r.push([t,e])},!1),r;case 3:return i(t,e,n,!1);default:throw new Error("box-intersect: Invalid arguments")}}e.exports=o;var s=t("typedarray-pool"),a=t("./lib/sweep"),u=t("./lib/intersect")},{"./lib/intersect":53,"./lib/sweep":52,"typedarray-pool":54}],55:[function(t,e){"use strict";function n(t,e){4*c>=e?r(0,e-1,t):h(0,e-1,t)}function r(t,e,n){for(var r=2*(t+1),i=t+1;e>=i;++i){for(var o=n[r++],s=n[r++],a=i,u=r-2;a-->t;){var f=n[u-2],h=n[u-1];if(o>f)break;if(f===o&&s>h)break;n[u]=f,n[u+1]=h,u-=2}n[u]=o,n[u+1]=s}}function i(t,e,n){t*=2,e*=2;var r=n[t],i=n[t+1];n[t]=n[e],n[t+1]=n[e+1],n[e]=r,n[e+1]=i}function o(t,e,n){t*=2,e*=2,n[t]=n[e],n[t+1]=n[e+1]}function s(t,e,n,r){t*=2,e*=2,n*=2;var i=r[t],o=r[t+1];r[t]=r[e],r[t+1]=r[e+1],r[e]=r[n],r[e+1]=r[n+1],r[n]=i,r[n+1]=o}function a(t,e,n,r,i){t*=2,e*=2,i[t]=i[e],i[e]=n,i[t+1]=i[e+1],i[e+1]=r}function u(t,e,n){t*=2,e*=2;var r=n[t],i=n[e];return i>r?!1:r===i?n[t+1]>n[e+1]:!0}function f(t,e,n,r){t*=2;var i=r[t];return e>i?!0:i===e?r[t+1]<n:!1}function h(t,e,n){var l=0|(e-t+1)/6,p=t+l,g=e-l,y=t+e>>1,d=y-l,v=y+l,m=p,w=d,b=y,x=v,E=g,I=t+1,A=e-1,_=0;u(m,w,n)&&(_=m,m=w,w=_),u(x,E,n)&&(_=x,x=E,E=_),u(m,b,n)&&(_=m,m=b,b=_),u(w,b,n)&&(_=w,w=b,b=_),u(m,x,n)&&(_=m,m=x,x=_),u(b,x,n)&&(_=b,b=x,x=_),u(w,E,n)&&(_=w,w=E,E=_),u(w,b,n)&&(_=w,w=b,b=_),u(x,E,n)&&(_=x,x=E,E=_);for(var B=n[2*w],k=n[2*w+1],C=n[2*x],P=n[2*x+1],T=2*m,L=2*b,S=2*E,M=2*p,N=2*y,F=2*g,U=0;2>U;++U){var O=n[T+U],j=n[L+U],q=n[S+U];n[M+U]=O,n[N+U]=j,n[F+U]=q}o(d,t,n),o(v,e,n);for(var V=I;A>=V;++V)if(f(V,B,k,n))V!==I&&i(V,I,n),++I;else if(!f(V,C,P,n))for(;;){if(f(A,C,P,n)){f(A,B,k,n)?(s(V,I,A,n),++I,--A):(i(V,A,n),--A);break}if(--A<V)break}a(t,I-1,B,k,n),a(e,A+1,C,P,n),c>=I-2-t?r(t,I-2,n):h(t,I-2,n),c>=e-(A+2)?r(A+2,e,n):h(A+2,e,n),c>=A-I?r(I,A,n):h(I,A,n)}e.exports=n;var c=32},{}],56:[function(t,e,n){"use strict";function r(t,e,n){var r="bruteForce"+(t?"Red":"Blue")+(e?"Flip":"")+(n?"Full":""),i=["function ",r,"(",E.join(),"){","var ",f,"=2*",o,";"],u="for(var i="+h+","+g+"="+f+"*"+h+";"+"i<"+c+";"+"++i,"+g+"+="+f+"){"+"var x0="+l+"["+s+"+"+g+"],"+"x1="+l+"["+s+"+"+g+"+"+o+"],"+"xi="+p+"[i];",I="for(var j="+y+","+w+"="+f+"*"+y+";"+"j<"+d+";"+"++j,"+w+"+="+f+"){"+"var y0="+v+"["+s+"+"+w+"],"+(n?"y1="+v+"["+s+"+"+w+"+"+o+"],":"")+"yi="+m+"[j];";return t?i.push(u,x,":",I):i.push(I,x,":",u),n?i.push("if(y1<x0||x1<y0)continue;"):e?i.push("if(y0<=x0||x1<y0)continue;"):i.push("if(y0<x0||x1<y0)continue;"),i.push("for(var k="+s+"+1;k<"+o+";++k){"+"var r0="+l+"[k+"+g+"],"+"r1="+l+"[k+"+o+"+"+g+"],"+"b0="+v+"[k+"+w+"],"+"b1="+v+"[k+"+o+"+"+w+"];"+"if(r1<b0||b1<r0)continue "+x+";}"+"var "+b+"="+a+"("),e?i.push("yi,xi"):i.push("xi,yi"),i.push(");if("+b+"!==void 0)return "+b+";}}}"),{name:r,code:i.join("")}}function i(t){function e(e,n){var o=r(e,n,t);i.push(o.code),s.push("return "+o.name+"("+E.join()+");")}var n="bruteForce"+(t?"Full":"Partial"),i=[],o=E.slice();t||o.splice(3,0,u);var s=["function "+n+"("+o.join()+"){"];s.push("if("+c+"-"+h+">"+d+"-"+y+"){"),t?(e(!0,!1),s.push("}else{"),e(!1,!1)):(s.push("if("+u+"){"),e(!0,!0),s.push("}else{"),e(!0,!1),s.push("}}else{if("+u+"){"),e(!1,!0),s.push("}else{"),e(!1,!1),s.push("}")),s.push("}}return "+n);var a=i.join("")+s.join(""),f=new Function(a);return f()}var o="d",s="ax",a="vv",u="fp",f="es",h="rs",c="re",l="rb",p="ri",g="rp",y="bs",d="be",v="bb",m="bi",w="bp",b="rv",x="Q",E=[o,s,a,h,c,l,p,y,d,v,m];n.partial=i(!1),n.full=i(!0)},{}],57:[function(t,e){"use strict";function n(t,e){var n="abcdef".split("").concat(e),i=[];return t.indexOf("lo")>=0&&i.push("lo=e[k+n]"),t.indexOf("hi")>=0&&i.push("hi=e[k+o]"),n.push(r.replace("_",i.join()).replace("$",t)),Function.apply(void 0,n)}e.exports=n;var r="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m"},{}],52:[function(t,e){!function(){"use strict";function n(t){var e=h.nextPow2(t);g.length<e&&(f.free(g),g=f.mallocInt32(e)),y.length<e&&(f.free(y),y=f.mallocInt32(e)),d.length<e&&(f.free(d),d=f.mallocInt32(e)),v.length<e&&(f.free(v),v=f.mallocInt32(e)),m.length<e&&(f.free(m),m=f.mallocInt32(e)),w.length<e&&(f.free(w),w=f.mallocInt32(e));var n=8*e;b.length<n&&(f.free(b),b=f.mallocDouble(n))}function r(t,e,n,r){var i=e[r],o=t[n-1];t[i]=o,e[o]=i}function i(t,e,n,r){t[n]=r,e[r]=n}function o(t,e,n,o,s,a,u,f,h,p){for(var m=0,w=2*t,x=t-1,E=w-1,I=n;o>I;++I){var A=a[I],_=w*I;b[m++]=s[_+x],b[m++]=-(A+1),b[m++]=s[_+E],b[m++]=A}for(var I=u;f>I;++I){var A=p[I]+l,B=w*I;b[m++]=h[B+x],b[m++]=-A,b[m++]=h[B+E],b[m++]=A}var k=m>>>1;c(b,k);for(var C=0,P=0,I=0;k>I;++I){var T=0|b[2*I+1];if(T>=l)T=0|T-l,r(d,v,P--,T);else if(T>=0)r(g,y,C--,T);else if(-l>=T){T=0|-T-l;for(var L=0;C>L;++L){var S=e(g[L],T);if(void 0!==S)return S}i(d,v,P++,T)}else{T=0|-T-1;for(var L=0;P>L;++L){var S=e(T,d[L]);if(void 0!==S)return S}i(g,y,C++,T)}}}function s(t,e,n,o,s,a,u,f,h,l){for(var p=0,x=2*t,E=t-1,I=x-1,A=n;o>A;++A){var _=a[A]+1<<1,B=x*A;b[p++]=s[B+E],b[p++]=-_,b[p++]=s[B+I],b[p++]=_}for(var A=u;f>A;++A){var _=l[A]+1<<1,k=x*A;b[p++]=h[k+E],b[p++]=1|-_,b[p++]=h[k+I],b[p++]=1|_}var C=p>>>1;c(b,C);for(var P=0,T=0,L=0,A=0;C>A;++A){var S=0|b[2*A+1],M=1&S;if(C-1>A&&S>>1===b[2*A+3]>>1&&(M=2,A+=1),0>S){for(var N=-(S>>1)-1,F=0;L>F;++F){var U=e(m[F],N);if(void 0!==U)return U}if(0!==M)for(var F=0;P>F;++F){var U=e(g[F],N);if(void 0!==U)return U}if(1!==M)for(var F=0;T>F;++F){var U=e(d[F],N);if(void 0!==U)return U}0===M?i(g,y,P++,N):1===M?i(d,v,T++,N):2===M&&i(m,w,L++,N)}else{var N=(S>>1)-1;0===M?r(g,y,P--,N):1===M?r(d,v,T--,N):2===M&&r(m,w,L--,N)}}}function a(t,e,n,o,s,a,u,f,h,p,d,v){var m=0,w=2*t,x=e,E=e+t,I=1,A=1;o?A=l:I=l;for(var _=s;a>_;++_){var B=_+I,k=w*_;b[m++]=u[k+x],b[m++]=-B,b[m++]=u[k+E],b[m++]=B}for(var _=h;p>_;++_){var B=_+A,C=w*_;b[m++]=d[C+x],b[m++]=-B}var P=m>>>1;c(b,P);for(var T=0,_=0;P>_;++_){var L=0|b[2*_+1];if(0>L){var B=-L,S=!1;if(B>=l?(S=!o,B-=l):(S=!!o,B-=1),S)i(g,y,T++,B);else{var M=v[B],N=w*B,F=d[N+e+1],U=d[N+e+1+t];t:for(var O=0;T>O;++O){var j=g[O],q=w*j;if(!(U<u[q+e+1]||u[q+e+1+t]<F)){for(var V=e+2;t>V;++V)if(d[N+V+t]<u[q+V]||u[q+V+t]<d[N+V])continue t;var D,W=f[j];if(D=o?n(M,W):n(W,M),void 0!==D)return D}}}}else r(g,y,T--,L-I)}}function u(t,e,n,r,i,o,s,a,u,f,h){for(var p=0,y=2*t,d=e,v=e+t,m=r;i>m;++m){var w=m+l,x=y*m;b[p++]=o[x+d],b[p++]=-w,b[p++]=o[x+v],b[p++]=w}for(var m=a;u>m;++m){var w=m+1,E=y*m;b[p++]=f[E+d],b[p++]=-w}var I=p>>>1;c(b,I);for(var A=0,m=0;I>m;++m){var _=0|b[2*m+1];if(0>_){var w=-_;if(w>=l)g[A++]=w-l;else{w-=1;var B=h[w],k=y*w,C=f[k+e+1],P=f[k+e+1+t];t:for(var T=0;A>T;++T){var L=g[T],S=s[L];if(S===B)break;var M=y*L;if(!(P<o[M+e+1]||o[M+e+1+t]<C)){for(var N=e+2;t>N;++N)if(f[k+N+t]<o[M+N]||o[M+N+t]<f[k+N])continue t;var F=n(S,B);if(void 0!==F)return F}}}}else{for(var w=_-l,T=A-1;T>=0;--T)if(g[T]===w){for(var N=T+1;A>N;++N)g[N-1]=g[N];break}--A}}}e.exports={init:n,sweepBipartite:o,sweepComplete:s,scanBipartite:a,scanComplete:u};var f=t("typedarray-pool"),h=t("bit-twiddle"),c=t("./sort"),l=1<<28,p=1024,g=f.mallocInt32(p),y=f.mallocInt32(p),d=f.mallocInt32(p),v=f.mallocInt32(p),m=f.mallocInt32(p),w=f.mallocInt32(p),b=f.mallocDouble(8*p)}()},{"./sort":55,"bit-twiddle":58,"typedarray-pool":54}],53:[function(t,e){"use strict";function n(t,e){var n=0|8*u.log2(e+1)*(t+1),r=u.nextPow2(A*n);k.length<r&&(a.free(k),k=a.mallocInt32(r));var i=u.nextPow2(_*n);i>C&&(a.free(C),C=a.mallocDouble(i))}function r(t,e,n,r,i,o,s,a,u){var f=A*t;k[f]=e,k[f+1]=n,k[f+2]=r,k[f+3]=i,k[f+4]=o,k[f+5]=s;var h=_*t;C[h]=a,C[h+1]=u}function i(t,e,n,r,i,o,s,a,u,f,h){var c=2*t,l=u*c,p=f[l+e];t:for(var g=i,y=i*c;o>g;++g,y+=c){var d=s[y+e],v=s[y+e+t];if(!(d>p||p>v||r&&p===d)){for(var m=a[g],w=e+1;t>w;++w){var d=s[y+w],v=s[y+w+t],b=f[l+w],x=f[l+w+t];if(b>v||d>x)continue t}var E;if(E=r?n(h,m):n(m,h),void 0!==E)return E}}}function o(t,e,n,r,i,o,s,a,u,f){var h=2*t,c=a*h,l=u[c+e];t:for(var p=r,g=r*h;i>p;++p,g+=h){var y=s[p];if(y!==f){var d=o[g+e],v=o[g+e+t];if(!(d>l||l>v)){for(var m=e+1;t>m;++m){var d=o[g+m],v=o[g+m+t],w=u[c+m],b=u[c+m+t];if(w>v||d>b)continue t}var x=n(y,f);if(void 0!==x)return x}}}}function s(t,e,s,a,u,f,g,B,P){n(t,a+g);var T,L=0,S=2*t;for(r(L++,0,0,a,0,g,s?16:0,-1/0,1/0),s||r(L++,0,0,g,0,a,1,-1/0,1/0);L>0;){L-=1;var M=L*A,N=k[M],F=k[M+1],U=k[M+2],O=k[M+3],j=k[M+4],q=k[M+5],V=L*_,D=C[V],W=C[V+1],Y=1&q,R=!!(16&q),G=u,z=f,X=B,J=P;if(Y&&(G=B,z=P,X=u,J=f),!(2&q&&(U=b(t,N,F,U,G,z,W),F>=U)||4&q&&(F=x(t,N,F,U,G,z,D),F>=U))){var $=U-F,Z=j-O;if(R){if(v>t*$*($+Z)){if(T=l.scanComplete(t,N,e,F,U,G,z,O,j,X,J),void 0!==T)return T;continue}}else{if(t*Math.min($,Z)<y){if(T=h(t,N,e,Y,F,U,G,z,O,j,X,J),void 0!==T)return T;continue}if(d>t*$*Z){if(T=l.scanBipartite(t,N,e,Y,F,U,G,z,O,j,X,J),void 0!==T)return T;continue}}var Q=m(t,N,F,U,G,z,D,W);if(Q>F)if(y>t*(Q-F)){if(T=c(t,N+1,e,F,Q,G,z,O,j,X,J),void 0!==T)return T}else if(N===t-2){if(T=Y?l.sweepBipartite(t,e,O,j,X,J,F,Q,G,z):l.sweepBipartite(t,e,F,Q,G,z,O,j,X,J),void 0!==T)return T}else r(L++,N+1,F,Q,O,j,Y,-1/0,1/0),r(L++,N+1,O,j,F,Q,1^Y,-1/0,1/0);if(U>Q){var H=p(t,N,O,j,X,J),K=X[S*H+N],te=w(t,N,H,j,X,J,K);if(j>te&&r(L++,N,Q,U,te,j,(4|Y)+(R?16:0),K,W),H>O&&r(L++,N,Q,U,O,H,(2|Y)+(R?16:0),D,K),H+1===te){if(T=R?o(t,N,e,Q,U,G,z,H,X,J[H]):i(t,N,e,Y,Q,U,G,z,H,X,J[H]),void 0!==T)return T}else if(te>H){var ee;if(R){if(ee=E(t,N,Q,U,G,z,K),ee>Q){var ne=w(t,N,Q,ee,G,z,K);if(N===t-2){if(ne>Q&&(T=l.sweepComplete(t,e,Q,ne,G,z,H,te,X,J),void 0!==T))return T;if(ee>ne&&(T=l.sweepBipartite(t,e,ne,ee,G,z,H,te,X,J),void 0!==T))return T}else ne>Q&&r(L++,N+1,Q,ne,H,te,16,-1/0,1/0),ee>ne&&(r(L++,N+1,ne,ee,H,te,0,-1/0,1/0),r(L++,N+1,H,te,ne,ee,1,-1/0,1/0))}}else ee=Y?I(t,N,Q,U,G,z,K):E(t,N,Q,U,G,z,K),ee>Q&&(N===t-2?T=Y?l.sweepBipartite(t,e,H,te,X,J,Q,ee,G,z):l.sweepBipartite(t,e,Q,ee,G,z,H,te,X,J):(r(L++,N+1,Q,ee,H,te,Y,-1/0,1/0),r(L++,N+1,H,te,Q,ee,1^Y,-1/0,1/0)))}}}}}e.exports=s;var a=t("typedarray-pool"),u=t("bit-twiddle"),f=t("./brute"),h=f.partial,c=f.full,l=t("./sweep"),p=t("./median"),g=t("./partition"),y=128,d=1<<22,v=1<<22,m=g("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),w=g("lo===p0",["p0"]),b=g("lo<p0",["p0"]),x=g("hi<=p0",["p0"]),E=g("lo<=p0&&p0<=hi",["p0"]),I=g("lo<p0&&p0<=hi",["p0"]),A=6,_=2,B=1024,k=a.mallocInt32(B),C=a.mallocDouble(B)},{"./brute":56,"./median":59,"./partition":57,"./sweep":52,"bit-twiddle":58,"typedarray-pool":54}],59:[function(t,e){"use strict";function n(t,e,n,r,i,o){for(var s=2*t,a=s*(n+1)+e,u=n+1;r>u;++u,a+=s)for(var f=i[a],h=u,c=s*(u-1);h>n&&i[c+e]>f;--h,c-=s){for(var l=c,p=c+s,g=0;s>g;++g,++l,++p){var y=i[l];i[l]=i[p],i[p]=y}var d=o[h];o[h]=o[h-1],o[h-1]=d}}function r(t,e,r,i,a,u){if(r+1>=i)return r;for(var f=r,h=i,c=i+r>>>1,l=2*t,p=c,g=a[l*c+e];h>f;){if(s>h-f){n(t,e,f,h,a,u),g=a[l*c+e];break}var y=h-f,d=0|Math.random()*y+f,v=a[l*d+e],m=0|Math.random()*y+f,w=a[l*m+e],b=0|Math.random()*y+f,x=a[l*b+e];w>=v?x>=w?(p=m,g=w):v>=x?(p=d,g=v):(p=b,g=x):w>=x?(p=m,g=w):x>=v?(p=d,g=v):(p=b,g=x);for(var E=l*(h-1),I=l*p,A=0;l>A;++A,++E,++I){var _=a[E];a[E]=a[I],a[I]=_}var B=u[h-1];u[h-1]=u[p],u[p]=B,p=o(t,e,f,h-1,a,u,g);for(var E=l*(h-1),I=l*p,A=0;l>A;++A,++E,++I){var _=a[E];a[E]=a[I],a[I]=_}var B=u[h-1];if(u[h-1]=u[p],u[p]=B,p>c){for(h=p-1;h>f&&a[l*(h-1)+e]===g;)h-=1;h+=1}else{if(!(c>p))break;for(f=p+1;h>f&&a[l*f+e]===g;)f+=1}}return o(t,e,r,c,a,u,a[l*c+e])}e.exports=r;var i=t("./partition"),o=i("lo<p0",["p0"]),s=8},{"./partition":57}],60:[function(t,e){"use strict";function n(t,e,r){var i=0|t[r];if(0>=i)return[];var o,s=new Array(i);if(r===t.length-1)for(o=0;i>o;++o)s[o]=e;else for(o=0;i>o;++o)s[o]=n(t,e,r+1);return s}function r(t,e){var n,r;for(n=new Array(t),r=0;t>r;++r)n[r]=e;return n}function i(t,e){switch("undefined"==typeof e&&(e=0),typeof t){case"number":if(t>0)return r(0|t,e);break;case"object":if("number"==typeof t.length)return n(t,e,0)}return[]}e.exports=i},{}],58:[function(t,e,n){"use strict";"use restrict";function r(t){var e=32;return t&=-t,t&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}var i=32;n.INT_BITS=i,n.INT_MAX=2147483647,n.INT_MIN=-1<<i-1,n.sign=function(t){return(t>0)-(0>t)},n.abs=function(t){var e=t>>i-1;return(t^e)-e},n.min=function(t,e){return e^(t^e)&-(e>t)},n.max=function(t,e){return t^(t^e)&-(e>t)},n.isPow2=function(t){return!(t&t-1||!t)},n.log2=function(t){var e,n;return e=(t>65535)<<4,t>>>=e,n=(t>255)<<3,t>>>=n,e|=n,n=(t>15)<<2,t>>>=n,e|=n,n=(t>3)<<1,t>>>=n,e|=n,e|t>>1},n.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},n.popCount=function(t){return t-=1431655765&t>>>1,t=(858993459&t)+(858993459&t>>>2),16843009*(252645135&t+(t>>>4))>>>24},n.countTrailingZeros=r,n.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1},n.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t-(t>>>1)},n.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,t&=15,1&27030>>>t};var o=new Array(256);!function(t){for(var e=0;256>e;++e){var n=e,r=e,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;t[e]=255&r<<i}}(o),n.reverse=function(t){return o[255&t]<<24|o[255&t>>>8]<<16|o[255&t>>>16]<<8|o[255&t>>>24]},n.interleave2=function(t,e){return t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1},n.deinterleave2=function(t,e){return t=1431655765&t>>>e,t=858993459&(t|t>>>1),t=252645135&(t|t>>>2),t=16711935&(t|t>>>4),t=65535&(t|t>>>16),t<<16>>16},n.interleave3=function(t,e,n){return t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t|=e<<1,n&=1023,n=4278190335&(n|n<<16),n=251719695&(n|n<<8),n=3272356035&(n|n<<4),n=1227133513&(n|n<<2),t|n<<2},n.deinterleave3=function(t,e){return t=1227133513&t>>>e,t=3272356035&(t|t>>>2),t=251719695&(t|t>>>4),t=4278190335&(t|t>>>8),t=1023&(t|t>>>16),t<<22>>22},n.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>r(t)+1}},{}],61:[function(t,e){t=function(t,e,n,r){function i(r){if(!n[r]){if(!e[r]){if(t)return t(r);throw new Error("Cannot find module '"+r+"'")}var o=n[r]={exports:{}};e[r][0](function(t){var n=e[r][1][t];return i(n?n:t)},o,o.exports)}return n[r].exports}for(var o=0;o<r.length;o++)i(r[o]);return i}("undefined"!=typeof t&&t,{1:[function(t,e,n){n.readIEEE754=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,f=u>>1,h=-7,c=n?0:i-1,l=n?1:-1,p=t[e+c];for(c+=l,o=p&(1<<-h)-1,p>>=-h,h+=a;h>0;o=256*o+t[e+c],c+=l,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=r;h>0;s=256*s+t[e+c],c+=l,h-=8);if(0===o)o=1-f;else{if(o===u)return s?0/0:1/0*(p?-1:1);s+=Math.pow(2,r),o-=f}return(p?-1:1)*s*Math.pow(2,o-r)},n.writeIEEE754=function(t,e,n,r,i,o){var s,a,u,f=8*o-i-1,h=(1<<f)-1,c=h>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?o-1:0,g=r?-1:1,y=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||1/0===e?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+c>=1?l/u:l*Math.pow(2,1-c),e*u>=2&&(s++,u/=2),s+c>=h?(a=0,s=h):s+c>=1?(a=(e*u-1)*Math.pow(2,i),s+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,i),s=0));i>=8;t[n+p]=255&a,p+=g,a/=256,i-=8);for(s=s<<i|a,f+=i;f>0;t[n+p]=255&s,p+=g,s/=256,f-=8);t[n+p-g]|=128*y}},{}],2:[function(t,e){!function(){function n(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}function r(t,e){return void 0===e?""+e:"number"!=typeof e||!isNaN(e)&&isFinite(e)?"function"==typeof e||e instanceof RegExp?e.toString():e:e.toString()}function i(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function o(t,e,n,r,i){throw new d.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:i})}function s(t,e){t||o(t,!0,e,"==",d.ok)}function a(t,e){if(t===e)return!0;if(g.isBuffer(t)&&g.isBuffer(e)){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():"object"!=typeof t&&"object"!=typeof e?t==e:h(t,e)}function u(t){return null===t||void 0===t}function f(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function h(t,e){if(u(t)||u(e))return!1;if(t.prototype!==e.prototype)return!1;if(f(t))return f(e)?(t=y.call(t),e=y.call(e),a(t,e)):!1;try{var r,i,o=n(t),s=n(e)}catch(h){return!1}if(o.length!=s.length)return!1;for(o.sort(),s.sort(),i=o.length-1;i>=0;i--)if(o[i]!=s[i])return!1;for(i=o.length-1;i>=0;i--)if(r=o[i],!a(t[r],e[r]))return!1;return!0}function c(t,e){return t&&e?e instanceof RegExp?e.test(t):t instanceof e?!0:e.call({},t)===!0?!0:!1:!1}function l(t,e,n,r){var i;"string"==typeof n&&(r=n,n=null);try{e()}catch(s){i=s}if(r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!i&&o("Missing expected exception"+r),!t&&c(i,n)&&o("Got unwanted exception"+r),t&&i&&n&&!c(i,n)||!t&&i)throw i}var p=t("util"),g=t("buffer").Buffer,y=Array.prototype.slice,d=e.exports=s;d.AssertionError=function(t){this.name="AssertionError",this.message=t.message,this.actual=t.actual,this.expected=t.expected,this.operator=t.operator;var e=t.stackStartFunction||o;Error.captureStackTrace&&Error.captureStackTrace(this,e)},p.inherits(d.AssertionError,Error),d.AssertionError.prototype.toString=function(){return this.message?[this.name+":",this.message].join(" "):[this.name+":",i(JSON.stringify(this.actual,r),128),this.operator,i(JSON.stringify(this.expected,r),128)].join(" ")},d.AssertionError.__proto__=Error.prototype,d.fail=o,d.ok=s,d.equal=function(t,e,n){t!=e&&o(t,e,n,"==",d.equal)},d.notEqual=function(t,e,n){t==e&&o(t,e,n,"!=",d.notEqual)},d.deepEqual=function(t,e,n){a(t,e)||o(t,e,n,"deepEqual",d.deepEqual)},d.notDeepEqual=function(t,e,n){a(t,e)&&o(t,e,n,"notDeepEqual",d.notDeepEqual)},d.strictEqual=function(t,e,n){t!==e&&o(t,e,n,"===",d.strictEqual)},d.notStrictEqual=function(t,e,n){t===e&&o(t,e,n,"!==",d.notStrictEqual)},d.throws=function(){l.apply(this,[!0].concat(y.call(arguments)))
},d.doesNotThrow=function(){l.apply(this,[!1].concat(y.call(arguments)))},d.ifError=function(t){if(t)throw t}}()},{util:3,buffer:4}],"buffer-browserify":[function(t,e){e.exports=t("q9TxCC")},{}],q9TxCC:[function(t,e,n){!function(){function e(t){this.length=t}function r(t){return 16>t?"0"+t.toString(16):t.toString(16)}function i(t){for(var e=[],n=0;n<t.length;n++)if(t.charCodeAt(n)<=127)e.push(t.charCodeAt(n));else for(var r=encodeURIComponent(t.charAt(n)).substr(1).split("%"),i=0;i<r.length;i++)e.push(parseInt(r[i],16));return e}function o(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function s(e){return t("base64-js").toByteArray(e)}function a(t,e,n,r){for(var i=0;r>i&&!(i+n>=e.length||i>=t.length);)e[i+n]=t[i],i++;return i}function u(t){try{return decodeURIComponent(t)}catch(e){return String.fromCharCode(65533)}}function f(t){return t=~~Math.ceil(+t),0>t?0:t}function h(t,n,r){if(!(this instanceof h))return new h(t,n,r);var i;if("number"==typeof r)this.length=f(n),this.parent=t,this.offset=r;else{switch(i=typeof t){case"number":this.length=f(t);break;case"string":this.length=h.byteLength(t,n);break;case"object":this.length=f(t.length);break;default:throw new Error("First argument needs to be a number, array or string.")}if(this.length>h.poolSize?(this.parent=new e(this.length),this.offset=0):((!P||P.length-P.used<this.length)&&l(),this.parent=P,this.offset=P.used,P.used+=this.length),c(t))for(var o=0;o<this.length;o++)this.parent[o+this.offset]=t instanceof h?t.readUInt8(o):t[o];else"string"==i&&(this.length=this.write(t,0,n))}}function c(t){return Array.isArray(t)||h.isBuffer(t)||t&&"object"==typeof t&&"number"==typeof t.length}function l(){P=new e(h.poolSize),P.used=0}function p(t,e,n,r){var i=0;return r||(C.ok("boolean"==typeof n,"missing or invalid endian"),C.ok(void 0!==e&&null!==e,"missing offset"),C.ok(e+1<t.length,"Trying to read beyond buffer length")),e>=t.length?0:(n?(i=t.parent[t.offset+e]<<8,e+1<t.length&&(i|=t.parent[t.offset+e+1])):(i=t.parent[t.offset+e],e+1<t.length&&(i|=t.parent[t.offset+e+1]<<8)),i)}function g(t,e,n,r){var i=0;return r||(C.ok("boolean"==typeof n,"missing or invalid endian"),C.ok(void 0!==e&&null!==e,"missing offset"),C.ok(e+3<t.length,"Trying to read beyond buffer length")),e>=t.length?0:(n?(e+1<t.length&&(i=t.parent[t.offset+e+1]<<16),e+2<t.length&&(i|=t.parent[t.offset+e+2]<<8),e+3<t.length&&(i|=t.parent[t.offset+e+3]),i+=t.parent[t.offset+e]<<24>>>0):(e+2<t.length&&(i=t.parent[t.offset+e+2]<<16),e+1<t.length&&(i|=t.parent[t.offset+e+1]<<8),i|=t.parent[t.offset+e],e+3<t.length&&(i+=t.parent[t.offset+e+3]<<24>>>0)),i)}function y(t,e,n,r){var i,o;return r||(C.ok("boolean"==typeof n,"missing or invalid endian"),C.ok(void 0!==e&&null!==e,"missing offset"),C.ok(e+1<t.length,"Trying to read beyond buffer length")),o=p(t,e,n,r),i=32768&o,i?-1*(65535-o+1):o}function d(t,e,n,r){var i,o;return r||(C.ok("boolean"==typeof n,"missing or invalid endian"),C.ok(void 0!==e&&null!==e,"missing offset"),C.ok(e+3<t.length,"Trying to read beyond buffer length")),o=g(t,e,n,r),i=2147483648&o,i?-1*(4294967295-o+1):o}function v(e,n,r,i){return i||(C.ok("boolean"==typeof r,"missing or invalid endian"),C.ok(n+3<e.length,"Trying to read beyond buffer length")),t("./buffer_ieee754").readIEEE754(e,n,r,23,4)}function m(e,n,r,i){return i||(C.ok("boolean"==typeof r,"missing or invalid endian"),C.ok(n+7<e.length,"Trying to read beyond buffer length")),t("./buffer_ieee754").readIEEE754(e,n,r,52,8)}function w(t,e){C.ok("number"==typeof t,"cannot write a non-number as a number"),C.ok(t>=0,"specified a negative value for writing an unsigned value"),C.ok(e>=t,"value is larger than maximum value for type"),C.ok(Math.floor(t)===t,"value has a fractional component")}function b(t,e,n,r,i){i||(C.ok(void 0!==e&&null!==e,"missing value"),C.ok("boolean"==typeof r,"missing or invalid endian"),C.ok(void 0!==n&&null!==n,"missing offset"),C.ok(n+1<t.length,"trying to write beyond buffer length"),w(e,65535));for(var o=0;o<Math.min(t.length-n,2);o++)t.parent[t.offset+n+o]=(e&255<<8*(r?1-o:o))>>>8*(r?1-o:o)}function x(t,e,n,r,i){i||(C.ok(void 0!==e&&null!==e,"missing value"),C.ok("boolean"==typeof r,"missing or invalid endian"),C.ok(void 0!==n&&null!==n,"missing offset"),C.ok(n+3<t.length,"trying to write beyond buffer length"),w(e,4294967295));for(var o=0;o<Math.min(t.length-n,4);o++)t.parent[t.offset+n+o]=255&e>>>8*(r?3-o:o)}function E(t,e,n){C.ok("number"==typeof t,"cannot write a non-number as a number"),C.ok(e>=t,"value larger than maximum allowed value"),C.ok(t>=n,"value smaller than minimum allowed value"),C.ok(Math.floor(t)===t,"value has a fractional component")}function I(t,e,n){C.ok("number"==typeof t,"cannot write a non-number as a number"),C.ok(e>=t,"value larger than maximum allowed value"),C.ok(t>=n,"value smaller than minimum allowed value")}function A(t,e,n,r,i){i||(C.ok(void 0!==e&&null!==e,"missing value"),C.ok("boolean"==typeof r,"missing or invalid endian"),C.ok(void 0!==n&&null!==n,"missing offset"),C.ok(n+1<t.length,"Trying to write beyond buffer length"),E(e,32767,-32768)),e>=0?b(t,e,n,r,i):b(t,65535+e+1,n,r,i)}function _(t,e,n,r,i){i||(C.ok(void 0!==e&&null!==e,"missing value"),C.ok("boolean"==typeof r,"missing or invalid endian"),C.ok(void 0!==n&&null!==n,"missing offset"),C.ok(n+3<t.length,"Trying to write beyond buffer length"),E(e,2147483647,-2147483648)),e>=0?x(t,e,n,r,i):x(t,4294967295+e+1,n,r,i)}function B(e,n,r,i,o){o||(C.ok(void 0!==n&&null!==n,"missing value"),C.ok("boolean"==typeof i,"missing or invalid endian"),C.ok(void 0!==r&&null!==r,"missing offset"),C.ok(r+3<e.length,"Trying to write beyond buffer length"),I(n,3.4028234663852886e38,-3.4028234663852886e38)),t("./buffer_ieee754").writeIEEE754(e,n,r,i,23,4)}function k(e,n,r,i,o){o||(C.ok(void 0!==n&&null!==n,"missing value"),C.ok("boolean"==typeof i,"missing or invalid endian"),C.ok(void 0!==r&&null!==r,"missing offset"),C.ok(r+7<e.length,"Trying to write beyond buffer length"),I(n,1.7976931348623157e308,-1.7976931348623157e308)),t("./buffer_ieee754").writeIEEE754(e,n,r,i,52,8)}var C=t("assert");n.INSPECT_MAX_BYTES=50,e.byteLength=function(t,e){switch(e||"utf8"){case"hex":return t.length/2;case"utf8":case"utf-8":return i(t).length;case"ascii":case"binary":return t.length;case"base64":return s(t).length;default:throw new Error("Unknown encoding")}},e.prototype.utf8Write=function(t,n,r){return e._charsWritten=a(i(t),this,n,r)},e.prototype.asciiWrite=function(t,n,r){return e._charsWritten=a(o(t),this,n,r)},e.prototype.binaryWrite=e.prototype.asciiWrite,e.prototype.base64Write=function(t,n,r){return e._charsWritten=a(s(t),this,n,r)},e.prototype.base64Slice=function(){var e=Array.prototype.slice.apply(this,arguments);return t("base64-js").fromByteArray(e)},e.prototype.utf8Slice=function(){for(var t=Array.prototype.slice.apply(this,arguments),e="",n="",r=0;r<t.length;)t[r]<=127?(e+=u(n)+String.fromCharCode(t[r]),n=""):n+="%"+t[r].toString(16),r++;return e+u(n)},e.prototype.asciiSlice=function(){for(var t=Array.prototype.slice.apply(this,arguments),e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},e.prototype.binarySlice=e.prototype.asciiSlice,e.prototype.inspect=function(){for(var t=[],e=this.length,i=0;e>i;i++)if(t[i]=r(this[i]),i==n.INSPECT_MAX_BYTES){t[i+1]="...";break}return"<SlowBuffer "+t.join(" ")+">"},e.prototype.hexSlice=function(t,e){var n=this.length;(!t||0>t)&&(t=0),(!e||0>e||e>n)&&(e=n);for(var i="",o=t;e>o;o++)i+=r(this[o]);return i},e.prototype.toString=function(t,e,n){if(t=String(t||"utf8").toLowerCase(),e=+e||0,"undefined"==typeof n&&(n=this.length),+n==e)return"";switch(t){case"hex":return this.hexSlice(e,n);case"utf8":case"utf-8":return this.utf8Slice(e,n);case"ascii":return this.asciiSlice(e,n);case"binary":return this.binarySlice(e,n);case"base64":return this.base64Slice(e,n);case"ucs2":case"ucs-2":return this.ucs2Slice(e,n);default:throw new Error("Unknown encoding")}},e.prototype.hexWrite=function(t,n,r){n=+n||0;var i=this.length-n;r?(r=+r,r>i&&(r=i)):r=i;var o=t.length;if(o%2)throw new Error("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;r>s;s++){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");this[n+s]=a}return e._charsWritten=2*s,s},e.prototype.write=function(t,e,n,r){if(isFinite(e))isFinite(n)||(r=n,n=void 0);else{var i=r;r=e,e=n,n=i}e=+e||0;var o=this.length-e;switch(n?(n=+n,n>o&&(n=o)):n=o,r=String(r||"utf8").toLowerCase()){case"hex":return this.hexWrite(t,e,n);case"utf8":case"utf-8":return this.utf8Write(t,e,n);case"ascii":return this.asciiWrite(t,e,n);case"binary":return this.binaryWrite(t,e,n);case"base64":return this.base64Write(t,e,n);case"ucs2":case"ucs-2":return this.ucs2Write(t,e,n);default:throw new Error("Unknown encoding")}},e.prototype.slice=function(t,e){if(void 0===e&&(e=this.length),e>this.length)throw new Error("oob");if(t>e)throw new Error("oob");return new h(this,e-t,+t)},e.prototype.copy=function(t,e,n,r){for(var i=[],o=n;r>o;o++)C.ok("undefined"!=typeof this[o],"copying undefined buffer bytes!"),i.push(this[o]);for(var o=e;o<e+i.length;o++)t[o]=i[o-e]},e.prototype.fill=function(t,e,n){if(n>this.length)throw new Error("oob");if(e>n)throw new Error("oob");for(var r=e;n>r;r++)this[r]=t},n.SlowBuffer=e,n.Buffer=h,h.poolSize=8192;var P;h.isBuffer=function(t){return t instanceof h||t instanceof e},h.concat=function(t,e){if(!Array.isArray(t))throw new Error("Usage: Buffer.concat(list, [totalLength])\n       list should be an Array.");if(0===t.length)return new h(0);if(1===t.length)return t[0];if("number"!=typeof e){e=0;for(var n=0;n<t.length;n++){var r=t[n];e+=r.length}}for(var i=new h(e),o=0,n=0;n<t.length;n++){var r=t[n];r.copy(i,o),o+=r.length}return i},h.prototype.inspect=function(){for(var t=[],e=this.length,i=0;e>i;i++)if(t[i]=r(this.parent[i+this.offset]),i==n.INSPECT_MAX_BYTES){t[i+1]="...";break}return"<Buffer "+t.join(" ")+">"},h.prototype.get=function(t){if(0>t||t>=this.length)throw new Error("oob");return this.parent[this.offset+t]},h.prototype.set=function(t,e){if(0>t||t>=this.length)throw new Error("oob");return this.parent[this.offset+t]=e},h.prototype.write=function(t,n,r,i){if(isFinite(n))isFinite(r)||(i=r,r=void 0);else{var o=i;i=n,n=r,r=o}n=+n||0;var s=this.length-n;r?(r=+r,r>s&&(r=s)):r=s,i=String(i||"utf8").toLowerCase();var a;switch(i){case"hex":a=this.parent.hexWrite(t,this.offset+n,r);break;case"utf8":case"utf-8":a=this.parent.utf8Write(t,this.offset+n,r);break;case"ascii":a=this.parent.asciiWrite(t,this.offset+n,r);break;case"binary":a=this.parent.binaryWrite(t,this.offset+n,r);break;case"base64":a=this.parent.base64Write(t,this.offset+n,r);break;case"ucs2":case"ucs-2":a=this.parent.ucs2Write(t,this.offset+n,r);break;default:throw new Error("Unknown encoding")}return h._charsWritten=e._charsWritten,a},h.prototype.toString=function(t,e,n){switch(t=String(t||"utf8").toLowerCase(),"undefined"==typeof e||0>e?e=0:e>this.length&&(e=this.length),"undefined"==typeof n||n>this.length?n=this.length:0>n&&(n=0),e+=this.offset,n+=this.offset,t){case"hex":return this.parent.hexSlice(e,n);case"utf8":case"utf-8":return this.parent.utf8Slice(e,n);case"ascii":return this.parent.asciiSlice(e,n);case"binary":return this.parent.binarySlice(e,n);case"base64":return this.parent.base64Slice(e,n);case"ucs2":case"ucs-2":return this.parent.ucs2Slice(e,n);default:throw new Error("Unknown encoding")}},h.byteLength=e.byteLength,h.prototype.fill=function(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),"string"==typeof t&&(t=t.charCodeAt(0)),"number"!=typeof t||isNaN(t))throw new Error("value is not a number");if(e>n)throw new Error("end < start");if(n===e)return 0;if(0==this.length)return 0;if(0>e||e>=this.length)throw new Error("start out of bounds");if(0>n||n>this.length)throw new Error("end out of bounds");return this.parent.fill(t,e+this.offset,n+this.offset)},h.prototype.copy=function(t,e,n,r){var i=this;if(n||(n=0),r||(r=this.length),e||(e=0),n>r)throw new Error("sourceEnd < sourceStart");if(r===n)return 0;if(0==t.length||0==i.length)return 0;if(0>e||e>=t.length)throw new Error("targetStart out of bounds");if(0>n||n>=i.length)throw new Error("sourceStart out of bounds");if(0>r||r>i.length)throw new Error("sourceEnd out of bounds");return r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n),this.parent.copy(t.parent,e+t.offset,n+this.offset,r+this.offset)},h.prototype.slice=function(t,e){if(void 0===e&&(e=this.length),e>this.length)throw new Error("oob");if(t>e)throw new Error("oob");return new h(this.parent,e-t,+t+this.offset)},h.prototype.utf8Slice=function(t,e){return this.toString("utf8",t,e)},h.prototype.binarySlice=function(t,e){return this.toString("binary",t,e)},h.prototype.asciiSlice=function(t,e){return this.toString("ascii",t,e)},h.prototype.utf8Write=function(t,e){return this.write(t,e,"utf8")},h.prototype.binaryWrite=function(t,e){return this.write(t,e,"binary")},h.prototype.asciiWrite=function(t,e){return this.write(t,e,"ascii")},h.prototype.readUInt8=function(t,e){var n=this;return e||(C.ok(void 0!==t&&null!==t,"missing offset"),C.ok(t<n.length,"Trying to read beyond buffer length")),t>=n.length?void 0:n.parent[n.offset+t]},h.prototype.readUInt16LE=function(t,e){return p(this,t,!1,e)},h.prototype.readUInt16BE=function(t,e){return p(this,t,!0,e)},h.prototype.readUInt32LE=function(t,e){return g(this,t,!1,e)},h.prototype.readUInt32BE=function(t,e){return g(this,t,!0,e)},h.prototype.readInt8=function(t,e){var n,r=this;return e||(C.ok(void 0!==t&&null!==t,"missing offset"),C.ok(t<r.length,"Trying to read beyond buffer length")),t>=r.length?void 0:(n=128&r.parent[r.offset+t],n?-1*(255-r.parent[r.offset+t]+1):r.parent[r.offset+t])},h.prototype.readInt16LE=function(t,e){return y(this,t,!1,e)},h.prototype.readInt16BE=function(t,e){return y(this,t,!0,e)},h.prototype.readInt32LE=function(t,e){return d(this,t,!1,e)},h.prototype.readInt32BE=function(t,e){return d(this,t,!0,e)},h.prototype.readFloatLE=function(t,e){return v(this,t,!1,e)},h.prototype.readFloatBE=function(t,e){return v(this,t,!0,e)},h.prototype.readDoubleLE=function(t,e){return m(this,t,!1,e)},h.prototype.readDoubleBE=function(t,e){return m(this,t,!0,e)},h.prototype.writeUInt8=function(t,e,n){var r=this;n||(C.ok(void 0!==t&&null!==t,"missing value"),C.ok(void 0!==e&&null!==e,"missing offset"),C.ok(e<r.length,"trying to write beyond buffer length"),w(t,255)),e<r.length&&(r.parent[r.offset+e]=t)},h.prototype.writeUInt16LE=function(t,e,n){b(this,t,e,!1,n)},h.prototype.writeUInt16BE=function(t,e,n){b(this,t,e,!0,n)},h.prototype.writeUInt32LE=function(t,e,n){x(this,t,e,!1,n)},h.prototype.writeUInt32BE=function(t,e,n){x(this,t,e,!0,n)},h.prototype.writeInt8=function(t,e,n){var r=this;n||(C.ok(void 0!==t&&null!==t,"missing value"),C.ok(void 0!==e&&null!==e,"missing offset"),C.ok(e<r.length,"Trying to write beyond buffer length"),E(t,127,-128)),t>=0?r.writeUInt8(t,e,n):r.writeUInt8(255+t+1,e,n)},h.prototype.writeInt16LE=function(t,e,n){A(this,t,e,!1,n)},h.prototype.writeInt16BE=function(t,e,n){A(this,t,e,!0,n)},h.prototype.writeInt32LE=function(t,e,n){_(this,t,e,!1,n)},h.prototype.writeInt32BE=function(t,e,n){_(this,t,e,!0,n)},h.prototype.writeFloatLE=function(t,e,n){B(this,t,e,!1,n)},h.prototype.writeFloatBE=function(t,e,n){B(this,t,e,!0,n)},h.prototype.writeDoubleLE=function(t,e,n){k(this,t,e,!1,n)},h.prototype.writeDoubleBE=function(t,e,n){k(this,t,e,!0,n)},e.prototype.readUInt8=h.prototype.readUInt8,e.prototype.readUInt16LE=h.prototype.readUInt16LE,e.prototype.readUInt16BE=h.prototype.readUInt16BE,e.prototype.readUInt32LE=h.prototype.readUInt32LE,e.prototype.readUInt32BE=h.prototype.readUInt32BE,e.prototype.readInt8=h.prototype.readInt8,e.prototype.readInt16LE=h.prototype.readInt16LE,e.prototype.readInt16BE=h.prototype.readInt16BE,e.prototype.readInt32LE=h.prototype.readInt32LE,e.prototype.readInt32BE=h.prototype.readInt32BE,e.prototype.readFloatLE=h.prototype.readFloatLE,e.prototype.readFloatBE=h.prototype.readFloatBE,e.prototype.readDoubleLE=h.prototype.readDoubleLE,e.prototype.readDoubleBE=h.prototype.readDoubleBE,e.prototype.writeUInt8=h.prototype.writeUInt8,e.prototype.writeUInt16LE=h.prototype.writeUInt16LE,e.prototype.writeUInt16BE=h.prototype.writeUInt16BE,e.prototype.writeUInt32LE=h.prototype.writeUInt32LE,e.prototype.writeUInt32BE=h.prototype.writeUInt32BE,e.prototype.writeInt8=h.prototype.writeInt8,e.prototype.writeInt16LE=h.prototype.writeInt16LE,e.prototype.writeInt16BE=h.prototype.writeInt16BE,e.prototype.writeInt32LE=h.prototype.writeInt32LE,e.prototype.writeInt32BE=h.prototype.writeInt32BE,e.prototype.writeFloatLE=h.prototype.writeFloatLE,e.prototype.writeFloatBE=h.prototype.writeFloatBE,e.prototype.writeDoubleLE=h.prototype.writeDoubleLE,e.prototype.writeDoubleBE=h.prototype.writeDoubleBE}()},{assert:2,"./buffer_ieee754":1,"base64-js":5}],3:[function(t,e,n){function r(t){return t instanceof Array||Array.isArray(t)||t&&t!==Object.prototype&&r(t.__proto__)}function i(t){return t instanceof RegExp||"object"==typeof t&&"[object RegExp]"===Object.prototype.toString.call(t)}function o(t){if(t instanceof Date)return!0;if("object"!=typeof t)return!1;var e=Date.prototype&&a(Date.prototype),n=t.__proto__&&a(t.__proto__);return JSON.stringify(n)===JSON.stringify(e)}t("events"),n.isArray=r,n.isDate=function(t){return"[object Date]"===Object.prototype.toString.call(t)},n.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},n.print=function(){},n.puts=function(){},n.debug=function(){},n.inspect=function(t,e,u,f){function h(t,u){if(t&&"function"==typeof t.inspect&&t!==n&&(!t.constructor||t.constructor.prototype!==t))return t.inspect(u);switch(typeof t){case"undefined":return l("undefined","undefined");case"string":var f="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return l(f,"string");case"number":return l(""+t,"number");case"boolean":return l(""+t,"boolean")}if(null===t)return l("null","null");var p=s(t),g=e?a(t):p;if("function"==typeof t&&0===g.length){if(i(t))return l(""+t,"regexp");var y=t.name?": "+t.name:"";return l("[Function"+y+"]","special")}if(o(t)&&0===g.length)return l(t.toUTCString(),"date");var d,v,m;if(r(t)?(v="Array",m=["[","]"]):(v="Object",m=["{","}"]),"function"==typeof t){var w=t.name?": "+t.name:"";d=i(t)?" "+t:" [Function"+w+"]"}else d="";if(o(t)&&(d=" "+t.toUTCString()),0===g.length)return m[0]+d+m[1];if(0>u)return i(t)?l(""+t,"regexp"):l("[Object]","special");c.push(t);var b=g.map(function(e){var n,i;if(t.__lookupGetter__&&(t.__lookupGetter__(e)?i=t.__lookupSetter__(e)?l("[Getter/Setter]","special"):l("[Getter]","special"):t.__lookupSetter__(e)&&(i=l("[Setter]","special"))),p.indexOf(e)<0&&(n="["+e+"]"),i||(c.indexOf(t[e])<0?(i=null===u?h(t[e]):h(t[e],u-1),i.indexOf("\n")>-1&&(i=r(t)?i.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+i.split("\n").map(function(t){return"   "+t}).join("\n"))):i=l("[Circular]","special")),"undefined"==typeof n){if("Array"===v&&e.match(/^\d+$/))return i;n=JSON.stringify(""+e),n.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(n=n.substr(1,n.length-2),n=l(n,"name")):(n=n.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),n=l(n,"string"))}return n+": "+i});c.pop();var x=0,E=b.reduce(function(t,e){return x++,e.indexOf("\n")>=0&&x++,t+e.length+1},0);return b=E>50?m[0]+(""===d?"":d+"\n ")+" "+b.join(",\n  ")+" "+m[1]:m[0]+d+" "+b.join(", ")+" "+m[1]}var c=[],l=function(t,e){var n={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r={special:"cyan",number:"blue","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"}[e];return r?"["+n[r][0]+"m"+t+"["+n[r][1]+"m":t};return f||(l=function(t){return t}),h(t,"undefined"==typeof u?2:u)},n.log=function(){},n.pump=null;var s=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},a=Object.getOwnPropertyNames||function(t){var e=[];for(var n in t)Object.hasOwnProperty.call(t,n)&&e.push(n);return e},u=Object.create||function(t,e){var n;if(null===t)n={__proto__:null};else{if("object"!=typeof t)throw new TypeError("typeof prototype["+typeof t+"] != 'object'");var r=function(){};r.prototype=t,n=new r,n.__proto__=t}return"undefined"!=typeof e&&Object.defineProperties&&Object.defineProperties(n,e),n};n.inherits=function(t,e){t.super_=e,t.prototype=u(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})};var f=/%[sdj%]/g;n.format=function(t){if("string"!=typeof t){for(var e=[],r=0;r<arguments.length;r++)e.push(n.inspect(arguments[r]));return e.join(" ")}for(var r=1,i=arguments,o=i.length,s=String(t).replace(f,function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":return JSON.stringify(i[r++]);default:return t}}),a=i[r];o>r;a=i[++r])s+=null===a||"object"!=typeof a?" "+a:" "+n.inspect(a);return s}},{events:6}],5:[function(t,e){!function(){"use strict";function t(t){var e,n,i,o,s,a;if(t.length%4>0)throw"Invalid string. Length must be a multiple of 4";for(s=t.indexOf("="),s=s>0?t.length-s:0,a=[],i=s>0?t.length-4:t.length,e=0,n=0;i>e;e+=4,n+=3)o=r.indexOf(t[e])<<18|r.indexOf(t[e+1])<<12|r.indexOf(t[e+2])<<6|r.indexOf(t[e+3]),a.push((16711680&o)>>16),a.push((65280&o)>>8),a.push(255&o);return 2===s?(o=r.indexOf(t[e])<<2|r.indexOf(t[e+1])>>4,a.push(255&o)):1===s&&(o=r.indexOf(t[e])<<10|r.indexOf(t[e+1])<<4|r.indexOf(t[e+2])>>2,a.push(255&o>>8),a.push(255&o)),a}function n(t){function e(t){return r[63&t>>18]+r[63&t>>12]+r[63&t>>6]+r[63&t]}var n,i,o,s=t.length%3,a="";for(n=0,o=t.length-s;o>n;n+=3)i=(t[n]<<16)+(t[n+1]<<8)+t[n+2],a+=e(i);switch(s){case 1:i=t[t.length-1],a+=r[i>>2],a+=r[63&i<<4],a+="==";break;case 2:i=(t[t.length-2]<<8)+t[t.length-1],a+=r[i>>10],a+=r[63&i>>4],a+=r[63&i<<2],a+="="}return a}var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";e.exports.toByteArray=t,e.exports.fromByteArray=n}()},{}],7:[function(t,e,n){n.readIEEE754=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,f=u>>1,h=-7,c=n?0:i-1,l=n?1:-1,p=t[e+c];for(c+=l,o=p&(1<<-h)-1,p>>=-h,h+=a;h>0;o=256*o+t[e+c],c+=l,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=r;h>0;s=256*s+t[e+c],c+=l,h-=8);if(0===o)o=1-f;else{if(o===u)return s?0/0:1/0*(p?-1:1);s+=Math.pow(2,r),o-=f}return(p?-1:1)*s*Math.pow(2,o-r)},n.writeIEEE754=function(t,e,n,r,i,o){var s,a,u,f=8*o-i-1,h=(1<<f)-1,c=h>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?o-1:0,g=r?-1:1,y=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||1/0===e?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+c>=1?l/u:l*Math.pow(2,1-c),e*u>=2&&(s++,u/=2),s+c>=h?(a=0,s=h):s+c>=1?(a=(e*u-1)*Math.pow(2,i),s+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,i),s=0));i>=8;t[n+p]=255&a,p+=g,a/=256,i-=8);for(s=s<<i|a,f+=i;f>0;t[n+p]=255&s,p+=g,s/=256,f-=8);t[n+p-g]|=128*y}},{}],8:[function(t,e){var n=e.exports={};n.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){if(t.source===window&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var e=n.shift();e()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")}},{}],6:[function(t,e,n){!function(t){function e(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(e===t[n])return n;return-1}t.EventEmitter||(t.EventEmitter=function(){});var r=n.EventEmitter=t.EventEmitter,i="function"==typeof Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=10;r.prototype.setMaxListeners=function(t){this._events||(this._events={}),this._events.maxListeners=t},r.prototype.emit=function(t){if("error"===t&&(!this._events||!this._events.error||i(this._events.error)&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var e=this._events[t];if(!e)return!1;if("function"==typeof e){switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:var n=Array.prototype.slice.call(arguments,1);e.apply(this,n)}return!0}if(i(e)){for(var n=Array.prototype.slice.call(arguments,1),r=e.slice(),o=0,s=r.length;s>o;o++)r[o].apply(this,n);return!0}return!1},r.prototype.addListener=function(t,e){if("function"!=typeof e)throw new Error("addListener only takes instances of Function");if(this._events||(this._events={}),this.emit("newListener",t,e),this._events[t])if(i(this._events[t])){if(!this._events[t].warned){var n;n=void 0!==this._events.maxListeners?this._events.maxListeners:o,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace())}this._events[t].push(e)}else this._events[t]=[this._events[t],e];else this._events[t]=e;return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){var n=this;return n.on(t,function r(){n.removeListener(t,r),e.apply(this,arguments)}),this},r.prototype.removeListener=function(t,n){if("function"!=typeof n)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[t])return this;var r=this._events[t];if(i(r)){var o=e(r,n);if(0>o)return this;r.splice(o,1),0==r.length&&delete this._events[t]}else this._events[t]===n&&delete this._events[t];return this},r.prototype.removeAllListeners=function(t){return 0===arguments.length?(this._events={},this):(t&&this._events&&this._events[t]&&(this._events[t]=null),this)},r.prototype.listeners=function(t){return this._events||(this._events={}),this._events[t]||(this._events[t]=[]),i(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]}}(t("__browserify_process"))},{__browserify_process:8}],4:[function(t,e,n){!function(){function e(t){this.length=t}function r(t){return 16>t?"0"+t.toString(16):t.toString(16)}function i(t){for(var e=[],n=0;n<t.length;n++)if(t.charCodeAt(n)<=127)e.push(t.charCodeAt(n));else for(var r=encodeURIComponent(t.charAt(n)).substr(1).split("%"),i=0;i<r.length;i++)e.push(parseInt(r[i],16));return e}function o(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function s(e){return t("base64-js").toByteArray(e)}function a(t,e,n,r){for(var i=0;r>i&&!(i+n>=e.length||i>=t.length);)e[i+n]=t[i],i++;return i}function u(t){try{return decodeURIComponent(t)}catch(e){return String.fromCharCode(65533)}}function f(t){return t=~~Math.ceil(+t),0>t?0:t}function h(t,n,r){if(!(this instanceof h))return new h(t,n,r);var i;if("number"==typeof r)this.length=f(n),this.parent=t,this.offset=r;else{switch(i=typeof t){case"number":this.length=f(t);break;case"string":this.length=h.byteLength(t,n);break;case"object":this.length=f(t.length);break;default:throw new Error("First argument needs to be a number, array or string.")}if(this.length>h.poolSize?(this.parent=new e(this.length),this.offset=0):((!P||P.length-P.used<this.length)&&l(),this.parent=P,this.offset=P.used,P.used+=this.length),c(t))for(var o=0;o<this.length;o++)this.parent[o+this.offset]=t[o];else"string"==i&&(this.length=this.write(t,0,n))}}function c(t){return Array.isArray(t)||h.isBuffer(t)||t&&"object"==typeof t&&"number"==typeof t.length}function l(){P=new e(h.poolSize),P.used=0}function p(t,e,n,r){var i=0;return r||(C.ok("boolean"==typeof n,"missing or invalid endian"),C.ok(void 0!==e&&null!==e,"missing offset"),C.ok(e+1<t.length,"Trying to read beyond buffer length")),n?(i=t.parent[t.offset+e]<<8,i|=t.parent[t.offset+e+1]):(i=t.parent[t.offset+e],i|=t.parent[t.offset+e+1]<<8),i}function g(t,e,n,r){var i=0;return r||(C.ok("boolean"==typeof n,"missing or invalid endian"),C.ok(void 0!==e&&null!==e,"missing offset"),C.ok(e+3<t.length,"Trying to read beyond buffer length")),n?(i=t.parent[t.offset+e+1]<<16,i|=t.parent[t.offset+e+2]<<8,i|=t.parent[t.offset+e+3],i+=t.parent[t.offset+e]<<24>>>0):(i=t.parent[t.offset+e+2]<<16,i|=t.parent[t.offset+e+1]<<8,i|=t.parent[t.offset+e],i+=t.parent[t.offset+e+3]<<24>>>0),i}function y(t,e,n,r){var i,o;return r||(C.ok("boolean"==typeof n,"missing or invalid endian"),C.ok(void 0!==e&&null!==e,"missing offset"),C.ok(e+1<t.length,"Trying to read beyond buffer length")),o=p(t,e,n,r),i=32768&o,i?-1*(65535-o+1):o}function d(t,e,n,r){var i,o;return r||(C.ok("boolean"==typeof n,"missing or invalid endian"),C.ok(void 0!==e&&null!==e,"missing offset"),C.ok(e+3<t.length,"Trying to read beyond buffer length")),o=g(t,e,n,r),i=2147483648&o,i?-1*(4294967295-o+1):o}function v(e,n,r,i){return i||(C.ok("boolean"==typeof r,"missing or invalid endian"),C.ok(n+3<e.length,"Trying to read beyond buffer length")),t("./buffer_ieee754").readIEEE754(e,n,r,23,4)}function m(e,n,r,i){return i||(C.ok("boolean"==typeof r,"missing or invalid endian"),C.ok(n+7<e.length,"Trying to read beyond buffer length")),t("./buffer_ieee754").readIEEE754(e,n,r,52,8)}function w(t,e){C.ok("number"==typeof t,"cannot write a non-number as a number"),C.ok(t>=0,"specified a negative value for writing an unsigned value"),C.ok(e>=t,"value is larger than maximum value for type"),C.ok(Math.floor(t)===t,"value has a fractional component")}function b(t,e,n,r,i){i||(C.ok(void 0!==e&&null!==e,"missing value"),C.ok("boolean"==typeof r,"missing or invalid endian"),C.ok(void 0!==n&&null!==n,"missing offset"),C.ok(n+1<t.length,"trying to write beyond buffer length"),w(e,65535)),r?(t.parent[t.offset+n]=(65280&e)>>>8,t.parent[t.offset+n+1]=255&e):(t.parent[t.offset+n+1]=(65280&e)>>>8,t.parent[t.offset+n]=255&e)}function x(t,e,n,r,i){i||(C.ok(void 0!==e&&null!==e,"missing value"),C.ok("boolean"==typeof r,"missing or invalid endian"),C.ok(void 0!==n&&null!==n,"missing offset"),C.ok(n+3<t.length,"trying to write beyond buffer length"),w(e,4294967295)),r?(t.parent[t.offset+n]=255&e>>>24,t.parent[t.offset+n+1]=255&e>>>16,t.parent[t.offset+n+2]=255&e>>>8,t.parent[t.offset+n+3]=255&e):(t.parent[t.offset+n+3]=255&e>>>24,t.parent[t.offset+n+2]=255&e>>>16,t.parent[t.offset+n+1]=255&e>>>8,t.parent[t.offset+n]=255&e)}function E(t,e,n){C.ok("number"==typeof t,"cannot write a non-number as a number"),C.ok(e>=t,"value larger than maximum allowed value"),C.ok(t>=n,"value smaller than minimum allowed value"),C.ok(Math.floor(t)===t,"value has a fractional component")}function I(t,e,n){C.ok("number"==typeof t,"cannot write a non-number as a number"),C.ok(e>=t,"value larger than maximum allowed value"),C.ok(t>=n,"value smaller than minimum allowed value")}function A(t,e,n,r,i){i||(C.ok(void 0!==e&&null!==e,"missing value"),C.ok("boolean"==typeof r,"missing or invalid endian"),C.ok(void 0!==n&&null!==n,"missing offset"),C.ok(n+1<t.length,"Trying to write beyond buffer length"),E(e,32767,-32768)),e>=0?b(t,e,n,r,i):b(t,65535+e+1,n,r,i)}function _(t,e,n,r,i){i||(C.ok(void 0!==e&&null!==e,"missing value"),C.ok("boolean"==typeof r,"missing or invalid endian"),C.ok(void 0!==n&&null!==n,"missing offset"),C.ok(n+3<t.length,"Trying to write beyond buffer length"),E(e,2147483647,-2147483648)),e>=0?x(t,e,n,r,i):x(t,4294967295+e+1,n,r,i)}function B(e,n,r,i,o){o||(C.ok(void 0!==n&&null!==n,"missing value"),C.ok("boolean"==typeof i,"missing or invalid endian"),C.ok(void 0!==r&&null!==r,"missing offset"),C.ok(r+3<e.length,"Trying to write beyond buffer length"),I(n,3.4028234663852886e38,-3.4028234663852886e38)),t("./buffer_ieee754").writeIEEE754(e,n,r,i,23,4)
}function k(e,n,r,i,o){o||(C.ok(void 0!==n&&null!==n,"missing value"),C.ok("boolean"==typeof i,"missing or invalid endian"),C.ok(void 0!==r&&null!==r,"missing offset"),C.ok(r+7<e.length,"Trying to write beyond buffer length"),I(n,1.7976931348623157e308,-1.7976931348623157e308)),t("./buffer_ieee754").writeIEEE754(e,n,r,i,52,8)}var C=t("assert");n.INSPECT_MAX_BYTES=50,e.byteLength=function(t,e){switch(e||"utf8"){case"hex":return t.length/2;case"utf8":case"utf-8":return i(t).length;case"ascii":return t.length;case"base64":return s(t).length;default:throw new Error("Unknown encoding")}},e.prototype.utf8Write=function(t,n,r){return e._charsWritten=a(i(t),this,n,r)},e.prototype.asciiWrite=function(t,n,r){return e._charsWritten=a(o(t),this,n,r)},e.prototype.base64Write=function(t,n,r){return e._charsWritten=a(s(t),this,n,r)},e.prototype.base64Slice=function(){var e=Array.prototype.slice.apply(this,arguments);return t("base64-js").fromByteArray(e)},e.prototype.utf8Slice=function(){for(var t=Array.prototype.slice.apply(this,arguments),e="",n="",r=0;r<t.length;)t[r]<=127?(e+=u(n)+String.fromCharCode(t[r]),n=""):n+="%"+t[r].toString(16),r++;return e+u(n)},e.prototype.asciiSlice=function(){for(var t=Array.prototype.slice.apply(this,arguments),e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},e.prototype.inspect=function(){for(var t=[],e=this.length,i=0;e>i;i++)if(t[i]=r(this[i]),i==n.INSPECT_MAX_BYTES){t[i+1]="...";break}return"<SlowBuffer "+t.join(" ")+">"},e.prototype.hexSlice=function(t,e){var n=this.length;(!t||0>t)&&(t=0),(!e||0>e||e>n)&&(e=n);for(var i="",o=t;e>o;o++)i+=r(this[o]);return i},e.prototype.toString=function(t,e,n){if(t=String(t||"utf8").toLowerCase(),e=+e||0,"undefined"==typeof n&&(n=this.length),+n==e)return"";switch(t){case"hex":return this.hexSlice(e,n);case"utf8":case"utf-8":return this.utf8Slice(e,n);case"ascii":return this.asciiSlice(e,n);case"binary":return this.binarySlice(e,n);case"base64":return this.base64Slice(e,n);case"ucs2":case"ucs-2":return this.ucs2Slice(e,n);default:throw new Error("Unknown encoding")}},e.prototype.hexWrite=function(t,n,r){n=+n||0;var i=this.length-n;r?(r=+r,r>i&&(r=i)):r=i;var o=t.length;if(o%2)throw new Error("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;r>s;s++){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");this[n+s]=a}return e._charsWritten=2*s,s},e.prototype.write=function(t,e,n,r){if(isFinite(e))isFinite(n)||(r=n,n=void 0);else{var i=r;r=e,e=n,n=i}e=+e||0;var o=this.length-e;switch(n?(n=+n,n>o&&(n=o)):n=o,r=String(r||"utf8").toLowerCase()){case"hex":return this.hexWrite(t,e,n);case"utf8":case"utf-8":return this.utf8Write(t,e,n);case"ascii":return this.asciiWrite(t,e,n);case"binary":return this.binaryWrite(t,e,n);case"base64":return this.base64Write(t,e,n);case"ucs2":case"ucs-2":return this.ucs2Write(t,e,n);default:throw new Error("Unknown encoding")}},e.prototype.slice=function(t,e){if(void 0===e&&(e=this.length),e>this.length)throw new Error("oob");if(t>e)throw new Error("oob");return new h(this,e-t,+t)},e.prototype.copy=function(t,e,n,r){for(var i=[],o=n;r>o;o++)C.ok("undefined"!=typeof this[o],"copying undefined buffer bytes!"),i.push(this[o]);for(var o=e;o<e+i.length;o++)t[o]=i[o-e]},n.SlowBuffer=e,n.Buffer=h,h.poolSize=8192;var P;h.isBuffer=function(t){return t instanceof h||t instanceof e},h.concat=function(t,e){if(!Array.isArray(t))throw new Error("Usage: Buffer.concat(list, [totalLength])\n       list should be an Array.");if(0===t.length)return new h(0);if(1===t.length)return t[0];if("number"!=typeof e){e=0;for(var n=0;n<t.length;n++){var r=t[n];e+=r.length}}for(var i=new h(e),o=0,n=0;n<t.length;n++){var r=t[n];r.copy(i,o),o+=r.length}return i},h.prototype.inspect=function(){for(var t=[],e=this.length,i=0;e>i;i++)if(t[i]=r(this.parent[i+this.offset]),i==n.INSPECT_MAX_BYTES){t[i+1]="...";break}return"<Buffer "+t.join(" ")+">"},h.prototype.get=function(t){if(0>t||t>=this.length)throw new Error("oob");return this.parent[this.offset+t]},h.prototype.set=function(t,e){if(0>t||t>=this.length)throw new Error("oob");return this.parent[this.offset+t]=e},h.prototype.write=function(t,n,r,i){if(isFinite(n))isFinite(r)||(i=r,r=void 0);else{var o=i;i=n,n=r,r=o}n=+n||0;var s=this.length-n;r?(r=+r,r>s&&(r=s)):r=s,i=String(i||"utf8").toLowerCase();var a;switch(i){case"hex":a=this.parent.hexWrite(t,this.offset+n,r);break;case"utf8":case"utf-8":a=this.parent.utf8Write(t,this.offset+n,r);break;case"ascii":a=this.parent.asciiWrite(t,this.offset+n,r);break;case"binary":a=this.parent.binaryWrite(t,this.offset+n,r);break;case"base64":a=this.parent.base64Write(t,this.offset+n,r);break;case"ucs2":case"ucs-2":a=this.parent.ucs2Write(t,this.offset+n,r);break;default:throw new Error("Unknown encoding")}return h._charsWritten=e._charsWritten,a},h.prototype.toString=function(t,e,n){switch(t=String(t||"utf8").toLowerCase(),"undefined"==typeof e||0>e?e=0:e>this.length&&(e=this.length),"undefined"==typeof n||n>this.length?n=this.length:0>n&&(n=0),e+=this.offset,n+=this.offset,t){case"hex":return this.parent.hexSlice(e,n);case"utf8":case"utf-8":return this.parent.utf8Slice(e,n);case"ascii":return this.parent.asciiSlice(e,n);case"binary":return this.parent.binarySlice(e,n);case"base64":return this.parent.base64Slice(e,n);case"ucs2":case"ucs-2":return this.parent.ucs2Slice(e,n);default:throw new Error("Unknown encoding")}},h.byteLength=e.byteLength,h.prototype.fill=function(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),"string"==typeof t&&(t=t.charCodeAt(0)),"number"!=typeof t||isNaN(t))throw new Error("value is not a number");if(e>n)throw new Error("end < start");if(n===e)return 0;if(0==this.length)return 0;if(0>e||e>=this.length)throw new Error("start out of bounds");if(0>n||n>this.length)throw new Error("end out of bounds");return this.parent.fill(t,e+this.offset,n+this.offset)},h.prototype.copy=function(t,e,n,r){var i=this;if(n||(n=0),r||(r=this.length),e||(e=0),n>r)throw new Error("sourceEnd < sourceStart");if(r===n)return 0;if(0==t.length||0==i.length)return 0;if(0>e||e>=t.length)throw new Error("targetStart out of bounds");if(0>n||n>=i.length)throw new Error("sourceStart out of bounds");if(0>r||r>i.length)throw new Error("sourceEnd out of bounds");return r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n),this.parent.copy(t.parent,e+t.offset,n+this.offset,r+this.offset)},h.prototype.slice=function(t,e){if(void 0===e&&(e=this.length),e>this.length)throw new Error("oob");if(t>e)throw new Error("oob");return new h(this.parent,e-t,+t+this.offset)},h.prototype.utf8Slice=function(t,e){return this.toString("utf8",t,e)},h.prototype.binarySlice=function(t,e){return this.toString("binary",t,e)},h.prototype.asciiSlice=function(t,e){return this.toString("ascii",t,e)},h.prototype.utf8Write=function(t,e){return this.write(t,e,"utf8")},h.prototype.binaryWrite=function(t,e){return this.write(t,e,"binary")},h.prototype.asciiWrite=function(t,e){return this.write(t,e,"ascii")},h.prototype.readUInt8=function(t,e){var n=this;return e||(C.ok(void 0!==t&&null!==t,"missing offset"),C.ok(t<n.length,"Trying to read beyond buffer length")),n.parent[n.offset+t]},h.prototype.readUInt16LE=function(t,e){return p(this,t,!1,e)},h.prototype.readUInt16BE=function(t,e){return p(this,t,!0,e)},h.prototype.readUInt32LE=function(t,e){return g(this,t,!1,e)},h.prototype.readUInt32BE=function(t,e){return g(this,t,!0,e)},h.prototype.readInt8=function(t,e){var n,r=this;return e||(C.ok(void 0!==t&&null!==t,"missing offset"),C.ok(t<r.length,"Trying to read beyond buffer length")),n=128&r.parent[r.offset+t],n?-1*(255-r.parent[r.offset+t]+1):r.parent[r.offset+t]},h.prototype.readInt16LE=function(t,e){return y(this,t,!1,e)},h.prototype.readInt16BE=function(t,e){return y(this,t,!0,e)},h.prototype.readInt32LE=function(t,e){return d(this,t,!1,e)},h.prototype.readInt32BE=function(t,e){return d(this,t,!0,e)},h.prototype.readFloatLE=function(t,e){return v(this,t,!1,e)},h.prototype.readFloatBE=function(t,e){return v(this,t,!0,e)},h.prototype.readDoubleLE=function(t,e){return m(this,t,!1,e)},h.prototype.readDoubleBE=function(t,e){return m(this,t,!0,e)},h.prototype.writeUInt8=function(t,e,n){var r=this;n||(C.ok(void 0!==t&&null!==t,"missing value"),C.ok(void 0!==e&&null!==e,"missing offset"),C.ok(e<r.length,"trying to write beyond buffer length"),w(t,255)),r.parent[r.offset+e]=t},h.prototype.writeUInt16LE=function(t,e,n){b(this,t,e,!1,n)},h.prototype.writeUInt16BE=function(t,e,n){b(this,t,e,!0,n)},h.prototype.writeUInt32LE=function(t,e,n){x(this,t,e,!1,n)},h.prototype.writeUInt32BE=function(t,e,n){x(this,t,e,!0,n)},h.prototype.writeInt8=function(t,e,n){var r=this;n||(C.ok(void 0!==t&&null!==t,"missing value"),C.ok(void 0!==e&&null!==e,"missing offset"),C.ok(e<r.length,"Trying to write beyond buffer length"),E(t,127,-128)),t>=0?r.writeUInt8(t,e,n):r.writeUInt8(255+t+1,e,n)},h.prototype.writeInt16LE=function(t,e,n){A(this,t,e,!1,n)},h.prototype.writeInt16BE=function(t,e,n){A(this,t,e,!0,n)},h.prototype.writeInt32LE=function(t,e,n){_(this,t,e,!1,n)},h.prototype.writeInt32BE=function(t,e,n){_(this,t,e,!0,n)},h.prototype.writeFloatLE=function(t,e,n){B(this,t,e,!1,n)},h.prototype.writeFloatBE=function(t,e,n){B(this,t,e,!0,n)},h.prototype.writeDoubleLE=function(t,e,n){k(this,t,e,!1,n)},h.prototype.writeDoubleBE=function(t,e,n){k(this,t,e,!0,n)},e.prototype.readUInt8=h.prototype.readUInt8,e.prototype.readUInt16LE=h.prototype.readUInt16LE,e.prototype.readUInt16BE=h.prototype.readUInt16BE,e.prototype.readUInt32LE=h.prototype.readUInt32LE,e.prototype.readUInt32BE=h.prototype.readUInt32BE,e.prototype.readInt8=h.prototype.readInt8,e.prototype.readInt16LE=h.prototype.readInt16LE,e.prototype.readInt16BE=h.prototype.readInt16BE,e.prototype.readInt32LE=h.prototype.readInt32LE,e.prototype.readInt32BE=h.prototype.readInt32BE,e.prototype.readFloatLE=h.prototype.readFloatLE,e.prototype.readFloatBE=h.prototype.readFloatBE,e.prototype.readDoubleLE=h.prototype.readDoubleLE,e.prototype.readDoubleBE=h.prototype.readDoubleBE,e.prototype.writeUInt8=h.prototype.writeUInt8,e.prototype.writeUInt16LE=h.prototype.writeUInt16LE,e.prototype.writeUInt16BE=h.prototype.writeUInt16BE,e.prototype.writeUInt32LE=h.prototype.writeUInt32LE,e.prototype.writeUInt32BE=h.prototype.writeUInt32BE,e.prototype.writeInt8=h.prototype.writeInt8,e.prototype.writeInt16LE=h.prototype.writeInt16LE,e.prototype.writeInt16BE=h.prototype.writeInt16BE,e.prototype.writeInt32LE=h.prototype.writeInt32LE,e.prototype.writeInt32BE=h.prototype.writeInt32BE,e.prototype.writeFloatLE=h.prototype.writeFloatLE,e.prototype.writeFloatBE=h.prototype.writeFloatBE,e.prototype.writeDoubleLE=h.prototype.writeDoubleLE,e.prototype.writeDoubleBE=h.prototype.writeDoubleBE}()},{assert:2,"./buffer_ieee754":7,"base64-js":9}],9:[function(t,e){!function(){"use strict";function t(t){var e,n,i,o,s,a;if(t.length%4>0)throw"Invalid string. Length must be a multiple of 4";for(s=t.indexOf("="),s=s>0?t.length-s:0,a=[],i=s>0?t.length-4:t.length,e=0,n=0;i>e;e+=4,n+=3)o=r.indexOf(t[e])<<18|r.indexOf(t[e+1])<<12|r.indexOf(t[e+2])<<6|r.indexOf(t[e+3]),a.push((16711680&o)>>16),a.push((65280&o)>>8),a.push(255&o);return 2===s?(o=r.indexOf(t[e])<<2|r.indexOf(t[e+1])>>4,a.push(255&o)):1===s&&(o=r.indexOf(t[e])<<10|r.indexOf(t[e+1])<<4|r.indexOf(t[e+2])>>2,a.push(255&o>>8),a.push(255&o)),a}function n(t){function e(t){return r[63&t>>18]+r[63&t>>12]+r[63&t>>6]+r[63&t]}var n,i,o,s=t.length%3,a="";for(n=0,o=t.length-s;o>n;n+=3)i=(t[n]<<16)+(t[n+1]<<8)+t[n+2],a+=e(i);switch(s){case 1:i=t[t.length-1],a+=r[i>>2],a+=r[63&i<<4],a+="==";break;case 2:i=(t[t.length-2]<<8)+t[t.length-1],a+=r[i>>10],a+=r[63&i>>4],a+=r[63&i<<2],a+="="}return a}var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";e.exports.toByteArray=t,e.exports.fromByteArray=n}()},{}]},{},[]),e.exports=t("buffer-browserify")},{}],54:[function(t,e,n){!function(e,r){"use strict";function i(t){if(t){var e=t.length||t.byteLength,n=m.log2(e);E[n].push(t)}}function o(t){i(t.buffer)}function s(t){var t=m.nextPow2(t),e=m.log2(t),n=E[e];return n.length>0?n.pop():new ArrayBuffer(t)}function a(t){return new Uint8Array(s(t),0,t)}function u(t){return new Uint16Array(s(2*t),0,t)}function f(t){return new Uint32Array(s(4*t),0,t)}function h(t){return new Int8Array(s(t),0,t)}function c(t){return new Int16Array(s(2*t),0,t)}function l(t){return new Int32Array(s(4*t),0,t)}function p(t){return new Float32Array(s(4*t),0,t)}function g(t){return new Float64Array(s(8*t),0,t)}function y(t){return b?new Uint8ClampedArray(s(t),0,t):a(t)}function d(t){return new DataView(s(t),0,t)}function v(t){t=m.nextPow2(t);var n=m.log2(t),r=I[n];return r.length>0?r.pop():new e(t)}var m=t("bit-twiddle"),w=t("dup");r.__TYPEDARRAY_POOL||(r.__TYPEDARRAY_POOL={UINT8:w([32,0]),UINT16:w([32,0]),UINT32:w([32,0]),INT8:w([32,0]),INT16:w([32,0]),INT32:w([32,0]),FLOAT:w([32,0]),DOUBLE:w([32,0]),DATA:w([32,0]),UINT8C:w([32,0]),BUFFER:w([32,0])});var b="undefined"!=typeof Uint8ClampedArray,x=r.__TYPEDARRAY_POOL;x.UINT8C||(x.UINT8C=w([32,0])),x.BUFFER||(x.BUFFER=w([32,0]));var E=x.DATA,I=x.BUFFER;n.free=function(t){if(e.isBuffer(t))I[m.log2(t.length)].push(t);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(t)&&(t=t.buffer),!t)return;var n=t.length||t.byteLength,r=0|m.log2(n);E[r].push(t)}},n.freeUint8=n.freeUint16=n.freeUint32=n.freeInt8=n.freeInt16=n.freeInt32=n.freeFloat32=n.freeFloat=n.freeFloat64=n.freeDouble=n.freeUint8Clamped=n.freeDataView=o,n.freeArrayBuffer=i,n.freeBuffer=function(t){I[m.log2(t.length)].push(t)},n.malloc=function(t,e){if(void 0===e||"arraybuffer"===e)return s(t);switch(e){case"uint8":return a(t);case"uint16":return u(t);case"uint32":return f(t);case"int8":return h(t);case"int16":return c(t);case"int32":return l(t);case"float":case"float32":return p(t);case"double":case"float64":return g(t);case"uint8_clamped":return y(t);case"buffer":return v(t);case"data":case"dataview":return d(t);default:return null}return null},n.mallocArrayBuffer=s,n.mallocUint8=a,n.mallocUint16=u,n.mallocUint32=f,n.mallocInt8=h,n.mallocInt16=c,n.mallocInt32=l,n.mallocFloat32=n.mallocFloat=p,n.mallocFloat64=n.mallocDouble=g,n.mallocUint8Clamped=y,n.mallocDataView=d,n.mallocBuffer=v,n.clearCache=function(){for(var t=0;32>t;++t)x.UINT8[t].length=0,x.UINT16[t].length=0,x.UINT32[t].length=0,x.INT8[t].length=0,x.INT16[t].length=0,x.INT32[t].length=0,x.FLOAT[t].length=0,x.DOUBLE[t].length=0,x.UINT8C[t].length=0,E[t].length=0,I[t].length=0}}(t("__browserify_buffer").Buffer,window)},{__browserify_buffer:61,"bit-twiddle":58,dup:60}]},{},[1]);